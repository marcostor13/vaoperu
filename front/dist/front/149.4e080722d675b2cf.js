"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[149],{149:(x,m,o)=>{o.r(m),o.d(m,{ViewCompanyModule:()=>j});var c=o(9808),p=o(9812),d=o(5767),s=o(801),l=o(5439),t=o(5e3),f=o(1864),C=o(1724),w=o(2542),b=o(319),T=o(9062),Z=o(8157),v=o(9783),S=o(5519),y=o(3561),h=o(3725),I=o(3957),F=o(3349);function _(i,a){1&i&&t._UZ(0,"img",28)}function M(i,a){1&i&&t._UZ(0,"img",29)}function U(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).information()}),t._uU(1,"Informaci\xf3n"),t.qZA()}}function V(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return n.confirmDeleteFavorites(n.profileProvider._id)}),t._UZ(1,"fa-icon",32),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("icon",e.faStar)}}function A(i,a){if(1&i&&(t.TgZ(0,"span",37),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.title)}}function Y(i,a){if(1&i&&t._UZ(0,"app-product-list",38),2&i){const e=t.oxw().$implicit,r=t.oxw(2);t.Q6J("type",e.title)("profileProviderId",r.profileProvider._id)("items",e.data)("rows",3)}}function O(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"p-tabPanel")(1,"div",33)(2,"button",34),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).allproduct()}),t._uU(3," Ver todos "),t.qZA()(),t.YNc(4,A,2,1,"ng-template",35),t.YNc(5,Y,1,4,"app-product-list",36),t.qZA()}if(2&i){const e=a.$implicit;t.xp6(5),t.Q6J("ngIf","Informaci\xf3n"!==e.title)}}const J=function(i){return{"background-image":i}};function N(i,a){if(1&i&&(t.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8),t._UZ(4,"div",9),t.TgZ(5,"div",10)(6,"div",11),t._uU(7),t.qZA(),t.TgZ(8,"div",12),t._uU(9),t.qZA(),t.TgZ(10,"div",13),t.YNc(11,_,1,0,"img",14),t.YNc(12,M,1,0,"img",15),t.TgZ(13,"span",16),t._uU(14),t.qZA()(),t.TgZ(15,"div",17)(16,"a",18),t._UZ(17,"fa-icon",19),t.qZA(),t.TgZ(18,"a",20),t.ALo(19,"whatsapp"),t._UZ(20,"fa-icon",21),t.qZA()(),t.TgZ(21,"div",22),t.YNc(22,U,2,0,"button",23),t.YNc(23,V,2,1,"button",24),t.qZA()()()(),t.TgZ(24,"div",25)(25,"p-tabView",26),t.YNc(26,O,6,1,"p-tabPanel",27),t.qZA()()()()),2&i){const e=t.oxw();t.xp6(4),t.Q6J("ngStyle",t.VKq(17,J,"url("+e.profileProvider.image+")")),t.xp6(3),t.Oqu(e.profileProvider.comercialName),t.xp6(2),t.Oqu(e.profileProvider.description),t.xp6(2),t.Q6J("ngIf",e.aperture(e.profileProvider.openTime,e.profileProvider.closeTime)),t.xp6(1),t.Q6J("ngIf",!e.aperture(e.profileProvider.openTime,e.profileProvider.closeTime)),t.xp6(2),t.AsE("",e.profileProvider.openTime," - ",e.profileProvider.closeTime,""),t.xp6(2),t.MGl("href","tel:",e.profileProvider.phone,"",t.LSH),t.xp6(1),t.Q6J("icon",e.faPhone),t.xp6(1),t.hYB("href","https://wa.me/",t.lcZ(19,15,e.profileProvider.whatsapp),"?text=Hola! ",e.profileProvider.comercialName,"",t.LSH),t.xp6(2),t.Q6J("icon",e.faWhatsapp),t.xp6(2),t.Q6J("ngIf",!e.isFavorite(e.profileProvider._id)),t.xp6(1),t.Q6J("ngIf",e.isFavorite(e.profileProvider._id)),t.xp6(3),t.Q6J("ngForOf",e.tabs)}}const B=[{path:"productos",loadChildren:()=>o.e(68).then(o.bind(o,6068)).then(i=>i.AllProductsModule)},{path:"informacion",loadChildren:()=>o.e(343).then(o.bind(o,8343)).then(i=>i.InformationProductsModule)},{path:"",component:(()=>{class i{constructor(e,r,n,u,g,P,H,W,$,R){this.route=e,this.generalService=r,this.profileProviderService=n,this.authService=u,this.productService=g,this.offersService=P,this.favoriteService=H,this.messageService=W,this.confirmationService=$,this.router=R,this.faWhatsapp=d.VHX,this.faPhone=s.j1w,this.tabs=[],this.faStar=s.Tab,this.faArrowLeft=s.acZ,this.companyUrl=this.route.snapshot.paramMap.get("id")}ngOnInit(){this.getUrlData(),this.getFavorites()}getUrlData(){this.profileProviderService.getUrlByUrl(this.companyUrl).subscribe(e=>{var r;this.getProfileProvider(null===(r=null==e?void 0:e.data[0])||void 0===r?void 0:r.profileProviderId)})}getProfileProvider(e){this.profileProviderService.getById(e).subscribe(r=>{this.profileProvider=r.data,this.getProducts()})}getProducts(){this.productService.getByProfileProviderId(this.profileProvider._id).subscribe(e=>{this.products=e.data,this.getOffers()})}getOffers(){this.offersService.getByProfileProviderId(this.profileProvider._id).subscribe(e=>{this.offers=e.data,this.formatTabs()})}formatTabs(){let e=[...this.products.filter(r=>r.isFeatured)];this.products.length>0&&(this.tabs=[...this.tabs,{title:"Productos",data:this.products}]),e.length>0&&(this.tabs=[...this.tabs,{title:"Destacados",data:e}]),this.offers.length>0&&(this.tabs=[...this.tabs,{title:"Ofertas",data:this.offers}])}addfavorites(){this.authService.getRole()||(this.eventHeader={event:"open-login"})}getFavorites(){this.role=this.authService.getRole(),this.role&&this.favoriteService.getByClientId(this.authService.getUserID()).subscribe(e=>{this.favorites=e.data})}isFavorite(e){if(this.favorites){let r=!1;return this.favorites.map(n=>{n.profileProviderId===e&&(r=!0)}),r}}deleteFavorites(e){let r;this.favorites.map(n=>{n.profileProviderId===e&&(r=n._id)}),r&&this.favoriteService.delete(r).subscribe(n=>{this.messageService.add({detail:n.message,summary:"\xc9xito",severity:"success"}),this.getFavorites()},n=>{this.messageService.add({detail:n.error,summary:"Error",severity:"error"})})}confirmDeleteFavorites(e){this.confirmationService.confirm({message:"\xbfSeguro que desea eliminar de favoritos?",acceptLabel:"Si",rejectLabel:"No",header:"Confirmaci\xf3n",accept:()=>{this.deleteFavorites(e)}})}allproduct(){this.router.navigate([this.profileProvider.comercialName.toLowerCase().replace(" ","-")+"/productos"])}information(){this.router.navigate([this.profileProvider.comercialName.toLowerCase().replace(" ","-")+"/informacion"])}aperture(e,r){let n=l().format("YYYY-MM-DD"),u=n+" "+e,g=n+" "+r;return l().isBetween(u,g)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p.gz),t.Y36(f.m),t.Y36(C.n),t.Y36(w.e),t.Y36(b.M),t.Y36(T.K),t.Y36(Z.e),t.Y36(v.ez),t.Y36(v.YP),t.Y36(p.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-view-company"]],decls:6,vars:3,consts:[[3,"eventHeader"],[1,"w-100","mt-2","mb-3","px-3","d-flex","justify-content-start"],["routerLink","/",1,"mt-4","bg-transparent","px-2","f-14","font-500","border-0","d-flex","align-items-center","justify-content-center","rounded-pill","text-color5"],[1,"f-14","icon-search","mr-2","text-color5",3,"icon"],["class","container-fluid mt-4 p-0",4,"ngIf"],[1,"container-fluid","mt-4","p-0"],[1,"row","m-0","p-0","justify-content-center"],[1,"cont","d-flex","justify-content-sm-center","px-3"],[1,"d-flex","container-profile"],[1,"image","image-profile",3,"ngStyle"],[1,"ml-4","my-auto"],[1,"f-14","bold","font-600","mt-xl-0","text-left"],[1,"mt-0","f-9"],[1,"d-flex","align-items-center","my-2"],["width","23","src","assets/img/icons/open.svg","alt","Abierto",4,"ngIf"],["width","23","src","assets/img/icons/close.svg","alt","Cerrado",4,"ngIf"],[1,"ml-2","f-9","text-color5","font-500"],[1,"d-flex"],["target","_blank","title","Llamar",1,"link-unstyled","p-1","bg-color2","rounded-circle","icon","d-flex","justify-content-center","align-items-center",3,"href"],[1,"f-10","text-white","fa-rotate-90",3,"icon"],["title","Whatsapp",1,"ml-2","p-1","bg-color1","rounded-circle","icon","d-flex","justify-content-center","align-items-center",3,"href"],[1,"f-12","text-white",3,"icon"],[1,"mt-2","mt-sm-4"],["class","cursor bg-color1 border-0 rounded-lg py-2 px-4 px-sm-5 text-white f-7 font-500",3,"click",4,"ngIf"],["class","cursor pl-2 pr-2 bg-color2 border-0 p-1 rounded-pill f-9 font-500",3,"click",4,"ngIf"],[1,"w-100","m-0","p-0","mt-5"],["styleClass","tabview-custom"],[4,"ngFor","ngForOf"],["width","23","src","assets/img/icons/open.svg","alt","Abierto"],["width","23","src","assets/img/icons/close.svg","alt","Cerrado"],[1,"cursor","bg-color1","border-0","rounded-lg","py-2","px-4","px-sm-5","text-white","f-7","font-500",3,"click"],[1,"cursor","pl-2","pr-2","bg-color2","border-0","p-1","rounded-pill","f-9","font-500",3,"click"],[1,"f-13",3,"icon"],[1,"w-100","px-3","d-flex","justify-content-end","pr-4"],[1,"mt-4","bg-transparent","f-14","border-0","p-0","text-color5",3,"click"],["pTemplate","header","headerStyleClass","w-100"],[3,"type","profileProviderId","items","rows",4,"ngIf"],[1,"f-10","font-500","font-300"],[3,"type","profileProviderId","items","rows"]],template:function(e,r){1&e&&(t._UZ(0,"app-header",0),t.TgZ(1,"div",1)(2,"button",2),t._UZ(3,"fa-icon",3),t._uU(4," Atr\xe1s "),t.qZA()(),t.YNc(5,N,27,19,"div",4)),2&e&&(t.Q6J("eventHeader",r.eventHeader),t.xp6(3),t.Q6J("icon",r.faArrowLeft),t.xp6(2),t.Q6J("ngIf",r.profileProvider))},directives:[S.G,p.rH,y.BN,c.O5,c.PC,h.xf,c.sg,h.x4,v.jx,I.X],pipes:[F.T],styles:[".image-profile[_ngcontent-%COMP%]{min-width:220px;max-width:220px;min-height:220px;max-height:220px}@media (max-width: 520px){.image-profile[_ngcontent-%COMP%]{min-width:150px;max-width:150px;min-height:150px;max-height:150px}}.icon[_ngcontent-%COMP%]{cursor:pointer;min-width:23px;min-height:23px;max-width:23px;max-height:23px}@media (max-width: 1200px){.cont[_ngcontent-%COMP%]{min-width:100%}}"]}),i})()}];let E=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[p.Bz.forChild(B)],p.Bz]}),i})();var L=o(9886),D=o(8078),Q=o(8478);let j=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[c.ez,E,L.O,D.k,y.uH,h.LU,Q.f]]}),i})()},3349:(x,m,o)=>{o.d(m,{T:()=>p});var c=o(5e3);let p=(()=>{class d{transform(l,...t){return 9===l.length?`51${l}`:12===l.length?l.substring(1):l}}return d.\u0275fac=function(l){return new(l||d)},d.\u0275pipe=c.Yjl({name:"whatsapp",type:d,pure:!0}),d})()},8157:(x,m,o)=>{o.d(m,{e:()=>d});var c=o(5e3),p=o(5830);let d=(()=>{class s{constructor(t){this.api=t,this.model="favorite"}save(t){return this.api.api({service:`save-${this.model}`,type:"post",data:t})}getByClientId(t){return this.api.api({service:`get-${this.model}-by-client-id/${t}`,type:"get",data:null})}delete(t){return this.api.api({service:`delete-${this.model}/${t}`,type:"delete",data:null})}}return s.\u0275fac=function(t){return new(t||s)(c.LFG(p.s))},s.\u0275prov=c.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()}}]);