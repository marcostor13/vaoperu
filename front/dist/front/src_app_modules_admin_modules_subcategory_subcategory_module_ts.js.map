{"version":3,"file":"src_app_modules_admin_modules_subcategory_subcategory_module_ts.js","mappings":"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","sources":["./src/app/modules/admin/modules/subcategory/models/subcategory.ts","./src/app/modules/admin/modules/subcategory/services/subcategory.service.ts","./src/app/modules/admin/modules/subcategory/subcategory-routing.module.ts","./src/app/modules/admin/modules/subcategory/subcategory.component.ts","./src/app/modules/admin/modules/subcategory/subcategory.component.html","./src/app/modules/admin/modules/subcategory/subcategory.module.ts"],"sourcesContent":["export class CSubcategory{\r\n    constructor(){\r\n        this.name = ''\r\n        this.image = ''\r\n        this.categoryId = ''\r\n    }\r\n    _id: string\r\n    name: string\r\n    image: string\r\n    categoryId: string\r\n}\r\n\r\nexport class CSubcategoryInvalid {\r\n    constructor() {\r\n        this._id = false\r\n        this.name = false\r\n        this.image = false\r\n        this.categoryId = false\r\n    }\r\n    _id: boolean\r\n    name: boolean\r\n    image: boolean\r\n    categoryId: boolean\r\n}","import { Injectable } from '@angular/core';\r\nimport { ApiService } from '../../../../../services/api.service';\r\nimport { IDataApi } from '../../../../../models/dataapi';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class SubcategoryService {\r\n\r\n  model = 'subcategory'\r\n\r\n  constructor(\r\n    private api: ApiService,\r\n  ) { }\r\n\r\n\r\n  save(element: any) {\r\n    const data: IDataApi = {\r\n      service: element._id ? `update-${this.model}/${element._id}` : `save-${this.model}`,\r\n      type: element._id ? 'patch' : 'post',\r\n      data: element\r\n    }\r\n    return this.api.api(data)\r\n  }\r\n\r\n  updateAll(items: any) {\r\n    const data: IDataApi = {\r\n      service: `update-${this.model}-all` ,\r\n      type: 'patch',\r\n      data: items\r\n    }\r\n    return this.api.api(data)\r\n  }\r\n\r\n  get() {\r\n    const data: IDataApi = {\r\n      service: `get-${this.model}`,\r\n      type: 'get',\r\n      data: null\r\n    }\r\n    return this.api.api(data)\r\n  }\r\n\r\n  delete(id: string) {\r\n    const data: IDataApi = {\r\n      service: `delete-${this.model}/${id}`,\r\n      type: 'delete',\r\n      data: null\r\n    }\r\n    return this.api.api(data)\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { SubcategoryComponent } from './subcategory.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: SubcategoryComponent\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class SubcategoryRoutingModule { }\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { GeneralService } from '@services/general.service';\r\nimport { ConfirmationService } from 'primeng/api';\r\nimport { IResponseApi } from 'src/app/models/responses';\r\nimport { SubSink } from 'subsink';\r\nimport { CSubcategory, CSubcategoryInvalid } from './models/subcategory'\r\nimport { SubcategoryService } from './services/subcategory.service';\r\nimport { MessageService } from 'primeng/api';\r\nimport { CImages } from 'src/app/models/images';\r\nimport { CategoryService } from '../category/services/category.service';\r\nimport { CCategory } from '../category/models/category';\r\n\r\n@Component({\r\n  selector: 'app-subcategory',\r\n  templateUrl: './subcategory.component.html',\r\n  styleUrls: ['./subcategory.component.scss']\r\n})\r\n\r\nexport class SubcategoryComponent implements OnInit {\r\n\r\n  public subs = new SubSink()\r\n  displayModal: boolean = false\r\n  items: CSubcategory[]\r\n  currentItem: CSubcategory = new CSubcategory\r\n  invalid: CSubcategoryInvalid = new CSubcategoryInvalid\r\n  categories: CCategory[]\r\n  //IMAGES\r\n\r\n  currentImage: CImages\r\n  images: File[] = []\r\n  uploadPercent: number\r\n  deleteImage: CImages\r\n\r\n  constructor(\r\n    private subcategoryService: SubcategoryService,\r\n    private categoryService: CategoryService,\r\n    private general: GeneralService,\r\n    private confirmationService: ConfirmationService,\r\n    private messageService: MessageService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.get()\r\n    this.getCategories()\r\n  }\r\n\r\n  get() {\r\n    this.subs.add(\r\n      this.subcategoryService.get().subscribe((response: IResponseApi) => {\r\n        this.items = response.data\r\n\r\n      }, error => {\r\n        this.messageService.add({ severity: 'error', summary: 'Error', detail: error.error.message });\r\n      })\r\n    )\r\n  }\r\n\r\n  getCategories(){\r\n    this.subs.add(\r\n      this.categoryService.get().subscribe((response: IResponseApi)=>{\r\n        this.categories = response.data\r\n      }, error => {\r\n        this.messageService.add({ severity: 'error', summary: 'Error', detail: error.error.message });\r\n      })\r\n    )\r\n  }\r\n\r\n  validate() {\r\n    this.invalid = new CSubcategoryInvalid\r\n    let invalid = false\r\n    if (!this.currentItem.name) {\r\n      invalid = true\r\n      this.invalid.name = true\r\n    }\r\n    if (!this.currentImage) {\r\n      invalid = true\r\n      this.invalid.image = true\r\n    }\r\n    if(invalid){\r\n      this.messageService.add({ severity: 'error', summary: 'Error', detail: 'Revise los campos' });\r\n    }\r\n    return invalid\r\n  }\r\n\r\n  reset() {\r\n    this.currentItem = new CSubcategory\r\n    this.currentImage = null\r\n    this.uploadPercent = 0\r\n  }\r\n\r\n  addEdit(item: CSubcategory = null) {\r\n    if (item) {\r\n      this.currentItem = item\r\n      if (item.image){\r\n        this.currentImage = { file: null, blob: null, url: item.image  }\r\n      }\r\n    } else {\r\n      this.reset()\r\n    }\r\n    this.displayModal = true\r\n  }\r\n\r\n  confirm(event: Event, item: CSubcategory) {\r\n    this.confirmationService.confirm({\r\n      target: event.target,\r\n      message: \"¿Segúro que desea eliminar?\",\r\n      icon: \"pi pi-exclamation-triangle\",\r\n      acceptLabel: \"Sí\",\r\n      rejectLabel: \"No\",\r\n      accept: () => {\r\n        this.delete(item);\r\n      },\r\n      reject: () => {\r\n        // Nothing\r\n      }\r\n    });\r\n  }\r\n\r\n  add() {\r\n    this.subs.add(\r\n      this.subcategoryService.save(this.currentItem).subscribe((response: IResponseApi) => {\r\n        this.messageService.add({ severity: 'success', summary: 'Mensaje', detail: response.message });\r\n        this.currentItem = new CSubcategory\r\n        if(!this.currentItem._id){\r\n          this.reset()\r\n        }\r\n        this.get()\r\n      }, error => {\r\n\r\n        this.messageService.add({ severity: 'error', summary: 'Error', detail: error.error.message });\r\n      })\r\n    )\r\n  }\r\n\r\n  updateAll(){\r\n    this.subs.add(\r\n      this.subcategoryService.updateAll(this.items).subscribe((response: IResponseApi) => {\r\n        this.messageService.add({ severity: 'success', summary: 'Mensaje', detail: response.message });\r\n        this.currentItem = new CSubcategory\r\n        this.get()\r\n      }, error => {\r\n\r\n        this.messageService.add({ severity: 'error', summary: 'Error', detail: error.error.message });\r\n      })\r\n    )\r\n  }\r\n\r\n  delete(item: CSubcategory) {\r\n    if (item.image) {\r\n      this.general.deleteImage(item.image).then(() => {\r\n        this.currentImage = null\r\n        this.subs.add(\r\n          this.subcategoryService.delete(item._id).subscribe((response: IResponseApi) => {\r\n            this.messageService.add({ severity: 'success', summary: 'Mensaje', detail: response.message });\r\n            this.currentItem = new CSubcategory\r\n            this.get()\r\n          }, error => {\r\n\r\n            this.messageService.add({ severity: 'error', summary: 'Error', detail: error.error.message });\r\n          })\r\n        )\r\n      }).catch(_ => {\r\n        this.messageService.add({ severity: 'error', summary: 'Error', detail: 'Error al eliminar la imagen' });\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n  //IMAGE\r\n\r\n  removeImage(image: CImages) {\r\n    if (image.url) {\r\n      this.deleteImage = image\r\n      this.currentItem.image = ''\r\n    }\r\n    this.currentImage = null\r\n  }\r\n\r\n  onUpload(event: any) {\r\n    event.currentFiles.map((file: any) => {\r\n      const reader: any = new FileReader();\r\n      reader.readAsDataURL(file);\r\n      reader.onload = () => {\r\n        this.currentImage = { file: file, blob: reader.result, url: null }\r\n      };\r\n    })\r\n    this.images = []\r\n  }\r\n\r\n  presave() {\r\n    if (!this.validate()) {\r\n      this.general.isLoad(true)\r\n      if (this.deleteImage) {\r\n        this.general.deleteImage(this.deleteImage.url).then(() => {\r\n          this.currentImage = null\r\n        }).catch(_ => {\r\n          this.messageService.add({ severity: 'error', summary: 'Error', detail: 'Error al eliminar la imagen' });\r\n        })\r\n      }\r\n      if (this.currentImage?.file) {\r\n        this.general.uploadImage(this.currentImage.file, 'subcategories/').subscribe((res: any) => {\r\n          if (typeof res === 'number') {\r\n            this.uploadPercent = res\r\n          } else {\r\n            this.currentImage = { file: null, blob: null, url: res }\r\n            this.currentItem.image = res\r\n            this.add()\r\n          }\r\n        })\r\n      } else {\r\n        this.add()\r\n      }\r\n    }\r\n  }\r\n\r\n  getBlobOrImage(image: CImages) {\r\n    return image.blob || image.url\r\n  }\r\n\r\n}\r\n","<div class=\"p-5\">\r\n    <div class=\"row m-0 justify-content-between align-items-center\">\r\n        <h4>Subcategorías</h4>\r\n        <button class=\"btn2\" (click)=\"addEdit()\">\r\n            <i class=\"pi pi-plus mr-2\"></i>\r\n            Agregar\r\n        </button>\r\n    </div>\r\n    \r\n    <div class=\"mt-5\">\r\n        <p-orderList \r\n        header=\"Lista de subcategorías\"\r\n        filterPlaceholder=\"Buscar por nombre\"\r\n        filterBy=\"name\"\r\n        [value]=\"items\" \r\n        [listStyle]=\"{'max-height':'30rem'}\"\r\n        [dragdrop]=\"true\" \r\n        (onReorder)=\"updateAll()\">\r\n            <ng-template let-item pTemplate=\"item\" class=\"mt-3\">\r\n                <div draggable=\"true\" class=\"item-list row justify-content-between align-items-center m-0 pl-2 pr-2\">\r\n                    <div>\r\n                        <span class=\"font-700\">Nombre :</span><span class=\"ml-3\">{{item.name}}</span>\r\n                    </div>\r\n                    <div>\r\n                        <button (click)=\"addEdit(item)\" class=\"btn2 p-0 pl-3 pr-3\">Editar</button>\r\n                    </div>\r\n                </div>\r\n            </ng-template>\r\n        </p-orderList>\r\n    </div>\r\n</div>\r\n\r\n<p-dialog \r\n    header=\"\" \r\n    [(visible)]=\"displayModal\" \r\n    [modal]=\"true\" \r\n    [styleClass]=\"'modalLogin'\" \r\n    [baseZIndex]=\"10000\"\r\n    [autoZIndex]=\"false\"\r\n    [draggable]=\"false\"\r\n    [resizable]=\"false\">\r\n    \r\n\r\n    <div class=\"col-12 row m-0 justify-content-center\">\r\n        <div class=\"row m-0 p-0 flex-column col-12 col-md-6\">      \r\n            <input type=\"text\" (keyup.enter)=\"add()\" [(ngModel)]=\"currentItem.name\" (keyup)=\"invalid.name=false\" [ngClass]=\"{'invalid': invalid.name}\" [placeholder]=\"'Subcategoría'\"> \r\n            <select class=\"mt-2\" [(ngModel)]=\"currentItem.categoryId\" >\r\n                <option value=\"\">Seleccione una categoría</option>\r\n                <option *ngFor=\"let category of categories\" value=\"{{category._id}}\" >{{category.name}}</option>\r\n            </select>\r\n            <div class=\"mt-2\" [ngClass]=\"{'invalid': invalid.image}\">\r\n                <p-fileUpload \r\n                    styleClass=\"col-12 btn2\"\r\n                    mode=\"basic\" \r\n                    accept=\"image/*\" \r\n                    [fileLimit]=\"1\" \r\n                    [maxFileSize]=\"10000000\"\r\n                    (onSelect)=\"onUpload($event); invalid.image=false\" \r\n                    [chooseLabel]=\"'Subir Ícono'\" \r\n                    uploadLabel=\"Subir\" \r\n                    cancelLabel=\"Cancelar\"\r\n                    [files]=\"images\" \r\n                    [auto]=\"false\" \r\n                    [disabled]=\"currentImage?true:false\"\r\n                    invalidFileSizeMessageDetail=\"El tamaño máximo es {0}.\">\r\n                </p-fileUpload>\r\n                <div [style]=\"{'width': (uploadPercent)+'%'}\" class=\"loading\"></div>\r\n            </div>\r\n            <div *ngIf=\"currentImage\" class=\"row m-0 justify-content-center align-items-center mt-2\">\r\n                <div class=\"image-miniature\" [ngStyle]=\"{'background-image': 'url('+getBlobOrImage(currentImage)+')'}\">\r\n                    <div (click)=\"removeImage(currentImage)\" class=\"delete\">\r\n                        <i class=\"pi pi-trash text-white f-20\"></i>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <button (click)=\"presave()\" class=\"btn1 mt-4\">Guardar</button>            \r\n            <button *ngIf=\"currentItem._id\" (click)=\"confirm($event, currentItem)\" class=\"btn3 bg-color6 pt-2 pb-2 mt-2\">Eliminar</button>    \r\n        </div>\r\n    </div>\r\n\r\n</p-dialog>\r\n\r\n<p-confirmPopup [autoZIndex]=\"false\" [baseZIndex]=\"1000001\"></p-confirmPopup>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { SubcategoryRoutingModule } from './subcategory-routing.module';\r\nimport { SubcategoryComponent } from './subcategory.component';\r\nimport { ConfirmationService } from 'primeng/api';\r\nimport { OrderListModule } from 'primeng/orderlist';\r\nimport { DialogModule } from 'primeng/dialog';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { ToastModule } from 'primeng/toast';\r\nimport { ConfirmPopupModule } from \"primeng/confirmpopup\";\r\nimport { FileUploadModule } from 'primeng/fileupload';\r\n\r\n@NgModule({\r\n  declarations: [SubcategoryComponent],\r\n  imports: [\r\n    CommonModule,\r\n    SubcategoryRoutingModule,\r\n    ConfirmPopupModule,\r\n    OrderListModule,\r\n    DialogModule,\r\n    FormsModule,\r\n    ToastModule, \r\n    FileUploadModule\r\n  ],\r\n  providers: [ConfirmationService]\r\n})\r\nexport class SubcategoryModule { }\r\n"],"names":[],"sourceRoot":"webpack:///"}