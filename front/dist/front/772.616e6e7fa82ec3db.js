"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[772],{8772:(E,d,r)=>{r.r(d),r.d(d,{ViewCompanyModule:()=>B});var s=r(9808),l=r(9812),v=r(5767),c=r(801),e=r(5e3),h=r(1864),u=r(1724),g=r(2542),P=r(319),x=r(9062),y=r(8157),p=r(9783),C=r(5519),m=r(3561),f=r(3725),w=r(3957);const F=["map"];function _(t,a){if(1&t&&(e.TgZ(0,"div",5),e._UZ(1,"div",6),e.TgZ(2,"div",7)(3,"h6",8),e._uU(4),e.qZA(),e.TgZ(5,"p",9),e._uU(6),e.qZA()()()),2&t){const i=a.$implicit,o=e.oxw(2);e.xp6(4),e.Oqu(o.format(i.key)),e.xp6(2),e.Oqu(i.value)}}function b(t,a){if(1&t&&(e.TgZ(0,"div",1)(1,"div"),e.YNc(2,_,7,2,"div",2),e.qZA(),e._UZ(3,"div",3,4),e.qZA()),2&t){const i=e.oxw();e.xp6(2),e.Q6J("ngForOf",i.profileProviderFormat)}}let Z=(()=>{class t{constructor(){this.profileProviderFormat=[]}ngOnInit(){console.log("profileProvider",this.profileProvider),this.formatData()}ngAfterViewInit(){this.initMap()}formatData(){this.profileProvider.comercialName&&(this.profileProviderFormat=[...this.profileProviderFormat,{key:"Nombre comercial",value:this.profileProvider.comercialName}]),this.profileProvider.legalName&&(this.profileProviderFormat=[...this.profileProviderFormat,{key:"Raz\xf3n social",value:this.profileProvider.legalName}]),this.profileProvider.ruc&&(this.profileProviderFormat=[...this.profileProviderFormat,{key:"Ruc",value:this.profileProvider.ruc}]),this.profileProvider.whatsapp&&(this.profileProviderFormat=[...this.profileProviderFormat,{key:"Whatsapp",value:this.profileProvider.whatsapp}]),this.profileProvider.phone&&(this.profileProviderFormat=[...this.profileProviderFormat,{key:"Tel\xe9fono",value:this.profileProvider.phone}]),this.profileProvider.addressText&&(this.profileProviderFormat=[...this.profileProviderFormat,{key:"Direci\xf3n",value:this.profileProvider.addressText}]),this.profileProvider.facebook&&(this.profileProviderFormat=[...this.profileProviderFormat,{key:"Facebook",value:this.profileProvider.facebook}]),this.profileProvider.twitter&&(this.profileProviderFormat=[...this.profileProviderFormat,{key:"Twitter",value:this.profileProvider.twitter}]),this.profileProvider.instagram&&(this.profileProviderFormat=[...this.profileProviderFormat,{key:"Instagram",value:this.profileProvider.instagram}]),this.profileProvider.tiktok&&(this.profileProviderFormat=[...this.profileProviderFormat,{key:"Tiktok",value:this.profileProvider.tiktok}]),this.profileProvider.email&&(this.profileProviderFormat=[...this.profileProviderFormat,{key:"Correo",value:this.profileProvider.email}]),this.profileProvider.distrinctName&&(this.profileProviderFormat=[...this.profileProviderFormat,{key:"Distrito",value:this.profileProvider.distrinctName}]),this.profileProvider.siteWeb&&(this.profileProviderFormat=[...this.profileProviderFormat,{key:"Sitio Web",value:this.profileProvider.siteWeb}])}format(i){return i.replace("-","").replace("-","").replace("-","").replace("-","")}initMap(){const i={lat:this.profileProvider.lat,lng:this.profileProvider.lng},o=new google.maps.Map(this.el.nativeElement,{center:i,zoom:8});new google.maps.Marker({position:i,map:o,title:this.profileProvider.comercialName})}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-information"]],viewQuery:function(i,o){if(1&i&&e.Gf(F,5),2&i){let n;e.iGM(n=e.CRH())&&(o.el=n.first)}},inputs:{profileProvider:"profileProvider"},decls:1,vars:1,consts:[["class","d-flex flex-wrap",4,"ngIf"],[1,"d-flex","flex-wrap"],["class","d-flex mt-2",4,"ngFor","ngForOf"],["id","map",1,"ml-0","ml-md-5","mt-4","mt-md-0"],["map",""],[1,"d-flex","mt-2"],[1,"line","bg-color1"],[1,"d-flex","flex-column","justify-content-center","ml-2"],[1,"text-capitalize","bold"],[1,"text-value"]],template:function(i,o){1&i&&e.YNc(0,b,5,1,"div",0),2&i&&e.Q6J("ngIf",o.profileProviderFormat)},directives:[s.O5,s.sg],styles:[".line[_ngcontent-%COMP%]{min-height:74px;min-width:8px;border:0}#map[_ngcontent-%COMP%]{height:400px;width:400px}"]}),t})();var T=r(3349);function I(t,a){if(1&t){const i=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){return e.CHM(i),e.oxw(2).addfavorites()}),e._uU(1,"Agregar a favoritos"),e.qZA()}}function S(t,a){if(1&t){const i=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(2);return n.confirmDeleteFavorites(n.profileProvider._id)}),e._UZ(1,"fa-icon",12),e.qZA()}if(2&t){const i=e.oxw(2);e.xp6(1),e.Q6J("icon",i.faStar)}}function U(t,a){if(1&t&&(e.TgZ(0,"span",25),e._uU(1),e.qZA()),2&t){const i=e.oxw().$implicit;e.xp6(1),e.Oqu(i.title)}}function V(t,a){if(1&t&&e._UZ(0,"app-product-list",20),2&t){const i=e.oxw().$implicit,o=e.oxw(2);e.Q6J("type",i.title)("profileProviderId",o.profileProvider._id)("items",i.data)("rows",3)}}function N(t,a){if(1&t&&e._UZ(0,"app-information",26),2&t){const i=e.oxw(3);e.Q6J("profileProvider",i.profileProvider)}}function M(t,a){if(1&t&&(e.TgZ(0,"p-tabPanel"),e.YNc(1,U,2,1,"ng-template",22),e.YNc(2,V,1,4,"app-product-list",23),e.YNc(3,N,1,1,"app-information",24),e.qZA()),2&t){const i=a.$implicit;e.xp6(2),e.Q6J("ngIf","Informaci\xf3n"!==i.title),e.xp6(1),e.Q6J("ngIf","Informaci\xf3n"===i.title)}}const O=function(t){return{"background-image":t}};function A(t,a){if(1&t&&(e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h1",6),e._uU(5),e.qZA(),e._UZ(6,"div",7),e.TgZ(7,"p",8),e._uU(8),e.qZA(),e.TgZ(9,"div",9)(10,"div",10)(11,"a",11),e._UZ(12,"fa-icon",12),e.qZA(),e.TgZ(13,"a",13),e.ALo(14,"whatsapp"),e._UZ(15,"fa-icon",14),e.qZA()(),e.YNc(16,I,2,0,"button",15),e.YNc(17,S,2,1,"button",15),e.qZA()()(),e.TgZ(18,"div",16)(19,"p-tabView",17),e.YNc(20,M,4,2,"p-tabPanel",18),e.qZA()()(),e.TgZ(21,"div",3)(22,"h3",19),e._uU(23,"Todos nuestros productos"),e.qZA(),e._UZ(24,"app-product-list",20),e.qZA()()),2&t){const i=e.oxw();e.xp6(5),e.Oqu(i.profileProvider.comercialName),e.xp6(1),e.Q6J("ngStyle",e.VKq(17,O,"url("+i.profileProvider.image+")")),e.xp6(2),e.Oqu(i.profileProvider.description),e.xp6(3),e.MGl("href","tel:",i.profileProvider.phone,"",e.LSH),e.xp6(1),e.Q6J("icon",i.faPhone),e.xp6(1),e.hYB("href","https://wa.me/",e.lcZ(14,15,i.profileProvider.whatsapp),"?text=Hola! ",i.profileProvider.comercialName,"",e.LSH),e.xp6(2),e.Q6J("icon",i.faWhatsapp),e.xp6(1),e.Q6J("ngIf",!i.isFavorite(i.profileProvider._id)),e.xp6(1),e.Q6J("ngIf",i.isFavorite(i.profileProvider._id)),e.xp6(3),e.Q6J("ngForOf",i.tabs),e.xp6(4),e.Q6J("type","Productos")("profileProviderId",i.profileProvider._id)("items",i.products)("rows",9)}}const J=[{path:"",component:(()=>{class t{constructor(i,o,n,j,D,z,R,L,W){this.route=i,this.generalService=o,this.profileProviderService=n,this.authService=j,this.productService=D,this.offersService=z,this.favoriteService=R,this.messageService=L,this.confirmationService=W,this.faWhatsapp=v.VHX,this.faPhone=c.j1w,this.tabs=[],this.faStar=c.Tab,this.companyUrl=this.route.snapshot.paramMap.get("id")}ngOnInit(){this.getUrlData(),this.getFavorites()}getUrlData(){this.profileProviderService.getUrlByUrl(this.companyUrl).subscribe(i=>{this.getProfileProvider(null==i?void 0:i.data[0].profileProviderId)})}getProfileProvider(i){this.profileProviderService.getById(i).subscribe(o=>{this.profileProvider=o.data,this.getProducts()})}getProducts(){this.productService.getByProfileProviderId(this.profileProvider._id).subscribe(i=>{this.products=i.data,this.getOffers()})}getOffers(){this.offersService.getByProfileProviderId(this.profileProvider._id).subscribe(i=>{this.offers=i.data,this.formatTabs()})}formatTabs(){let i=[...this.products.filter(o=>o.isFeatured)];i.length>0&&(this.tabs=[...this.tabs,{title:"Destacados",data:i}]),this.offers.length>0&&(this.tabs=[...this.tabs,{title:"Ofertas",data:this.offers}]),this.tabs=[...this.tabs,{title:"Informaci\xf3n",data:this.profileProvider}]}addfavorites(){this.authService.getRole()||(this.eventHeader={event:"open-login"})}getFavorites(){this.role=this.authService.getRole(),this.role&&this.favoriteService.getByClientId(this.authService.getUserID()).subscribe(i=>{this.favorites=i.data})}isFavorite(i){if(this.favorites){let o=!1;return this.favorites.map(n=>{n.profileProviderId===i&&(o=!0)}),o}}deleteFavorites(i){let o;this.favorites.map(n=>{n.profileProviderId===i&&(o=n._id)}),o&&this.favoriteService.delete(o).subscribe(n=>{this.messageService.add({detail:n.message,summary:"\xc9xito",severity:"success"}),this.getFavorites()},n=>{this.messageService.add({detail:n.error,summary:"Error",severity:"error"})})}confirmDeleteFavorites(i){this.confirmationService.confirm({message:"\xbfSeguro que desea eliminar de favoritos?",acceptLabel:"Si",rejectLabel:"No",header:"Confirmaci\xf3n",accept:()=>{this.deleteFavorites(i)}})}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(l.gz),e.Y36(h.m),e.Y36(u.n),e.Y36(g.e),e.Y36(P.M),e.Y36(x.K),e.Y36(y.e),e.Y36(p.ez),e.Y36(p.YP))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-view-company"]],decls:2,vars:2,consts:[[3,"eventHeader"],["class","container-fluid p-2 p-xl-5",4,"ngIf"],[1,"container-fluid","p-2","p-xl-5"],[1,"row"],[1,"cont","d-flex","justify-content-center"],[1,"container-profile"],[1,"h3","mt-3","mt-xl-0","text-center","text-xl-left"],[1,"image","image-profile",3,"ngStyle"],[1,"mt-2"],[1,"m-0","col-12","p-0","row","justify-content-between","align-items-center"],[1,"row","m-0"],["target","_blank","title","Llamar",1,"link-unstyled","p-0","bg-color2","rounded-circle","icon","d-flex","justify-content-center","align-items-center",3,"href"],[1,"f-13",3,"icon"],["title","Whatsapp",1,"ml-2","p-0","bg-color1","rounded-circle","icon","d-flex","justify-content-center","align-items-center",3,"href"],[1,"f-15","text-white",3,"icon"],["class","cursor pl-2 pr-2 bg-color2 border-0 p-1 rounded-pill f-9 font-500",3,"click",4,"ngIf"],[1,"col-12","col-xl","px-2","px-xl-5","pt-5","pt-xl-0"],["styleClass","tabview-custom"],[4,"ngFor","ngForOf"],[1,"text-center","mt-5","w-100","px-3","text-color1"],[3,"type","profileProviderId","items","rows"],[1,"cursor","pl-2","pr-2","bg-color2","border-0","p-1","rounded-pill","f-9","font-500",3,"click"],["pTemplate","header"],[3,"type","profileProviderId","items","rows",4,"ngIf"],[3,"profileProvider",4,"ngIf"],[1,"text-color1","f-12","font-300"],[3,"profileProvider"]],template:function(i,o){1&i&&(e._UZ(0,"app-header",0),e.YNc(1,A,25,19,"div",1)),2&i&&(e.Q6J("eventHeader",o.eventHeader),e.xp6(1),e.Q6J("ngIf",o.profileProvider))},directives:[C.G,s.O5,s.PC,m.BN,f.xf,s.sg,f.x4,p.jx,w.X,Z],pipes:[T.T],styles:[".image-profile[_ngcontent-%COMP%]{min-width:300px;max-width:300px;min-height:300px;max-height:300px}.icon[_ngcontent-%COMP%]{cursor:pointer;min-width:32px;min-height:32px;max-width:32px;max-height:32px}@media (max-width: 1200px){.cont[_ngcontent-%COMP%]{min-width:100%}}"]}),t})()}];let Y=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[l.Bz.forChild(J)],l.Bz]}),t})();var Q=r(9886),k=r(8078),H=r(8478);let B=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[s.ez,Y,Q.O,k.k,m.uH,f.LU,H.f]]}),t})()}}]);