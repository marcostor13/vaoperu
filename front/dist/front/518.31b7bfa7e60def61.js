"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[518],{6518:(P,p,n)=>{n.r(p),n.d(p,{CategorySubcategoryProfileModule:()=>F});var d=n(9808),f=n(9812);class h{constructor(){this._id=!1,this.name=!1,this.categorySubcategoryId=!1,this.type=!1,this.profileProviderId=!1}}var _=n(801),e=n(5e3),u=n(1926),g=n(9783),o=n(1724),c=n(7858),y=n(7840),S=n(5315),m=n(4182),b=n(3561),C=n(9114);function x(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"div",10)(1,"div")(2,"span",11),e._uU(3,"Negocio :"),e.qZA(),e.TgZ(4,"span",12),e._uU(5),e.qZA()(),e.TgZ(6,"div")(7,"button",13),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw(2).addEdit(l)}),e._uU(8,"Editar"),e.qZA()()()}if(2&r){const t=a.$implicit;e.xp6(5),e.Oqu(t.comercialName)}}const I=function(){return{"max-height":"30rem"}};function T(r,a){if(1&r&&(e.TgZ(0,"div",7)(1,"p-orderList",8),e.YNc(2,x,9,1,"ng-template",9),e.qZA()()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("value",t.profileProviders)("listStyle",e.DdM(3,I))("dragdrop",!0)}}function Z(r,a){if(1&r&&(e.TgZ(0,"option",22),e._uU(1),e.qZA()),2&r){const t=a.$implicit;e.Q6J("value",t.item._id),e.xp6(1),e.Oqu(t.item.name)}}function M(r,a){if(1&r&&(e.TgZ(0,"option",22),e._uU(1),e.qZA()),2&r){const t=a.$implicit;e.Q6J("value",null==t?null:t._id),e.xp6(1),e.Oqu(null==t?null:t.name)}}function A(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"select",23),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw(2).currentSubitemId=s}),e.TgZ(1,"option",17),e._uU(2,"Seleccione el subitem"),e.qZA(),e.YNc(3,M,2,2,"option",18),e.qZA()}if(2&r){const t=e.oxw(2);e.Q6J("ngModel",t.currentSubitemId),e.xp6(3),e.Q6J("ngForOf",t.currentSubitems)}}const E=function(r,a,t,i){return{"bg-color8":r,"bg-color1":a,"bg-color6":t,"bg-color7":i}};function J(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"div",26),e._uU(1),e.TgZ(2,"fa-icon",27),e.NdJ("click",function(s){const v=e.CHM(t).$implicit;return e.oxw(3).confirm(s,v)}),e.qZA()()}if(2&r){const t=a.$implicit,i=e.oxw(3);e.Q6J("ngClass",e.l5B(3,E,"subcategory"===t.type,"category"===t.type,"item"==t.type,"subitem"==t.type)),e.xp6(1),e.hij("",t.name," "),e.xp6(1),e.Q6J("icon",i.faTrash)}}function $(r,a){if(1&r&&(e.TgZ(0,"div",24),e.YNc(1,J,3,8,"div",25),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.currentList)}}function B(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"div",14)(1,"h5",15),e._uU(2),e.qZA(),e.TgZ(3,"select",16),e.NdJ("change",function(s){return e.CHM(t),e.oxw().toogleItems(s)})("ngModelChange",function(s){return e.CHM(t),e.oxw().currentItemSectionId=s}),e.TgZ(4,"option",17),e._uU(5,"Seleccione el item"),e.qZA(),e.YNc(6,Z,2,2,"option",18),e.qZA(),e.YNc(7,A,4,2,"select",19),e.TgZ(8,"button",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().add2()}),e._uU(9,"Agregar"),e.qZA(),e.YNc(10,$,2,1,"div",21),e.qZA()}if(2&r){const t=e.oxw();e.xp6(2),e.Oqu(t.currentProfileProvider.comercialName),e.xp6(1),e.Q6J("ngModel",t.currentItemSectionId),e.xp6(3),e.Q6J("ngForOf",t.items),e.xp6(1),e.Q6J("ngIf",(null==t.currentSubitems?null:t.currentSubitems.length)>0),e.xp6(1),e.Q6J("disabled",!(t.currentItemSectionId&&0===(null==t.currentSubitems?null:t.currentSubitems.length)||t.currentItemSectionId&&t.currentSubitemId)),e.xp6(2),e.Q6J("ngIf",t.currentList)}}const N=[{path:"",component:(()=>{class r{constructor(t,i,s,l,v){this.categorySubcategoryProfileService=t,this.messageService=i,this.confirmationService=s,this.profileProviderService=l,this.sectionService=v,this.currentList=[],this.currentItem={name:"",categorySubcategoryId:"",type:"",profileProviderId:""},this.displayModal=!1,this.invalid=new h,this.currentItemSectionId="",this.currentSubitemId="",this.faTrash=_.$aW}ngOnInit(){this.getProfiles(),this.getSections()}getProfiles(){this.profileProviderService.getAllCompanies().subscribe(t=>{this.profileProviders=t.data},t=>{this.messageService.add({severity:"error",summary:"Error",detail:t.message})})}getCategoriesAndSubcategoriesByProfileProfiderId(t){this.categorySubcategoryProfileService.getByProfileProviderId(t).subscribe(i=>{this.currentList=i.data},i=>{this.messageService.add({severity:"error",summary:"Error",detail:i.message})})}reset(){this.currentList=null}addEdit(t=null){t?(this.currentProfileProvider=t,this.getCategoriesAndSubcategoriesByProfileProfiderId(t._id)):this.reset(),this.displayModal=!0}add2(){var t;if(this.currentItemSectionId&&0===(null===(t=this.currentSubitems)||void 0===t?void 0:t.length)||this.currentItemSectionId&&this.currentSubitemId){const i={profileProviderId:this.currentProfileProvider._id,categorySubcategoryId:this.currentSubitemId?this.currentSubitemId:this.currentItemSectionId,type:this.currentSubitemId?"subitem":"item",name:this.currentSubitemId?this.currentSubitems.find(s=>s._id===this.currentSubitemId).name:this.items.find(s=>s.item._id===this.currentItemSectionId).item.name};this.categorySubcategoryProfileService.save(i).subscribe(s=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:s.message}),this.getCategoriesAndSubcategoriesByProfileProfiderId(this.currentProfileProvider._id),this.reset2()},s=>{this.messageService.add({severity:"error",summary:"Error",detail:s.message})})}else this.messageService.add({severity:"error",summary:"Error",detail:"Debe completar todos los campos"})}reset2(){this.currentItemSectionId="",this.currentSubitemId=""}confirm(t,i){this.confirmationService.confirm({target:t.target,message:"\xbfSeg\xfaro que desea eliminar?",icon:"pi pi-exclamation-triangle",acceptLabel:"S\xed",rejectLabel:"No",accept:()=>{this.delete(i)},reject:()=>{}})}delete(t){this.categorySubcategoryProfileService.delete(t._id).subscribe(i=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:i.message}),this.getCategoriesAndSubcategoriesByProfileProfiderId(t.profileProviderId)},i=>{this.messageService.add({severity:"error",summary:"Error",detail:i.message})})}getSections(){this.sectionService.get().subscribe(t=>{this.sections=t.data,this.items=[].concat.apply([],this.sections.map(i=>i.items))})}toogleItems(t){this.currentSubitems=null;const i=t.target.value;this.currentSubitems=[].concat.apply([],this.items.map(s=>{if(s.item._id===i)return s.subitems})).filter(s=>s)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(u.L),e.Y36(g.ez),e.Y36(g.YP),e.Y36(o.n),e.Y36(c.l))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-category-subcategory-profile"]],decls:9,vars:9,consts:[[1,"p-5"],[1,"row","m-0","justify-content-between","align-items-center"],["class","mt-5",4,"ngIf"],["header","",3,"visible","modal","styleClass","baseZIndex","autoZIndex","draggable","resizable","visibleChange"],[1,"w-100","d-flex","m-0","justify-content-center","pb-5"],["class","row m-0 p-0 flex-column col-12 col-md-6",4,"ngIf"],["header","Confirmaci\xf3n","icon","pi pi-exclamation-triangle"],[1,"mt-5"],["header","Lista de perfiles","filterPlaceholder","Buscar por nombre","filterBy","comercialName",3,"value","listStyle","dragdrop"],["pTemplate","item","class","mt-3"],["draggable","true",1,"item-list","row","justify-content-between","align-items-center","m-0","pl-2","pr-2"],[1,"font-700"],[1,"ml-3"],[1,"btn2","p-0","pl-3","pr-3",3,"click"],[1,"row","m-0","p-0","flex-column","col-12","col-md-6"],[1,"text-center"],[1,"mt-4",3,"ngModel","change","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","mt-2",3,"ngModel","ngModelChange",4,"ngIf"],[1,"btn1","mt-2",3,"disabled","click"],["class","mt-3 d-flex justify-content-center align-items-center flex-wrap border rounded",4,"ngIf"],[3,"value"],[1,"mt-2",3,"ngModel","ngModelChange"],[1,"mt-3","d-flex","justify-content-center","align-items-center","flex-wrap","border","rounded"],["class","m-2 p-2 px-4 rounded",3,"ngClass",4,"ngFor","ngForOf"],[1,"m-2","p-2","px-4","rounded",3,"ngClass"],[1,"f-15","text-color4","cursor",3,"icon","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4"),e._uU(3,"Agregar categor\xedas y/o subcategor\xedas"),e.qZA()(),e.YNc(4,T,3,4,"div",2),e.qZA(),e.TgZ(5,"p-dialog",3),e.NdJ("visibleChange",function(l){return i.displayModal=l}),e.TgZ(6,"div",4),e.YNc(7,B,11,6,"div",5),e.qZA()(),e._UZ(8,"p-confirmDialog",6)),2&t&&(e.xp6(4),e.Q6J("ngIf",i.profileProviders),e.xp6(1),e.Q6J("visible",i.displayModal)("modal",!0)("styleClass","modalLogin")("baseZIndex",1e4)("autoZIndex",!1)("draggable",!1)("resizable",!1),e.xp6(2),e.Q6J("ngIf",i.currentProfileProvider))},directives:[d.O5,y.F,g.jx,S.V,m.EJ,m.JJ,m.On,m.YN,m.Kr,d.sg,d.mk,b.BN,C.Q],styles:[""]}),r})()}];let U=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[f.Bz.forChild(N)],f.Bz]}),r})(),F=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[g.YP],imports:[[d.ez,U,S.S,m.u5,C.D,y.C,b.uH]]}),r})()},1724:(P,p,n)=>{n.d(p,{n:()=>e});var d=n(5e3),f=n(5830),h=n(1864),_=n(2542);let e=(()=>{class u{constructor(o,c,y){this.api=o,this.general=c,this.authService=y,this.model="profile-provider"}save(o){return this.api.api({service:o._id?`update-${this.model}/${o._id}`:`save-${this.model}`,type:o._id?"patch":"post",data:o})}search(o){return this.api.api({service:`search-${this.model}`,type:"post",data:o})}get(){const o={service:`get-${this.model}-by-user-id/${this.authService.getUserID()}`,type:"get",data:null};return this.api.api(o)}getById(o){return this.api.api({service:`get-${this.model}-by-id/${o}`,type:"get",data:null})}getByUserId(o){return this.api.api({service:`get-${this.model}-by-user-id/${o}`,type:"get",data:null})}getAllCompanies(){return this.api.api({service:`get-${this.model}`,type:"get",data:null})}delete(o){return this.api.api({service:`delete-${this.model}/${o}`,type:"delete",data:null})}getUrlByProfileProviderId(o){return this.api.api({service:`get-url-by-profile-provider-id/${o}`,type:"get",data:null})}getByArray(o){return this.api.api({service:`get-${this.model}-by-array`,type:"post",data:{profileProviders:o}})}getUrlByUrl(o){return this.api.api({service:`get-url-by-url/${o}`,type:"get",data:null})}}return u.\u0275fac=function(o){return new(o||u)(d.LFG(f.s),d.LFG(h.m),d.LFG(_.e))},u.\u0275prov=d.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);