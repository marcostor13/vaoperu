"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[149],{149:(b,m,o)=>{o.r(m),o.d(m,{ViewCompanyModule:()=>K});var d=o(9808),p=o(9812),f=o(655),c=o(5767),s=o(801),l=o(5439),e=o(5e3),Z=o(1864),_=o(1724),S=o(2542),M=o(319),I=o(9062),F=o(8157),P=o(9783),A=o(5519),T=o(3561),y=o(3725),U=o(3957),V=o(3349);function Y(i,a){1&i&&e._UZ(0,"img",33)}function J(i,a){1&i&&e._UZ(0,"img",34)}function N(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",35),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).information()}),e._uU(1,"Informaci\xf3n"),e.qZA()}}function O(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return n.confirmDeleteFavorites(n.profileProvider._id)}),e._UZ(1,"fa-icon",37),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("icon",t.faStar)}}function j(i,a){if(1&i&&(e.TgZ(0,"label",38),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij("",t.profileProvider.distance," km")}}function L(i,a){if(1&i&&(e.TgZ(0,"span",43),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.title)}}function B(i,a){if(1&i&&e._UZ(0,"app-product-list",44),2&i){const t=e.oxw().$implicit,r=e.oxw(2);e.Q6J("type",t.title)("profileProviderId",r.profileProvider._id)("items",t.data)("rows",3)}}function E(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"p-tabPanel")(1,"div",39)(2,"button",40),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).allproduct()}),e._uU(3," Ver todos "),e.qZA()(),e.YNc(4,L,2,1,"ng-template",41),e.YNc(5,B,1,4,"app-product-list",42),e.qZA()}if(2&i){const t=a.$implicit;e.xp6(5),e.Q6J("ngIf","Informaci\xf3n"!==t.title)}}const Q=function(i){return{"background-image":i}};function D(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8),e._uU(4),e.qZA(),e.TgZ(5,"div",9),e._UZ(6,"div",10),e.TgZ(7,"div",11)(8,"div",12),e._uU(9),e.qZA(),e.TgZ(10,"div",13),e.YNc(11,Y,1,0,"img",14),e.YNc(12,J,1,0,"img",15),e.TgZ(13,"span",16),e._uU(14),e.qZA()(),e.TgZ(15,"div",17)(16,"a",18),e._UZ(17,"fa-icon",19),e.qZA(),e.TgZ(18,"a",20),e.ALo(19,"whatsapp"),e._UZ(20,"fa-icon",21),e.qZA(),e.TgZ(21,"fa-icon",22),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return n.shared(n.profileProvider.comercialName,n.profileProvider.comercialName)}),e.qZA()(),e.TgZ(22,"div",23),e.YNc(23,N,2,0,"button",24),e.YNc(24,O,2,1,"button",25),e.qZA()()(),e.TgZ(25,"div",26)(26,"div",27),e._uU(27),e.qZA(),e.TgZ(28,"div",28)(29,"label"),e._uU(30),e.qZA(),e.YNc(31,j,2,1,"label",29),e.qZA()()(),e.TgZ(32,"div",30)(33,"p-tabView",31),e.YNc(34,E,6,1,"p-tabPanel",32),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(4),e.Oqu(t.profileProvider.comercialName),e.xp6(2),e.Q6J("ngStyle",e.VKq(21,Q,"url("+t.profileProvider.image+")")),e.xp6(3),e.hij(" ",t.profileProvider.description," "),e.xp6(2),e.Q6J("ngIf",t.aperture(t.profileProvider.openTime,t.profileProvider.closeTime)),e.xp6(1),e.Q6J("ngIf",!t.aperture(t.profileProvider.openTime,t.profileProvider.closeTime)),e.xp6(2),e.AsE("",t.profileProvider.openTime," - ",t.profileProvider.closeTime,""),e.xp6(2),e.MGl("href","tel:",t.profileProvider.phone,"",e.LSH),e.xp6(1),e.Q6J("icon",t.faPhone),e.xp6(1),e.hYB("href","https://wa.me/",e.lcZ(19,19,t.profileProvider.whatsapp),"?text=Hola! ",t.profileProvider.comercialName,"",e.LSH),e.xp6(2),e.Q6J("icon",t.faWhatsapp),e.xp6(1),e.Q6J("icon",t.faShare),e.xp6(2),e.Q6J("ngIf",!t.isFavorite(t.profileProvider._id)),e.xp6(1),e.Q6J("ngIf",t.isFavorite(t.profileProvider._id)),e.xp6(3),e.hij(" ",t.profileProvider.addressText," "),e.xp6(3),e.Oqu(t.profileProvider.distrinctName),e.xp6(1),e.Q6J("ngIf",t.profileProvider.distance),e.xp6(3),e.Q6J("ngForOf",t.tabs)}}const H=[{path:"productos",loadChildren:()=>o.e(68).then(o.bind(o,6068)).then(i=>i.AllProductsModule)},{path:"informacion",loadChildren:()=>o.e(343).then(o.bind(o,8343)).then(i=>i.InformationProductsModule)},{path:"",component:(()=>{class i{constructor(t,r,n,v,h,u,g,x,C,w){this.route=t,this.generalService=r,this.profileProviderService=n,this.authService=v,this.productService=h,this.offersService=u,this.favoriteService=g,this.messageService=x,this.confirmationService=C,this.router=w,this.faWhatsapp=c.VHX,this.faPhone=s.j1w,this.tabs=[],this.faShare=s.zBy,this.faStar=s.Tab,this.faArrowLeft=s.acZ,this.companyUrl=this.route.snapshot.paramMap.get("id")}ngOnInit(){this.getUrlData(),this.getFavorites()}getUrlData(){this.profileProviderService.getUrlByUrl(this.companyUrl).subscribe(t=>{var r;this.getProfileProvider(null===(r=null==t?void 0:t.data[0])||void 0===r?void 0:r.profileProviderId)})}getProfileProvider(t){this.profileProviderService.getById(t).subscribe(r=>{this.profileProvider=r.data,console.log("profileprovider: ",this.profileProvider),this.getCurrentPosition(),this.getProducts()})}getProducts(){this.productService.getByProfileProviderId(this.profileProvider._id).subscribe(t=>{this.products=t.data,this.getOffers()})}getOffers(){this.offersService.getByProfileProviderId(this.profileProvider._id).subscribe(t=>{this.offers=t.data,this.formatTabs()})}formatTabs(){let t=[...this.products.filter(r=>r.isFeatured)];this.products.length>0&&(this.tabs=[...this.tabs,{title:"Productos",data:this.products}]),t.length>0&&(this.tabs=[...this.tabs,{title:"Destacados",data:t}]),this.offers.length>0&&(this.tabs=[...this.tabs,{title:"Ofertas",data:this.offers}])}addfavorites(){this.authService.getRole()||(this.eventHeader={event:"open-login"})}getFavorites(){this.role=this.authService.getRole(),this.role&&this.favoriteService.getByClientId(this.authService.getUserID()).subscribe(t=>{this.favorites=t.data})}isFavorite(t){if(this.favorites){let r=!1;return this.favorites.map(n=>{n.profileProviderId===t&&(r=!0)}),r}}deleteFavorites(t){let r;this.favorites.map(n=>{n.profileProviderId===t&&(r=n._id)}),r&&this.favoriteService.delete(r).subscribe(n=>{this.messageService.add({detail:n.message,summary:"\xc9xito",severity:"success"}),this.getFavorites()},n=>{this.messageService.add({detail:n.error,summary:"Error",severity:"error"})})}confirmDeleteFavorites(t){this.confirmationService.confirm({message:"\xbfSeguro que desea eliminar de favoritos?",acceptLabel:"Si",rejectLabel:"No",header:"Confirmaci\xf3n",accept:()=>{this.deleteFavorites(t)}})}allproduct(){this.router.navigate([this.profileProvider.comercialName.toLowerCase().replace(" ","-")+"/productos"])}information(){this.router.navigate([this.profileProvider.comercialName.toLowerCase().replace(" ","-")+"/informacion"])}aperture(t,r){let n=l().format("YYYY-MM-DD"),v=n+" "+t,h=n+" "+r;return l().isBetween(v,h)}shared(t,r){const n=`https://vaoperu.com/${t}`.replace(" ","-");window.navigator.share({url:n,title:`Vao Per\xfa - ${r}`})}rad(t){return t*Math.PI/180}getKilometros(t,r,n,v){var u=this.rad(n-t),g=this.rad(v-r),x=Math.sin(u/2)*Math.sin(u/2)+Math.cos(this.rad(t))*Math.cos(this.rad(n))*Math.sin(g/2)*Math.sin(g/2);return(2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x))*6378.137).toFixed(1)}getCurrentPosition(){return(0,f.mG)(this,void 0,void 0,function*(){const t=yield this.generalService.getPosition();t&&(this.profileProvider.distance=this.profileProvider.lat&&this.profileProvider.lng?parseFloat(this.getKilometros(this.profileProvider.lat,this.profileProvider.lng,t.lat,t.lng)):1e6)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.gz),e.Y36(Z.m),e.Y36(_.n),e.Y36(S.e),e.Y36(M.M),e.Y36(I.K),e.Y36(F.e),e.Y36(P.ez),e.Y36(P.YP),e.Y36(p.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-view-company"]],decls:6,vars:3,consts:[[3,"eventHeader"],[1,"w-100","mt-2","mb-3","px-3","d-flex","justify-content-start"],["routerLink","/",1,"mt-4","bg-transparent","px-2","f-14","font-500","border-0","d-flex","align-items-center","justify-content-center","rounded-pill","text-color5"],[1,"f-14","icon-search","mr-2","text-color5",3,"icon"],["class","container-fluid mt-4 p-0",4,"ngIf"],[1,"container-fluid","mt-4","p-0"],[1,"row","m-0","p-0","justify-content-center"],[1,"px-3"],[1,"mb-1","f-14","bold","font-600","mt-xl-0"],[1,"d-flex","justify-content-sm-center","container-profile"],[1,"image","image-profile",3,"ngStyle"],[1,"ml-4","my-auto"],[1,"mt-0","f-9"],[1,"d-flex","align-items-center","my-2"],["width","23","src","assets/img/icons/open.svg","alt","Abierto",4,"ngIf"],["width","23","src","assets/img/icons/close.svg","alt","Cerrado",4,"ngIf"],[1,"ml-2","f-9","text-color5","font-500"],[1,"d-flex"],["target","_blank","title","Llamar",1,"link-unstyled","p-1","bg-color2","rounded-circle","icon","d-flex","justify-content-center","align-items-center",3,"href"],[1,"f-10","text-white","fa-rotate-90",3,"icon"],["title","Whatsapp",1,"ml-2","p-1","bg-color1","rounded-circle","icon","d-flex","justify-content-center","align-items-center",3,"href"],[1,"f-12","text-white",3,"icon"],[1,"ml-2","cursor","f-13","text-color2","mr-2",3,"icon","click"],[1,"mt-2","mt-sm-4"],["class","cursor bg-color1 border-0 rounded-lg py-2 px-4 px-sm-5 text-white f-7 font-500",3,"click",4,"ngIf"],["class","cursor pl-2 pr-2 bg-color2 border-0 p-1 rounded-pill f-9 font-500",3,"click",4,"ngIf"],[1,"mt-2","d-flex","col","m-0","p-0","justify-content-between","align-items-center"],[1,"d-flex","justify-content-center","align-items-center"],[1,"row","m-0"],["class","text-color1 m-0 pl-2",4,"ngIf"],[1,"w-100","m-0","p-0","mt-5"],["styleClass","tabview-custom"],[4,"ngFor","ngForOf"],["width","23","src","assets/img/icons/open.svg","alt","Abierto"],["width","23","src","assets/img/icons/close.svg","alt","Cerrado"],[1,"cursor","bg-color1","border-0","rounded-lg","py-2","px-4","px-sm-5","text-white","f-7","font-500",3,"click"],[1,"cursor","pl-2","pr-2","bg-color2","border-0","p-1","rounded-pill","f-9","font-500",3,"click"],[1,"f-13",3,"icon"],[1,"text-color1","m-0","pl-2"],[1,"w-100","px-3","d-flex","justify-content-end","pr-4"],[1,"mt-4","bg-transparent","f-14","border-0","p-0","text-color5",3,"click"],["pTemplate","header","headerStyleClass","w-100"],[3,"type","profileProviderId","items","rows",4,"ngIf"],[1,"f-10","font-500","font-300"],[3,"type","profileProviderId","items","rows"]],template:function(t,r){1&t&&(e._UZ(0,"app-header",0),e.TgZ(1,"div",1)(2,"button",2),e._UZ(3,"fa-icon",3),e._uU(4," Atr\xe1s "),e.qZA()(),e.YNc(5,D,35,23,"div",4)),2&t&&(e.Q6J("eventHeader",r.eventHeader),e.xp6(3),e.Q6J("icon",r.faArrowLeft),e.xp6(2),e.Q6J("ngIf",r.profileProvider))},directives:[A.G,p.rH,T.BN,d.O5,d.PC,y.xf,d.sg,y.x4,P.jx,U.X],pipes:[V.T],styles:[".image-profile[_ngcontent-%COMP%]{min-width:220px;max-width:220px;min-height:220px;max-height:220px}@media (max-width: 520px){.image-profile[_ngcontent-%COMP%]{min-width:150px;max-width:150px;min-height:150px;max-height:150px}}.icon[_ngcontent-%COMP%]{cursor:pointer;min-width:23px;min-height:23px;max-width:23px;max-height:23px}"]}),i})()}];let $=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.Bz.forChild(H)],p.Bz]}),i})();var R=o(9886),W=o(8078),z=o(8478);let K=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.ez,$,R.O,W.k,T.uH,y.LU,z.f]]}),i})()},3349:(b,m,o)=>{o.d(m,{T:()=>p});var d=o(5e3);let p=(()=>{class f{transform(s,...l){return 9===s.length?`51${s}`:12===s.length?s.substring(1):s}}return f.\u0275fac=function(s){return new(s||f)},f.\u0275pipe=d.Yjl({name:"whatsapp",type:f,pure:!0}),f})()},8157:(b,m,o)=>{o.d(m,{e:()=>f});var d=o(5e3),p=o(5830);let f=(()=>{class c{constructor(l){this.api=l,this.model="favorite"}save(l){return this.api.api({service:`save-${this.model}`,type:"post",data:l})}getByClientId(l){return this.api.api({service:`get-${this.model}-by-client-id/${l}`,type:"get",data:null})}delete(l){return this.api.api({service:`delete-${this.model}/${l}`,type:"delete",data:null})}}return c.\u0275fac=function(l){return new(l||c)(d.LFG(p.s))},c.\u0275prov=d.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()}}]);