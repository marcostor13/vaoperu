"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[518],{6518:(T,y,a)=>{a.r(y),a.d(y,{CategorySubcategoryProfileModule:()=>Y});var g=a(9808),m=a(9812);class f{constructor(){this._id=!1,this.name=!1,this.categorySubcategoryId=!1,this.type=!1,this.profileProviderId=!1}}var v=a(801),e=a(5e3),d=a(1926),h=a(1864),i=a(9783),c=a(1724),_=a(7828),Z=a(5964),b=a(7840),C=a(5315),u=a(4182),S=a(3561),P=a(9114);function M(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",10)(1,"div")(2,"span",11),e._uU(3,"Negocio :"),e.qZA(),e.TgZ(4,"span",12),e._uU(5),e.qZA()(),e.TgZ(6,"div")(7,"button",13),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw(2).addEdit(l)}),e._uU(8,"Editar"),e.qZA()()()}if(2&r){const t=s.$implicit;e.xp6(5),e.Oqu(t.comercialName)}}const I=function(){return{"max-height":"30rem"}};function A(r,s){if(1&r&&(e.TgZ(0,"div",7)(1,"p-orderList",8),e.YNc(2,M,9,1,"ng-template",9),e.qZA()()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("value",t.profileProviders)("listStyle",e.DdM(3,I))("dragdrop",!0)}}function E(r,s){if(1&r&&(e.TgZ(0,"option",22),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.Q6J("value",t._id),e.xp6(1),e.Oqu(t.name)}}function J(r,s){if(1&r&&(e.TgZ(0,"option",22),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.Q6J("value",t._id),e.xp6(1),e.Oqu(t.name)}}function B(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"select",23),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw(2).currentSubcategory=n}),e.TgZ(1,"option",17),e._uU(2,"Seleccione la subcategor\xeda"),e.qZA(),e.YNc(3,J,2,2,"option",18),e.qZA()}if(2&r){const t=e.oxw(2);e.Q6J("ngModel",t.currentSubcategory),e.xp6(3),e.Q6J("ngForOf",t.currentSubcategories)}}const $=function(r,s){return{"bg-color8":r,"bg-color1":s}};function U(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",26),e._uU(1),e.TgZ(2,"fa-icon",27),e.NdJ("click",function(n){const p=e.CHM(t).$implicit;return e.oxw(3).confirm(n,p)}),e.qZA()()}if(2&r){const t=s.$implicit,o=e.oxw(3);e.Q6J("ngClass",e.WLB(3,$,"subcategory"===t.type,"category"===t.type)),e.xp6(1),e.hij("",t.name," "),e.xp6(1),e.Q6J("icon",o.faTrash)}}function F(r,s){if(1&r&&(e.TgZ(0,"div",24),e.YNc(1,U,3,6,"div",25),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.currentList)}}function N(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",14)(1,"h5",15),e._uU(2),e.qZA(),e.TgZ(3,"select",16),e.NdJ("change",function(){return e.CHM(t),e.oxw().toogleSubcategories()})("ngModelChange",function(n){return e.CHM(t),e.oxw().currentCategory=n}),e.TgZ(4,"option",17),e._uU(5,"Seleccione la categor\xeda"),e.qZA(),e.YNc(6,E,2,2,"option",18),e.qZA(),e.YNc(7,B,4,2,"select",19),e.TgZ(8,"button",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().add()}),e._uU(9,"Agregar"),e.qZA(),e.YNc(10,F,2,1,"div",21),e.qZA()}if(2&r){const t=e.oxw();e.xp6(2),e.Oqu(t.currentProfileProvider.comercialName),e.xp6(1),e.Q6J("ngModel",t.currentCategory),e.xp6(3),e.Q6J("ngForOf",t.categories),e.xp6(1),e.Q6J("ngIf",(null==t.currentSubcategories?null:t.currentSubcategories.length)>0),e.xp6(1),e.Q6J("disabled",!(t.currentCategory&&0===(null==t.currentSubcategories?null:t.currentSubcategories.length)||t.currentCategory&&t.currentSubcategory)),e.xp6(2),e.Q6J("ngIf",t.currentList)}}const O=[{path:"",component:(()=>{class r{constructor(t,o,n,l,p,x,D){this.categorySubcategoryProfileService=t,this.general=o,this.messageService=n,this.confirmationService=l,this.profileProviderService=p,this.categoryService=x,this.subcategoryService=D,this.currentList=[],this.currentItem={name:"",categorySubcategoryId:"",type:"",profileProviderId:""},this.displayModal=!1,this.invalid=new f,this.currentCategory="",this.currentSubcategory="",this.faTrash=v.$aW}ngOnInit(){this.getProfiles(),this.getCategories(),this.getSubcategories()}getProfiles(){this.profileProviderService.getAllCompanies().subscribe(t=>{this.profileProviders=t.data},t=>{this.messageService.add({severity:"error",summary:"Error",detail:t.message})})}getCategories(){this.categoryService.get().subscribe(t=>{this.categories=t.data},t=>{this.messageService.add({severity:"error",summary:"Error",detail:t.message})})}getSubcategories(){this.subcategoryService.get().subscribe(t=>{this.subcategories=t.data},t=>{this.messageService.add({severity:"error",summary:"Error",detail:t.message})})}getCategoriesAndSubcategoriesByProfileProfiderId(t){this.categorySubcategoryProfileService.getByProfileProviderId(t).subscribe(o=>{this.currentList=o.data},o=>{this.messageService.add({severity:"error",summary:"Error",detail:o.message})})}reset(){this.currentList=null}addEdit(t=null){t?(this.currentProfileProvider=t,this.getCategoriesAndSubcategoriesByProfileProfiderId(t._id)):this.reset(),this.displayModal=!0}toogleSubcategories(){this.currentSubcategories=null,this.currentCategory&&(this.currentSubcategories=this.subcategories.filter(t=>t.categoryId===this.currentCategory))}add(){if(this.currentCategory&&0===this.currentSubcategories.length||this.currentCategory&&this.currentSubcategory){const t={profileProviderId:this.currentProfileProvider._id,categorySubcategoryId:this.currentSubcategory?this.currentSubcategory:this.currentCategory,type:this.currentSubcategory?"subcategory":"category",name:this.currentSubcategory?this.subcategories.filter(o=>o._id===this.currentSubcategory)[0].name:this.categories.filter(o=>o._id===this.currentCategory)[0].name};this.categorySubcategoryProfileService.save(t).subscribe(o=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:o.message}),this.getCategoriesAndSubcategoriesByProfileProfiderId(this.currentProfileProvider._id)},o=>{this.messageService.add({severity:"error",summary:"Error",detail:o.message})})}else this.messageService.add({severity:"error",summary:"Error",detail:"Debe completar todos los campos"})}confirm(t,o){this.confirmationService.confirm({target:t.target,message:"\xbfSeg\xfaro que desea eliminar?",icon:"pi pi-exclamation-triangle",acceptLabel:"S\xed",rejectLabel:"No",accept:()=>{this.delete(o)},reject:()=>{}})}delete(t){this.categorySubcategoryProfileService.delete(t._id).subscribe(o=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:o.message}),this.getCategoriesAndSubcategoriesByProfileProfiderId(t.profileProviderId)},o=>{this.messageService.add({severity:"error",summary:"Error",detail:o.message})})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(d.L),e.Y36(h.m),e.Y36(i.ez),e.Y36(i.YP),e.Y36(c.n),e.Y36(_.H),e.Y36(Z.K))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-category-subcategory-profile"]],decls:9,vars:9,consts:[[1,"p-5"],[1,"row","m-0","justify-content-between","align-items-center"],["class","mt-5",4,"ngIf"],["header","",3,"visible","modal","styleClass","baseZIndex","autoZIndex","draggable","resizable","visibleChange"],[1,"col-12","row","m-0","justify-content-center"],["class","row m-0 p-0 flex-column col-12 col-md-6",4,"ngIf"],["header","Confirmaci\xf3n","icon","pi pi-exclamation-triangle"],[1,"mt-5"],["header","Lista de perfiles","filterPlaceholder","Buscar por nombre","filterBy","name",3,"value","listStyle","dragdrop"],["pTemplate","item","class","mt-3"],["draggable","true",1,"item-list","row","justify-content-between","align-items-center","m-0","pl-2","pr-2"],[1,"font-700"],[1,"ml-3"],[1,"btn2","p-0","pl-3","pr-3",3,"click"],[1,"row","m-0","p-0","flex-column","col-12","col-md-6"],[1,"text-center"],[1,"mt-4",3,"ngModel","change","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","mt-2",3,"ngModel","ngModelChange",4,"ngIf"],[1,"btn1","mt-2",3,"disabled","click"],["class","mt-3 d-flex justify-content-center align-items-center flex-wrap border rounded",4,"ngIf"],[3,"value"],[1,"mt-2",3,"ngModel","ngModelChange"],[1,"mt-3","d-flex","justify-content-center","align-items-center","flex-wrap","border","rounded"],["class","m-2 p-2 px-4 rounded",3,"ngClass",4,"ngFor","ngForOf"],[1,"m-2","p-2","px-4","rounded",3,"ngClass"],[1,"f-15","text-color4","cursor",3,"icon","click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4"),e._uU(3,"Agregar categor\xedas y/o subcategor\xedas"),e.qZA()(),e.YNc(4,A,3,4,"div",2),e.qZA(),e.TgZ(5,"p-dialog",3),e.NdJ("visibleChange",function(l){return o.displayModal=l}),e.TgZ(6,"div",4),e.YNc(7,N,11,6,"div",5),e.qZA()(),e._UZ(8,"p-confirmDialog",6)),2&t&&(e.xp6(4),e.Q6J("ngIf",o.profileProviders),e.xp6(1),e.Q6J("visible",o.displayModal)("modal",!0)("styleClass","modalLogin")("baseZIndex",1e4)("autoZIndex",!1)("draggable",!1)("resizable",!1),e.xp6(2),e.Q6J("ngIf",o.currentProfileProvider))},directives:[g.O5,b.F,i.jx,C.V,u.EJ,u.JJ,u.On,u.YN,u.Kr,g.sg,g.mk,S.BN,P.Q],styles:[""]}),r})()}];let L=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[m.Bz.forChild(O)],m.Bz]}),r})(),Y=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[i.YP],imports:[[g.ez,L,C.S,u.u5,P.D,b.C,S.uH]]}),r})()},1724:(T,y,a)=>{a.d(y,{n:()=>e});var g=a(5e3),m=a(5830),f=a(1864),v=a(2542);let e=(()=>{class d{constructor(i,c,_){this.api=i,this.general=c,this.authService=_,this.model="profile-provider"}save(i){return this.api.api({service:i._id?`update-${this.model}/${i._id}`:`save-${this.model}`,type:i._id?"patch":"post",data:i})}get(){const i={service:`get-${this.model}-by-user-id/${this.authService.getUserID()}`,type:"get",data:null};return this.api.api(i)}getById(i){return this.api.api({service:`get-${this.model}-by-id/${i}`,type:"get",data:null})}getByUserId(i){return this.api.api({service:`get-${this.model}-by-user-id/${i}`,type:"get",data:null})}getAllCompanies(){return this.api.api({service:`get-${this.model}`,type:"get",data:null})}delete(i){return this.api.api({service:`delete-${this.model}/${i}`,type:"delete",data:null})}getUrlByProfileProviderId(i){return this.api.api({service:`get-url-by-profile-provider-id/${i}`,type:"get",data:null})}getByArray(i){return this.api.api({service:`get-${this.model}-by-array`,type:"post",data:{profileProviders:i}})}getUrlByUrl(i){return this.api.api({service:`get-url-by-url/${i}`,type:"get",data:null})}}return d.\u0275fac=function(i){return new(i||d)(g.LFG(m.s),g.LFG(f.m),g.LFG(v.e))},d.\u0275prov=g.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()}}]);