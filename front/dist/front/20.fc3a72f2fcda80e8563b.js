(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{jZuT:function(e,t,r){"use strict";r.r(t),r.d(t,"CategorySubcategoryProfileModule",function(){return A});var i=r("ofXK"),c=r("tyNb"),s=r("FQVY"),o=r("sUgg");class a{constructor(){this._id=!1,this.name=!1,this.categorySubcategoryId=!1,this.type=!1,this.profileProviderId=!1}}var n=r("zhhV"),l=r("2K/p"),g=r("wDSy"),d=r("wHSu"),u=r("fXoL"),b=r("7zfz"),f=r("/RsI"),h=r("Nf9I"),m=r("cQJI"),p=r("3Pt+"),y=r("6NWb");function v(e,t){if(1&e){const e=u.Vb();u.Ub(0,"div",10),u.Ub(1,"div"),u.Ub(2,"span",11),u.Ic(3,"Negocio :"),u.Tb(),u.Ub(4,"span",12),u.Ic(5),u.Tb(),u.Tb(),u.Ub(6,"div"),u.Ub(7,"button",13),u.bc("click",function(){u.Ac(e);const r=t.$implicit;return u.ec(2).addEdit(r)}),u.Ic(8,"Editar"),u.Tb(),u.Tb(),u.Tb()}if(2&e){const e=t.$implicit;u.Cb(5),u.Jc(e.comercialName)}}const S=function(){return{"max-height":"30rem"}};function C(e,t){if(1&e&&(u.Ub(0,"div",7),u.Ub(1,"p-orderList",8),u.Gc(2,v,9,1,"ng-template",9),u.Tb(),u.Tb()),2&e){const e=u.ec();u.Cb(1),u.kc("value",e.profileProviders)("listStyle",u.oc(3,S))("dragdrop",!0)}}function I(e,t){if(1&e&&(u.Ub(0,"option",22),u.Ic(1),u.Tb()),2&e){const e=t.$implicit;u.kc("value",e._id),u.Cb(1),u.Jc(e.name)}}function P(e,t){if(1&e&&(u.Ub(0,"option",22),u.Ic(1),u.Tb()),2&e){const e=t.$implicit;u.kc("value",e._id),u.Cb(1),u.Jc(e.name)}}function T(e,t){if(1&e){const e=u.Vb();u.Ub(0,"select",23),u.bc("ngModelChange",function(t){return u.Ac(e),u.ec(2).currentSubcategory=t}),u.Ub(1,"option",17),u.Ic(2,"Seleccione la subcategor\xeda"),u.Tb(),u.Gc(3,P,2,2,"option",18),u.Tb()}if(2&e){const e=u.ec(2);u.kc("ngModel",e.currentSubcategory),u.Cb(3),u.kc("ngForOf",e.currentSubcategories)}}const U=function(e,t){return{"bg-color8":e,"bg-color1":t}};function k(e,t){if(1&e){const e=u.Vb();u.Ub(0,"div",26),u.Ic(1),u.Ub(2,"fa-icon",27),u.bc("click",function(r){u.Ac(e);const i=t.$implicit;return u.ec(3).confirm(r,i)}),u.Tb(),u.Tb()}if(2&e){const e=t.$implicit,r=u.ec(3);u.kc("ngClass",u.qc(3,U,"subcategory"===e.type,"category"===e.type)),u.Cb(1),u.Kc("",e.name," "),u.Cb(1),u.kc("icon",r.faTrash)}}function w(e,t){if(1&e&&(u.Ub(0,"div",24),u.Gc(1,k,3,6,"div",25),u.Tb()),2&e){const e=u.ec(2);u.Cb(1),u.kc("ngForOf",e.currentList)}}function x(e,t){if(1&e){const e=u.Vb();u.Ub(0,"div",14),u.Ub(1,"h5",15),u.Ic(2),u.Tb(),u.Ub(3,"select",16),u.bc("change",function(){return u.Ac(e),u.ec().toogleSubcategories()})("ngModelChange",function(t){return u.Ac(e),u.ec().currentCategory=t}),u.Ub(4,"option",17),u.Ic(5,"Seleccione la categor\xeda"),u.Tb(),u.Gc(6,I,2,2,"option",18),u.Tb(),u.Gc(7,T,4,2,"select",19),u.Ub(8,"button",20),u.bc("click",function(){return u.Ac(e),u.ec().add()}),u.Ic(9,"Agregar"),u.Tb(),u.Gc(10,w,2,1,"div",21),u.Tb()}if(2&e){const e=u.ec();u.Cb(2),u.Jc(e.currentProfileProvider.comercialName),u.Cb(1),u.kc("ngModel",e.currentCategory),u.Cb(3),u.kc("ngForOf",e.categories),u.Cb(1),u.kc("ngIf",(null==e.currentSubcategories?null:e.currentSubcategories.length)>0),u.Cb(1),u.kc("disabled",!(e.currentCategory&&0===(null==e.currentSubcategories?null:e.currentSubcategories.length)||e.currentCategory&&e.currentSubcategory)),u.Cb(2),u.kc("ngIf",e.currentList)}}const M=[{path:"",component:(()=>{class e{constructor(e,t,r,i,c,s,o){this.categorySubcategoryProfileService=e,this.general=t,this.messageService=r,this.confirmationService=i,this.profileProviderService=c,this.categoryService=s,this.subcategoryService=o,this.currentList=[],this.currentItem={name:"",categorySubcategoryId:"",type:"",profileProviderId:""},this.displayModal=!1,this.invalid=new a,this.currentCategory="",this.currentSubcategory="",this.faTrash=d.i}ngOnInit(){this.getProfiles(),this.getCategories(),this.getSubcategories()}getProfiles(){this.profileProviderService.getAllCompanies().subscribe(e=>{this.general.c("getProfiles",e),this.profileProviders=e.data},e=>{this.messageService.add({severity:"error",summary:"Error",detail:e.message})})}getCategories(){this.categoryService.get().subscribe(e=>{this.general.c("getCategories",e),this.categories=e.data},e=>{this.messageService.add({severity:"error",summary:"Error",detail:e.message})})}getSubcategories(){this.subcategoryService.get().subscribe(e=>{this.general.c("getSubcategories",e),this.subcategories=e.data},e=>{this.messageService.add({severity:"error",summary:"Error",detail:e.message})})}getCategoriesAndSubcategoriesByProfileProfiderId(e){this.categorySubcategoryProfileService.getByProfileProviderId(e).subscribe(e=>{this.general.c("getCategoriesAndSubcategoriesByProfileProfiderId",e.data),this.currentList=e.data},e=>{this.messageService.add({severity:"error",summary:"Error",detail:e.message})})}reset(){this.currentList=null}addEdit(e=null){this.general.c("ITem",e),e?(this.currentProfileProvider=e,this.getCategoriesAndSubcategoriesByProfileProfiderId(e._id)):this.reset(),this.displayModal=!0}toogleSubcategories(){this.currentSubcategories=null,this.currentCategory&&(this.currentSubcategories=this.subcategories.filter(e=>e.categoryId===this.currentCategory))}add(){if(this.currentCategory&&0===this.currentSubcategories.length||this.currentCategory&&this.currentSubcategory){const e={profileProviderId:this.currentProfileProvider._id,categorySubcategoryId:this.currentSubcategory?this.currentSubcategory:this.currentCategory,type:this.currentSubcategory?"subcategory":"category",name:this.currentSubcategory?this.subcategories.filter(e=>e._id===this.currentSubcategory)[0].name:this.categories.filter(e=>e._id===this.currentCategory)[0].name};this.categorySubcategoryProfileService.save(e).subscribe(e=>{this.general.c("add",e.data),this.messageService.add({severity:"success",summary:"\xc9xito",detail:e.message}),this.getCategoriesAndSubcategoriesByProfileProfiderId(this.currentProfileProvider._id)},e=>{this.messageService.add({severity:"error",summary:"Error",detail:e.message})})}else this.messageService.add({severity:"error",summary:"Error",detail:"Debe completar todos los campos"})}confirm(e,t){this.confirmationService.confirm({target:e.target,message:"\xbfSeg\xfaro que desea eliminar?",icon:"pi pi-exclamation-triangle",acceptLabel:"S\xed",rejectLabel:"No",accept:()=>{this.delete(t)},reject:()=>{}})}delete(e){this.categorySubcategoryProfileService.delete(e._id).subscribe(t=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:t.message}),this.getCategoriesAndSubcategoriesByProfileProfiderId(e.profileProviderId)},e=>{this.messageService.add({severity:"error",summary:"Error",detail:e.message})})}}return e.\u0275fac=function(t){return new(t||e)(u.Ob(o.a),u.Ob(s.a),u.Ob(b.f),u.Ob(b.b),u.Ob(n.a),u.Ob(l.a),u.Ob(g.a))},e.\u0275cmp=u.Ib({type:e,selectors:[["app-category-subcategory-profile"]],decls:9,vars:9,consts:[[1,"p-5"],[1,"row","m-0","justify-content-between","align-items-center"],["class","mt-5",4,"ngIf"],["header","",3,"visible","modal","styleClass","baseZIndex","autoZIndex","draggable","resizable","visibleChange"],[1,"col-12","row","m-0","justify-content-center"],["class","row m-0 p-0 flex-column col-12 col-md-6",4,"ngIf"],["header","Confirmaci\xf3n","icon","pi pi-exclamation-triangle"],[1,"mt-5"],["header","Lista de perfiles","filterPlaceholder","Buscar por nombre","filterBy","name",3,"value","listStyle","dragdrop"],["pTemplate","item","class","mt-3"],["draggable","true",1,"item-list","row","justify-content-between","align-items-center","m-0","pl-2","pr-2"],[1,"font-700"],[1,"ml-3"],[1,"btn2","p-0","pl-3","pr-3",3,"click"],[1,"row","m-0","p-0","flex-column","col-12","col-md-6"],[1,"text-center"],[1,"mt-4",3,"ngModel","change","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","mt-2",3,"ngModel","ngModelChange",4,"ngIf"],[1,"btn1","mt-2",3,"disabled","click"],["class","mt-3 d-flex justify-content-center align-items-center flex-wrap border rounded",4,"ngIf"],[3,"value"],[1,"mt-2",3,"ngModel","ngModelChange"],[1,"mt-3","d-flex","justify-content-center","align-items-center","flex-wrap","border","rounded"],["class","m-2 p-2 px-4 rounded",3,"ngClass",4,"ngFor","ngForOf"],[1,"m-2","p-2","px-4","rounded",3,"ngClass"],[1,"f-15","text-color4","cursor",3,"icon","click"]],template:function(e,t){1&e&&(u.Ub(0,"div",0),u.Ub(1,"div",1),u.Ub(2,"h4"),u.Ic(3,"Agregar categor\xedas y/o subcategor\xedas"),u.Tb(),u.Tb(),u.Gc(4,C,3,4,"div",2),u.Tb(),u.Ub(5,"p-dialog",3),u.bc("visibleChange",function(e){return t.displayModal=e}),u.Ub(6,"div",4),u.Gc(7,x,11,6,"div",5),u.Tb(),u.Tb(),u.Pb(8,"p-confirmDialog",6)),2&e&&(u.Cb(4),u.kc("ngIf",t.profileProviders),u.Cb(1),u.kc("visible",t.displayModal)("modal",!0)("styleClass","modalLogin")("baseZIndex",1e4)("autoZIndex",!1)("draggable",!1)("resizable",!1),u.Cb(2),u.kc("ngIf",t.currentProfileProvider))},directives:[i.k,f.a,h.a,m.a,b.h,p.h,p.d,p.e,p.f,p.i,i.j,i.i,y.a],styles:[""]}),e})()}];let $=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.Mb({type:e}),e.\u0275inj=u.Lb({imports:[[c.f.forChild(M)],c.f]}),e})(),A=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.Mb({type:e}),e.\u0275inj=u.Lb({providers:[b.b],imports:[[i.c,$,f.b,p.b,h.b,m.b,y.b]]}),e})()},zhhV:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var i=r("H+bZ"),c=r("FQVY"),s=r("/JoM"),o=r("fXoL");let a=(()=>{class e{constructor(e,t,r){this.api=e,this.general=t,this.authService=r,this.model="profile-provider"}save(e){return this.general.c("SAVE ELEMEENT",e.userid),this.api.api({service:e._id?`update-${this.model}/${e._id}`:`save-${this.model}`,type:e._id?"patch":"post",data:e})}get(){const e={service:`get-${this.model}-by-userid/${this.authService.getUserID()}`,type:"get",data:null};return this.api.api(e)}getById(e){return this.api.api({service:`get-${this.model}-by-id/${e}`,type:"get",data:null})}getAllCompanies(){return this.api.api({service:`get-${this.model}`,type:"get",data:null})}delete(e){return this.api.api({service:`delete-${this.model}/${e}`,type:"delete",data:null})}getUrlByProfileProviderId(e){return this.api.api({service:`get-url-by-profile-provider-id/${e}`,type:"get",data:null})}getByArray(e){return this.api.api({service:`get-${this.model}-by-array`,type:"post",data:{profileProviders:e}})}getUrlByUrl(e){return this.api.api({service:`get-url-by-url/${e}`,type:"get",data:null})}}return e.\u0275fac=function(t){return new(t||e)(o.Yb(i.a),o.Yb(c.a),o.Yb(s.a))},e.\u0275prov=o.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);