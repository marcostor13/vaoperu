(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{xivt:function(e,i,r){"use strict";r.r(i),r.d(i,"ProfileProviderModule",function(){return D});var t=r("ofXK"),n=r("tyNb"),o=r("FQVY"),a=r("33Jv"),l=r("zhhV");class d{constructor(){this.userid="",this.legalName="",this.comercialName="",this.whatsapp="",this.phone="",this.addressText="",this.addressMaps="",this.ruc="",this.description="",this.image="",this.video="",this.facebook="",this.twitter="",this.instagram="",this.tiktok="",this.email="",this.districtId="",this.distrinctName="",this.lat=null,this.lng=null,this.siteWeb="",this.delivery=!1,this.onMarket=!1,this.enabledProducts=!1,this.enabledProductsFeatured=!1,this.enabledOffers=!1,this.createAt=null}}var s=r("/JoM"),c=r("Ebga"),b=r("fXoL"),g=r("7zfz"),p=r("yGOr"),u=r("vr5I"),m=r("rLzU"),h=r("3Pt+"),v=r("NCSE");const f=["map"],S=function(e){return{"background-image":e}},P=function(e){return{width:e}};function T(e,i){if(1&e){const e=b.Ub();b.Tb(0,"div"),b.Tb(1,"div",23),b.Tb(2,"div",24),b.ac("click",function(){b.vc(e);const i=b.dc();return i.removeImage(i.currentImage)}),b.Ob(3,"i",25),b.Sb(),b.Sb(),b.Tb(4,"div",26),b.Tb(5,"p-fileUpload",27),b.ac("onSelect",function(i){return b.vc(e),b.dc().onUpload(i)}),b.Sb(),b.Ob(6,"div",28),b.Sb(),b.Sb()}if(2&e){const e=b.dc();b.Bb(1),b.ic("ngStyle",b.lc(7,S,"url("+e.getBlobOrImage(e.currentImage)+")")),b.Bb(4),b.ic("chooseLabel","Subir Imagen")("files",e.images)("auto",!1)("disabled",e.currentImage),b.Bb(1),b.zc(b.lc(9,P,e.uploadPercent+"%"))}}function M(e,i){if(1&e&&(b.Tb(0,"option",29),b.Dc(1),b.Sb()),2&e){const e=i.$implicit;b.jc("value",e._id),b.Bb(1),b.Ec(e.name)}}const x=[{path:"",component:(()=>{class e{constructor(e,i,r,t,n){this.profileProvideService=e,this.general=i,this.messageService=r,this.authService=t,this.districtService=n,this.subs=new a.a,this.profileProvider=new d,this.images=[]}ngOnInit(){this.getProfileProvider(),this.getDistricts()}ngOnDestroy(){this.subs.unsubscribe()}getProfileProvider(){this.subs.add(this.profileProvideService.get().subscribe(e=>{e.data&&(this.profileProvider=e.data,this.profileProvider.image&&(this.currentImage={file:null,blob:null,url:this.profileProvider.image})),this.general.isLoad(!1)},e=>{this.general.isLoad(!1),this.messageService.add({severity:"error",summary:"Error",detail:e.error.message})}))}getDistricts(){this.subs.add(this.districtService.get().subscribe(e=>{this.districts=e.data},e=>{this.messageService.add({severity:"error",summary:"Error",detail:e.error.message})}))}removeImage(e){e.url&&(this.deleteImage=e,this.profileProvider.image=""),this.currentImage=null}onUpload(e){e.currentFiles.map(e=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>{this.currentImage={file:e,blob:i.result,url:null}}}),this.images=[]}presave(){var e;this.general.isLoad(!0),this.profileProvider.userid=this.authService.getUserID(),this.deleteImage&&this.general.deleteImage(this.deleteImage.url).then(()=>{this.currentImage=null}).catch(e=>{this.messageService.add({severity:"error",summary:"Error",detail:"Error al eliminar la imagen"})}),(null===(e=this.currentImage)||void 0===e?void 0:e.file)?this.general.uploadImage(this.currentImage.file,"profile/").subscribe(e=>{"number"==typeof e?this.uploadPercent=e:(this.profileProvider.image=e,this.save())}):this.save()}save(){this.general.c("SAVE PRE",this.profileProvider),this.profileProvider.distrinctName=this.general.getItemByID(this.districts,this.profileProvider.districtId).name,this.subs.add(this.profileProvideService.save(this.profileProvider).subscribe(e=>{this.general.c("Save Profile Provider",e),this.general.isLoad(!1),this.messageService.add({severity:"success",summary:"Mensaje",detail:e.message}),this.getProfileProvider(),this.uploadPercent=0},e=>{this.general.isLoad(!1),this.messageService.add({severity:"error",summary:"Error",detail:e.error.message})}))}getBlobOrImage(e){return e.blob||e.url}setUbication(){this.profileProvider.addressMaps?new google.maps.places.PlacesService(new google.maps.Map(this.el.nativeElement,{center:new google.maps.LatLng(-12.0202343,-77.0502994),zoom:15})).findPlaceFromQuery({query:this.profileProvider.addressMaps,fields:["geometry"]},(e,i)=>{e&&e[0]?(this.profileProvider.lat=e[0].geometry.location.lat(),this.profileProvider.lng=e[0].geometry.location.lng(),this.presave()):this.messageService.add({severity:"error",summary:"Error",detail:"No se pudo obtener la ubicaci\xf3n revise la direcci\xf3n"})}):this.presave()}}return e.\u0275fac=function(i){return new(i||e)(b.Nb(l.a),b.Nb(o.a),b.Nb(g.e),b.Nb(s.a),b.Nb(c.a))},e.\u0275cmp=b.Hb({type:e,selectors:[["app-profile-provider"]],viewQuery:function(e,i){if(1&e&&b.Hc(f,1),2&e){let e;b.sc(e=b.bc())&&(i.el=e.first)}},decls:101,vars:22,consts:[[1,"row","m-0"],[1,"d-none","d-md-flex"],[1,"flex-1"],[1,"p-5"],[1,"line","mt-3"],[1,"mt-5","row","m-0"],[1,"col-md-6","col-12","p-0"],[4,"ngIf"],[1,"col-md-6","col-12","p-0","pl-0","pl-md-5"],[1,"row","align-items-center","m-0","mt-3","mt-md-0"],[3,"ngModel","ngModelChange"],[1,"ml-4","f-13","font-600"],[1,"line"],[1,"mt-5","col-md-6","col-12","p-0"],[1,"col-12","p-0","mt-2"],["type","text",3,"ngModel","ngModelChange"],["type","number",3,"ngModel","ngModelChange"],["type","email",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"btn1","mt-4",3,"click"],["id","map"],["map",""],[1,"image-miniature",3,"ngStyle"],[1,"delete",3,"click"],[1,"pi","pi-trash","text-white","f-20"],[1,"mt-3","btn-upload"],["styleClass","btn2 tran w-100","mode","basic","accept","image/*","fileLimit","1","maxFileSize","10000000","uploadLabel","Subir","cancelLabel","Cancelar","invalidFileSizeMessageDetail","El tama\xf1o m\xe1ximo es {0}.",3,"chooseLabel","files","auto","disabled","onSelect"],[1,"loading"],[3,"value"]],template:function(e,i){1&e&&(b.Tb(0,"div",0),b.Ob(1,"app-menu-provider",1),b.Tb(2,"div",2),b.Ob(3,"app-header-provider"),b.Tb(4,"div",3),b.Tb(5,"h4"),b.Dc(6,"Perfil"),b.Sb(),b.Ob(7,"hr",4),b.Tb(8,"div",5),b.Tb(9,"div",6),b.Bc(10,T,7,11,"div",7),b.Sb(),b.Tb(11,"div",8),b.Tb(12,"div",9),b.Tb(13,"p-inputSwitch",10),b.ac("ngModelChange",function(e){return i.profileProvider.delivery=e}),b.Sb(),b.Tb(14,"label",11),b.Dc(15,"Delivery"),b.Sb(),b.Sb(),b.Tb(16,"div",9),b.Tb(17,"p-inputSwitch",10),b.ac("ngModelChange",function(e){return i.profileProvider.onMarket=e}),b.Sb(),b.Tb(18,"label",11),b.Dc(19,"Recojo en tienda"),b.Sb(),b.Sb(),b.Ob(20,"hr",12),b.Tb(21,"div",9),b.Tb(22,"p-inputSwitch",10),b.ac("ngModelChange",function(e){return i.profileProvider.enabledProducts=e}),b.Sb(),b.Tb(23,"label",11),b.Dc(24,"Productos"),b.Sb(),b.Sb(),b.Tb(25,"div",9),b.Tb(26,"p-inputSwitch",10),b.ac("ngModelChange",function(e){return i.profileProvider.enabledProductsFeatured=e}),b.Sb(),b.Tb(27,"label",11),b.Dc(28,"Productos Destacados"),b.Sb(),b.Sb(),b.Tb(29,"div",9),b.Tb(30,"p-inputSwitch",10),b.ac("ngModelChange",function(e){return i.profileProvider.enabledOffers=e}),b.Sb(),b.Tb(31,"label",11),b.Dc(32,"Offertas"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(33,"div",13),b.Tb(34,"div"),b.Tb(35,"label",14),b.Dc(36,"Nombre Comercial"),b.Sb(),b.Tb(37,"input",15),b.ac("ngModelChange",function(e){return i.profileProvider.comercialName=e}),b.Sb(),b.Sb(),b.Tb(38,"div"),b.Tb(39,"label",14),b.Dc(40,"Raz\xf3n social"),b.Sb(),b.Tb(41,"input",15),b.ac("ngModelChange",function(e){return i.profileProvider.legalName=e}),b.Sb(),b.Sb(),b.Tb(42,"div"),b.Tb(43,"label",14),b.Dc(44,"RUC"),b.Sb(),b.Tb(45,"input",15),b.ac("ngModelChange",function(e){return i.profileProvider.ruc=e}),b.Sb(),b.Sb(),b.Tb(46,"div"),b.Tb(47,"label",14),b.Dc(48,"Descripci\xf3n"),b.Sb(),b.Tb(49,"input",15),b.ac("ngModelChange",function(e){return i.profileProvider.description=e}),b.Sb(),b.Sb(),b.Tb(50,"div"),b.Tb(51,"label",14),b.Dc(52,"Whatsapp (Ejem: 987654321)"),b.Sb(),b.Tb(53,"input",16),b.ac("ngModelChange",function(e){return i.profileProvider.whatsapp=e}),b.Sb(),b.Sb(),b.Tb(54,"div"),b.Tb(55,"label",14),b.Dc(56,"Tel\xe9fono"),b.Sb(),b.Tb(57,"input",16),b.ac("ngModelChange",function(e){return i.profileProvider.phone=e}),b.Sb(),b.Sb(),b.Tb(58,"div"),b.Tb(59,"label",14),b.Dc(60,"Facebook"),b.Sb(),b.Tb(61,"input",15),b.ac("ngModelChange",function(e){return i.profileProvider.facebook=e}),b.Sb(),b.Sb(),b.Tb(62,"div"),b.Tb(63,"label",14),b.Dc(64,"Instagram"),b.Sb(),b.Tb(65,"input",15),b.ac("ngModelChange",function(e){return i.profileProvider.instagram=e}),b.Sb(),b.Sb(),b.Tb(66,"div"),b.Tb(67,"label",14),b.Dc(68,"Twitter"),b.Sb(),b.Tb(69,"input",15),b.ac("ngModelChange",function(e){return i.profileProvider.twitter=e}),b.Sb(),b.Sb(),b.Tb(70,"div"),b.Tb(71,"label",14),b.Dc(72,"Tiktok"),b.Sb(),b.Tb(73,"input",15),b.ac("ngModelChange",function(e){return i.profileProvider.tiktok=e}),b.Sb(),b.Sb(),b.Tb(74,"div"),b.Tb(75,"label",14),b.Dc(76,"Correo"),b.Sb(),b.Tb(77,"input",17),b.ac("ngModelChange",function(e){return i.profileProvider.email=e}),b.Sb(),b.Sb(),b.Tb(78,"div"),b.Tb(79,"label",14),b.Dc(80,"Sitio Web"),b.Sb(),b.Tb(81,"input",15),b.ac("ngModelChange",function(e){return i.profileProvider.siteWeb=e}),b.Sb(),b.Sb(),b.Tb(82,"div"),b.Tb(83,"label",14),b.Dc(84,"Direcci\xf3n GPS"),b.Sb(),b.Tb(85,"input",15),b.ac("ngModelChange",function(e){return i.profileProvider.addressMaps=e}),b.Sb(),b.Sb(),b.Tb(86,"div"),b.Tb(87,"label",14),b.Dc(88,"Direcci\xf3n display (Se visualizar\xe1 para los usuarios)"),b.Sb(),b.Tb(89,"input",15),b.ac("ngModelChange",function(e){return i.profileProvider.addressText=e}),b.Sb(),b.Sb(),b.Tb(90,"div"),b.Tb(91,"label",14),b.Dc(92,"Distritos"),b.Sb(),b.Tb(93,"select",10),b.ac("ngModelChange",function(e){return i.profileProvider.districtId=e}),b.Tb(94,"option",18),b.Dc(95,"Seleccione un distrito"),b.Sb(),b.Bc(96,M,2,2,"option",19),b.Sb(),b.Sb(),b.Tb(97,"button",20),b.ac("click",function(){return i.setUbication()}),b.Dc(98,"Guardar"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Ob(99,"div",21,22)),2&e&&(b.Bb(10),b.ic("ngIf",i.currentImage),b.Bb(3),b.ic("ngModel",i.profileProvider.delivery),b.Bb(4),b.ic("ngModel",i.profileProvider.onMarket),b.Bb(5),b.ic("ngModel",i.profileProvider.enabledProducts),b.Bb(4),b.ic("ngModel",i.profileProvider.enabledProductsFeatured),b.Bb(4),b.ic("ngModel",i.profileProvider.enabledOffers),b.Bb(7),b.ic("ngModel",i.profileProvider.comercialName),b.Bb(4),b.ic("ngModel",i.profileProvider.legalName),b.Bb(4),b.ic("ngModel",i.profileProvider.ruc),b.Bb(4),b.ic("ngModel",i.profileProvider.description),b.Bb(4),b.ic("ngModel",i.profileProvider.whatsapp),b.Bb(4),b.ic("ngModel",i.profileProvider.phone),b.Bb(4),b.ic("ngModel",i.profileProvider.facebook),b.Bb(4),b.ic("ngModel",i.profileProvider.instagram),b.Bb(4),b.ic("ngModel",i.profileProvider.twitter),b.Bb(4),b.ic("ngModel",i.profileProvider.tiktok),b.Bb(4),b.ic("ngModel",i.profileProvider.email),b.Bb(4),b.ic("ngModel",i.profileProvider.siteWeb),b.Bb(4),b.ic("ngModel",i.profileProvider.addressMaps),b.Bb(4),b.ic("ngModel",i.profileProvider.addressText),b.Bb(4),b.ic("ngModel",i.profileProvider.districtId),b.Bb(3),b.ic("ngForOf",i.districts))},directives:[p.a,u.a,t.k,m.a,h.d,h.e,h.a,h.g,h.h,h.f,h.i,t.j,t.l,v.a],styles:[".image-miniature[_ngcontent-%COMP%], .image-miniature[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{min-width:300px;max-width:300px;min-height:300px;max-height:300px}.btn-upload[_ngcontent-%COMP%]{max-width:300px!important}@media (max-width:953px){.image-miniature[_ngcontent-%COMP%], .image-miniature[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{min-width:200px;max-width:200px;min-height:200px;max-height:200px}.btn-upload[_ngcontent-%COMP%]{max-width:200px!important}}@media (max-width:768px){.image-miniature[_ngcontent-%COMP%], .image-miniature[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{min-width:400px;max-width:400px;min-height:400px;max-height:400px}.btn-upload[_ngcontent-%COMP%]{max-width:400px!important}}@media (max-width:508px){.image-miniature[_ngcontent-%COMP%], .image-miniature[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{min-width:300px;max-width:300px;min-height:300px;max-height:300px}.btn-upload[_ngcontent-%COMP%]{max-width:300px!important}}@media (max-width:408px){.image-miniature[_ngcontent-%COMP%], .image-miniature[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{min-width:200px;max-width:200px;min-height:200px;max-height:200px}.btn-upload[_ngcontent-%COMP%]{max-width:200px!important}}"]}),e})()}];let w=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=b.Lb({type:e}),e.\u0275inj=b.Kb({imports:[[n.d.forChild(x)],n.d]}),e})();var C=r("OteU"),O=r("6Gmc"),y=r("RTT/");let D=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=b.Lb({type:e}),e.\u0275inj=b.Kb({providers:[g.a],imports:[[t.c,w,C.a,O.a,h.b,y.b,v.b,m.b]]}),e})()}}]);