"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[772],{8772:(u,m,o)=>{o.r(m),o.d(m,{ViewCompanyModule:()=>E});var p=o(9808),f=o(9812),d=o(5767),s=o(801),e=o(5e3),l=o(1864),c=o(1724),P=o(2542),x=o(319),y=o(9062),_=o(8157),v=o(9783),w=o(5519),g=o(3561),h=o(3725),C=o(3957);const F=["map"];function b(i,a){if(1&i&&(e.TgZ(0,"div",5),e._UZ(1,"div",6),e.TgZ(2,"div",7)(3,"h6",8),e._uU(4),e.qZA(),e.TgZ(5,"p",9),e._uU(6),e.qZA()()()),2&i){const t=a.$implicit,r=e.oxw(2);e.xp6(4),e.Oqu(r.format(t.key)),e.xp6(2),e.Oqu(t.value)}}function T(i,a){if(1&i&&(e.TgZ(0,"div",1)(1,"div"),e.YNc(2,b,7,2,"div",2),e.qZA(),e._UZ(3,"div",3,4),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.profileProviderFormat)}}let Z=(()=>{class i{constructor(){this.profileProviderFormat=[]}ngOnInit(){console.log("profileProvider",this.profileProvider),this.formatData()}ngAfterViewInit(){this.initMap()}formatData(){this.profileProvider.comercialName&&(this.profileProviderFormat=[...this.profileProviderFormat,{key:"Nombre comercial",value:this.profileProvider.comercialName}]),this.profileProvider.legalName&&(this.profileProviderFormat=[...this.profileProviderFormat,{key:"Raz\xf3n social",value:this.profileProvider.legalName}]),this.profileProvider.ruc&&(this.profileProviderFormat=[...this.profileProviderFormat,{key:"Ruc",value:this.profileProvider.ruc}]),this.profileProvider.whatsapp&&(this.profileProviderFormat=[...this.profileProviderFormat,{key:"Whatsapp",value:this.profileProvider.whatsapp}]),this.profileProvider.phone&&(this.profileProviderFormat=[...this.profileProviderFormat,{key:"Tel\xe9fono",value:this.profileProvider.phone}]),this.profileProvider.addressText&&(this.profileProviderFormat=[...this.profileProviderFormat,{key:"Direci\xf3n",value:this.profileProvider.addressText}]),this.profileProvider.facebook&&(this.profileProviderFormat=[...this.profileProviderFormat,{key:"Facebook",value:this.profileProvider.facebook}]),this.profileProvider.twitter&&(this.profileProviderFormat=[...this.profileProviderFormat,{key:"Twitter",value:this.profileProvider.twitter}]),this.profileProvider.instagram&&(this.profileProviderFormat=[...this.profileProviderFormat,{key:"Instagram",value:this.profileProvider.instagram}]),this.profileProvider.tiktok&&(this.profileProviderFormat=[...this.profileProviderFormat,{key:"Tiktok",value:this.profileProvider.tiktok}]),this.profileProvider.email&&(this.profileProviderFormat=[...this.profileProviderFormat,{key:"Correo",value:this.profileProvider.email}]),this.profileProvider.distrinctName&&(this.profileProviderFormat=[...this.profileProviderFormat,{key:"Distrito",value:this.profileProvider.distrinctName}]),this.profileProvider.siteWeb&&(this.profileProviderFormat=[...this.profileProviderFormat,{key:"Sitio Web",value:this.profileProvider.siteWeb}])}format(t){return t.replace("-","").replace("-","").replace("-","").replace("-","")}initMap(){const t={lat:this.profileProvider.lat,lng:this.profileProvider.lng},r=new google.maps.Map(this.el.nativeElement,{center:t,zoom:14});new google.maps.Marker({position:t,map:r,title:this.profileProvider.comercialName})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-information"]],viewQuery:function(t,r){if(1&t&&e.Gf(F,5),2&t){let n;e.iGM(n=e.CRH())&&(r.el=n.first)}},inputs:{profileProvider:"profileProvider"},decls:1,vars:1,consts:[["class","d-flex flex-wrap",4,"ngIf"],[1,"d-flex","flex-wrap"],["class","d-flex mt-2",4,"ngFor","ngForOf"],["id","map",1,"ml-0","ml-md-5","mt-4","mt-md-0"],["map",""],[1,"d-flex","mt-2"],[1,"line","bg-color1"],[1,"d-flex","flex-column","justify-content-center","ml-2"],[1,"text-capitalize","bold"],[1,"text-value"]],template:function(t,r){1&t&&e.YNc(0,T,5,1,"div",0),2&t&&e.Q6J("ngIf",r.profileProviderFormat)},directives:[p.O5,p.sg],styles:[".line[_ngcontent-%COMP%]{min-height:74px;min-width:8px;border:0}#map[_ngcontent-%COMP%]{height:400px;width:400px}"]}),i})();var I=o(3349);function S(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addfavorites()}),e._uU(1,"Informaci\xf3n"),e.qZA()}}function M(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return n.confirmDeleteFavorites(n.profileProvider._id)}),e._UZ(1,"fa-icon",26),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("icon",t.faStar)}}function O(i,a){if(1&i&&(e.TgZ(0,"span",32),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.title)}}function U(i,a){if(1&i&&e._UZ(0,"app-product-list",33),2&i){const t=e.oxw().$implicit,r=e.oxw(2);e.Q6J("type",t.title)("profileProviderId",r.profileProvider._id)("items",t.data)("rows",3)}}function V(i,a){if(1&i&&e._UZ(0,"app-information",34),2&i){const t=e.oxw(3);e.Q6J("profileProvider",t.profileProvider)}}function A(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"p-tabPanel")(1,"div",27)(2,"button",28),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).allproduct()}),e._uU(3," Ver todos "),e.qZA()(),e.YNc(4,O,2,1,"ng-template",29),e.YNc(5,U,1,4,"app-product-list",30),e.YNc(6,V,1,1,"app-information",31),e.qZA()}if(2&i){const t=a.$implicit;e.xp6(5),e.Q6J("ngIf","Informaci\xf3n"!==t.title),e.xp6(1),e.Q6J("ngIf","Informaci\xf3n"===t.title)}}const N=function(i){return{"background-image":i}};function k(i,a){if(1&i&&(e.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8),e._UZ(4,"div",9),e.TgZ(5,"div",10)(6,"h1",11),e._uU(7),e.qZA(),e.TgZ(8,"p",12),e._uU(9),e.qZA(),e.TgZ(10,"div",13)(11,"a",14),e._UZ(12,"fa-icon",15),e.qZA(),e.TgZ(13,"a",16),e.ALo(14,"whatsapp"),e._UZ(15,"fa-icon",17),e.qZA()(),e.TgZ(16,"div",18),e.YNc(17,S,2,0,"button",19),e.YNc(18,M,2,1,"button",20),e.qZA()()()(),e.TgZ(19,"div",21)(20,"p-tabView",22),e.YNc(21,A,7,2,"p-tabPanel",23),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngStyle",e.VKq(13,N,"url("+t.profileProvider.image+")")),e.xp6(3),e.Oqu(t.profileProvider.comercialName),e.xp6(2),e.Oqu(t.profileProvider.description),e.xp6(2),e.MGl("href","tel:",t.profileProvider.phone,"",e.LSH),e.xp6(1),e.Q6J("icon",t.faPhone),e.xp6(1),e.hYB("href","https://wa.me/",e.lcZ(14,11,t.profileProvider.whatsapp),"?text=Hola! ",t.profileProvider.comercialName,"",e.LSH),e.xp6(2),e.Q6J("icon",t.faWhatsapp),e.xp6(2),e.Q6J("ngIf",!t.isFavorite(t.profileProvider._id)),e.xp6(1),e.Q6J("ngIf",t.isFavorite(t.profileProvider._id)),e.xp6(3),e.Q6J("ngForOf",t.tabs)}}const Y=[{path:"",component:(()=>{class i{constructor(t,r,n,L,j,H,W,R,$,z){this.route=t,this.generalService=r,this.profileProviderService=n,this.authService=L,this.productService=j,this.offersService=H,this.favoriteService=W,this.messageService=R,this.confirmationService=$,this.router=z,this.faWhatsapp=d.VHX,this.faPhone=s.j1w,this.tabs=[],this.faStar=s.Tab,this.faArrowLeft=s.acZ,this.companyUrl=this.route.snapshot.paramMap.get("id")}ngOnInit(){this.getUrlData(),this.getFavorites()}getUrlData(){this.profileProviderService.getUrlByUrl(this.companyUrl).subscribe(t=>{var r;this.getProfileProvider(null===(r=null==t?void 0:t.data[0])||void 0===r?void 0:r.profileProviderId)})}getProfileProvider(t){this.profileProviderService.getById(t).subscribe(r=>{this.profileProvider=r.data,this.getProducts()})}getProducts(){this.productService.getByProfileProviderId(this.profileProvider._id).subscribe(t=>{this.products=t.data,this.getOffers()})}getOffers(){this.offersService.getByProfileProviderId(this.profileProvider._id).subscribe(t=>{this.offers=t.data,this.formatTabs()})}formatTabs(){let t=[...this.products.filter(r=>r.isFeatured)];this.products.length>0&&(this.tabs=[...this.tabs,{title:"Productos",data:this.products}]),t.length>0&&(this.tabs=[...this.tabs,{title:"Destacados",data:t}]),this.offers.length>0&&(this.tabs=[...this.tabs,{title:"Ofertas",data:this.offers}]),this.tabs=[...this.tabs,{title:"Informaci\xf3n",data:this.profileProvider}]}addfavorites(){this.authService.getRole()||(this.eventHeader={event:"open-login"})}getFavorites(){this.role=this.authService.getRole(),this.role&&this.favoriteService.getByClientId(this.authService.getUserID()).subscribe(t=>{this.favorites=t.data})}isFavorite(t){if(this.favorites){let r=!1;return this.favorites.map(n=>{n.profileProviderId===t&&(r=!0)}),r}}deleteFavorites(t){let r;this.favorites.map(n=>{n.profileProviderId===t&&(r=n._id)}),r&&this.favoriteService.delete(r).subscribe(n=>{this.messageService.add({detail:n.message,summary:"\xc9xito",severity:"success"}),this.getFavorites()},n=>{this.messageService.add({detail:n.error,summary:"Error",severity:"error"})})}confirmDeleteFavorites(t){this.confirmationService.confirm({message:"\xbfSeguro que desea eliminar de favoritos?",acceptLabel:"Si",rejectLabel:"No",header:"Confirmaci\xf3n",accept:()=>{this.deleteFavorites(t)}})}allproduct(){this.router.navigate([this.profileProvider.comercialName.toLowerCase().replace(" ","-")+"/productos"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.gz),e.Y36(l.m),e.Y36(c.n),e.Y36(P.e),e.Y36(x.M),e.Y36(y.K),e.Y36(_.e),e.Y36(v.ez),e.Y36(v.YP),e.Y36(f.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-view-company"]],decls:6,vars:3,consts:[[3,"eventHeader"],[1,"w-100","mt-2","mb-3","px-3","d-flex","justify-content-start"],["routerLink","/",1,"mt-4","bg-transparent","px-2","f-14","font-500","border-0","d-flex","align-items-center","justify-content-center","rounded-pill","text-color5"],[1,"f-14","icon-search","mr-2","text-color5",3,"icon"],["class","container-fluid mt-4 p-0",4,"ngIf"],[1,"container-fluid","mt-4","p-0"],[1,"row","m-0","p-0","justify-content-center"],[1,"cont","d-flex","justify-content-sm-center","px-3"],[1,"d-flex","container-profile"],[1,"image","image-profile",3,"ngStyle"],[1,"ml-4","my-auto"],[1,"f-18","font-600","mt-xl-0","text-left"],[1,"mt-2"],[1,"d-flex"],["target","_blank","title","Llamar",1,"link-unstyled","p-1","bg-color2","rounded-circle","icon","d-flex","justify-content-center","align-items-center",3,"href"],[1,"f-13","text-white","fa-rotate-90",3,"icon"],["title","Whatsapp",1,"ml-2","p-1","bg-color1","rounded-circle","icon","d-flex","justify-content-center","align-items-center",3,"href"],[1,"f-15","text-white",3,"icon"],[1,"mt-3","mt-sm-4"],["class","cursor bg-color1 border-0 py-2 px-4 px-sm-5 text-white f-8 font-500",3,"click",4,"ngIf"],["class","cursor pl-2 pr-2 bg-color2 border-0 p-1 rounded-pill f-9 font-500",3,"click",4,"ngIf"],[1,"w-100","m-0","p-0","mt-5"],["styleClass","tabview-custom"],[4,"ngFor","ngForOf"],[1,"cursor","bg-color1","border-0","py-2","px-4","px-sm-5","text-white","f-8","font-500",3,"click"],[1,"cursor","pl-2","pr-2","bg-color2","border-0","p-1","rounded-pill","f-9","font-500",3,"click"],[1,"f-13",3,"icon"],[1,"w-100","px-3","d-flex","justify-content-end","pr-4"],[1,"mt-4","bg-transparent","f-14","border-0","p-0","text-color5",3,"click"],["pTemplate","header"],[3,"type","profileProviderId","items","rows",4,"ngIf"],[3,"profileProvider",4,"ngIf"],[1,"f-12","font-300"],[3,"type","profileProviderId","items","rows"],[3,"profileProvider"]],template:function(t,r){1&t&&(e._UZ(0,"app-header",0),e.TgZ(1,"div",1)(2,"button",2),e._UZ(3,"fa-icon",3),e._uU(4," Atr\xe1s "),e.qZA()(),e.YNc(5,k,22,15,"div",4)),2&t&&(e.Q6J("eventHeader",r.eventHeader),e.xp6(3),e.Q6J("icon",r.faArrowLeft),e.xp6(2),e.Q6J("ngIf",r.profileProvider))},directives:[w.G,f.rH,g.BN,p.O5,p.PC,h.xf,p.sg,h.x4,v.jx,C.X,Z],pipes:[I.T],styles:[".image-profile[_ngcontent-%COMP%]{min-width:220px;max-width:220px;min-height:220px;max-height:220px}@media (max-width: 520px){.image-profile[_ngcontent-%COMP%]{min-width:150px;max-width:150px;min-height:150px;max-height:150px}}.icon[_ngcontent-%COMP%]{cursor:pointer;min-width:32px;min-height:32px;max-width:32px;max-height:32px}@media (max-width: 1200px){.cont[_ngcontent-%COMP%]{min-width:100%}}"]}),i})()}];let J=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[f.Bz.forChild(Y)],f.Bz]}),i})();var Q=o(9886),D=o(8078),B=o(8478);let E=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.ez,J,Q.O,D.k,g.uH,h.LU,B.f]]}),i})()},3349:(u,m,o)=>{o.d(m,{T:()=>f});var p=o(5e3);let f=(()=>{class d{transform(e,...l){return 9===e.length?`51${e}`:12===e.length?e.substring(1):e}}return d.\u0275fac=function(e){return new(e||d)},d.\u0275pipe=p.Yjl({name:"whatsapp",type:d,pure:!0}),d})()},8157:(u,m,o)=>{o.d(m,{e:()=>d});var p=o(5e3),f=o(5830);let d=(()=>{class s{constructor(l){this.api=l,this.model="favorite"}save(l){return this.api.api({service:`save-${this.model}`,type:"post",data:l})}getByClientId(l){return this.api.api({service:`get-${this.model}-by-client-id/${l}`,type:"get",data:null})}delete(l){return this.api.api({service:`delete-${this.model}/${l}`,type:"delete",data:null})}}return s.\u0275fac=function(l){return new(l||s)(p.LFG(f.s))},s.\u0275prov=p.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()}}]);