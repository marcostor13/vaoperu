"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[991],{3957:(T,u,s)=>{s.d(u,{X:()=>R});var t=s(5e3),m=s(8745),g=s(943),x=s(1864),h=s(2542),p=s(2828),f=s(4254),a=s(9808),d=s(6498),P=s(9783),I=s(8759),C=s(4182),b=s(5315);function O(o,_){if(1&o){const e=t.EpF();t.TgZ(0,"div",9)(1,"div",10),t._UZ(2,"i",11),t.TgZ(3,"input",12),t.NdJ("input",function(n){return t.CHM(e),t.oxw(3).search(n)}),t.qZA()(),t._UZ(4,"p-dataViewLayoutOptions"),t.qZA()}}function Z(o,_){1&o&&t.YNc(0,O,5,0,"ng-template",8)}const v=function(o){return{"background-image":o}};function E(o,_){if(1&o){const e=t.EpF();t.TgZ(0,"div",27),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(),r=n.$implicit,c=n.rowIndex;return t.oxw(2).openModal(r,c)}),t.qZA()}2&o&&t.Q6J("ngStyle",t.VKq(1,v,"url("+_.$implicit+")"))}function y(o,_){if(1&o){const e=t.EpF();t.TgZ(0,"div",28)(1,"button",29),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(),r=n.rowIndex,c=n.$implicit;return t.oxw(2).changeProduct(r,"subtract",c)}),t._uU(2,"-"),t.qZA(),t.TgZ(3,"input",30),t.NdJ("ngModelChange",function(n){t.CHM(e);const r=t.oxw().rowIndex;return t.oxw(2).quantity[r]=n}),t.qZA(),t.TgZ(4,"button",31),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(),r=n.rowIndex,c=n.$implicit;return t.oxw(2).changeProduct(r,"increase",c)}),t._uU(5,"+"),t.qZA()()}if(2&o){const e=t.oxw().rowIndex,i=t.oxw(2);t.xp6(3),t.Q6J("ngModel",i.quantity[e])}}function L(o,_){if(1&o){const e=t.EpF();t.TgZ(0,"h5",32),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(),r=n.$implicit,c=n.rowIndex;return t.oxw(2).openModal(r,c)}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(1),t.Oqu(i.getPrice(e.promotionalPrice))}}function A(o,_){if(1&o){const e=t.EpF();t.TgZ(0,"button",33),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw(2).edit(n)}),t._UZ(1,"i",34),t.qZA()}}const w=function(o){return{"price-sub ml-2":o}};function k(o,_){if(1&o){const e=t.EpF();t.TgZ(0,"div",13)(1,"div",14)(2,"p-carousel",15),t.YNc(3,E,1,3,"ng-template",16),t.qZA(),t.TgZ(4,"div",17),t.YNc(5,y,6,1,"div",18),t.TgZ(6,"h5",19),t.NdJ("click",function(){const n=t.CHM(e),r=n.$implicit,c=n.rowIndex;return t.oxw(2).openModal(r,c)}),t._uU(7),t.qZA(),t.TgZ(8,"div",20),t.YNc(9,L,2,1,"h5",21),t.TgZ(10,"h5",22),t.NdJ("click",function(){const n=t.CHM(e),r=n.$implicit,c=n.rowIndex;return t.oxw(2).openModal(r,c)}),t._uU(11),t.qZA()(),t.YNc(12,A,2,0,"button",23),t.qZA()(),t.TgZ(13,"div",24)(14,"div",25)(15,"pre",26),t._uU(16),t.qZA()()()()}if(2&o){const e=_.$implicit,i=t.oxw(2);t.xp6(2),t.Q6J("value",null==e?null:e.images)("numVisible",1)("numScroll",1)("styleClass",1===e.images.length?"carousel opacity-dots":"carousel"),t.xp6(3),t.Q6J("ngIf","Productos"===i.type||"Productos"===i.type),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Q6J("ngIf",e.promotionalPrice),t.xp6(1),t.Q6J("ngClass",t.VKq(11,w,e.promotionalPrice)),t.xp6(1),t.Oqu(i.getPrice(e.price)),t.xp6(1),t.Q6J("ngIf","provider"===i.role),t.xp6(4),t.Oqu(e.description)}}function J(o,_){if(1&o){const e=t.EpF();t.TgZ(0,"div",41),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(),r=n.$implicit,c=n.rowIndex;return t.oxw(2).openModal(r,c)}),t.qZA()}2&o&&t.Q6J("ngStyle",t.VKq(1,v,"url("+_.$implicit+")"))}function q(o,_){if(1&o){const e=t.EpF();t.TgZ(0,"div",28)(1,"button",29),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(),r=n.rowIndex,c=n.$implicit;return t.oxw(2).changeProduct(r,"subtract",c)}),t._uU(2,"-"),t.qZA(),t.TgZ(3,"input",30),t.NdJ("ngModelChange",function(n){t.CHM(e);const r=t.oxw().rowIndex;return t.oxw(2).quantity[r]=n}),t.qZA(),t.TgZ(4,"button",31),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(),r=n.rowIndex,c=n.$implicit;return t.oxw(2).changeProduct(r,"increase",c)}),t._uU(5,"+"),t.qZA()()}if(2&o){const e=t.oxw().rowIndex,i=t.oxw(2);t.xp6(3),t.Q6J("ngModel",i.quantity[e])}}function V(o,_){if(1&o){const e=t.EpF();t.TgZ(0,"h5",42),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(),r=n.$implicit,c=n.rowIndex;return t.oxw(2).openModal(r,c)}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(1),t.Oqu(i.getPrice(e.promotionalPrice))}}function D(o,_){if(1&o){const e=t.EpF();t.TgZ(0,"button",33),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw(2).edit(n)}),t._UZ(1,"i",34),t.qZA()}}function U(o,_){if(1&o){const e=t.EpF();t.TgZ(0,"div",35)(1,"p-carousel",15),t.YNc(2,J,1,3,"ng-template",16),t.qZA(),t.TgZ(3,"div",36),t.YNc(4,q,6,1,"div",18),t.TgZ(5,"h5",37),t.NdJ("click",function(){const n=t.CHM(e),r=n.$implicit,c=n.rowIndex;return t.oxw(2).openModal(r,c)}),t._uU(6),t.qZA(),t.TgZ(7,"div",38),t.YNc(8,V,2,1,"h5",39),t.TgZ(9,"h5",40),t.NdJ("click",function(){const n=t.CHM(e),r=n.$implicit,c=n.rowIndex;return t.oxw(2).openModal(r,c)}),t._uU(10),t.qZA()(),t.YNc(11,D,2,0,"button",23),t.qZA()()}if(2&o){const e=_.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("value",null==e?null:e.images)("numVisible",1)("numScroll",1)("styleClass","carousel"),t.xp6(3),t.Q6J("ngIf","Productos"===i.type||"Productos"===i.type),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Q6J("ngIf",e.promotionalPrice),t.xp6(1),t.Q6J("ngClass",t.VKq(10,w,e.promotionalPrice)),t.xp6(1),t.Oqu(i.getPrice(e.price)),t.xp6(1),t.Q6J("ngIf","provider"===i.role)}}function N(o,_){if(1&o&&(t.TgZ(0,"p-dataView",4),t.YNc(1,Z,1,0,null,5),t.YNc(2,k,17,13,"ng-template",6),t.YNc(3,U,12,12,"ng-template",7),t.qZA()),2&o){const e=t.oxw();t.Q6J("value",e.items)("paginator",(null==e.items?null:e.items.length)>10)("rows",e.rows?e.rows:null)("emptyMessage","No se encontraron resultados"),t.xp6(1),t.Q6J("ngIf",0===e.rows)}}function Q(o,_){if(1&o&&(t.TgZ(0,"div",54),t._UZ(1,"div",55),t.qZA()),2&o){const e=_.$implicit;t.xp6(1),t.Q6J("ngStyle",t.VKq(1,v,"url("+e+")"))}}function B(o,_){if(1&o&&(t.TgZ(0,"h5",56),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.getPrice(e.currentItem.promotionalPrice))}}function S(o,_){if(1&o){const e=t.EpF();t.TgZ(0,"div",43)(1,"div",13)(2,"div",44)(3,"div",45)(4,"p-carousel",46),t.YNc(5,Q,2,3,"ng-template",16),t.qZA()(),t.TgZ(6,"div",47)(7,"h5",48),t._uU(8),t.qZA(),t.TgZ(9,"div",20),t.YNc(10,B,2,1,"h5",49),t.TgZ(11,"h5",50),t._uU(12),t.qZA()()()(),t.TgZ(13,"div",51)(14,"div",25)(15,"pre",26),t._uU(16),t.qZA()()(),t.TgZ(17,"div",52)(18,"h6",53),t._uU(19,"Agregar a carrito"),t.qZA(),t.TgZ(20,"div",28)(21,"button",29),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.changeProduct(n.currentIndex,"subtract",n.currentItem)}),t._uU(22,"-"),t.qZA(),t.TgZ(23,"input",30),t.NdJ("ngModelChange",function(n){t.CHM(e);const r=t.oxw();return r.quantity[r.currentIndex]=n}),t.qZA(),t.TgZ(24,"button",31),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.changeProduct(n.currentIndex,"increase",n.currentItem)}),t._uU(25,"+"),t.qZA()()()()()}if(2&o){const e=t.oxw();t.xp6(4),t.Q6J("responsiveOptions",e.responsiveOptions)("value",null==e.currentItem?null:e.currentItem.images)("numVisible",3)("numScroll",1)("styleClass",1===e.currentItem.images.length?"carousel opacity-dots":"carousel"),t.xp6(4),t.Oqu(e.currentItem.name),t.xp6(2),t.Q6J("ngIf",e.currentItem.promotionalPrice),t.xp6(1),t.Q6J("ngClass",t.VKq(11,w,e.currentItem.promotionalPrice)),t.xp6(1),t.Oqu(e.getPrice(e.currentItem.price)),t.xp6(4),t.Oqu(e.currentItem.description),t.xp6(7),t.Q6J("ngModel",e.quantity[e.currentIndex])}}const K=function(){return{"min-width":"60vw"}};let R=(()=>{class o{constructor(e,i,n,r){this.general=e,this.authService=i,this.cartService=n,this.store=r,this.productsEvent=new t.vpe,this.effect="scrollx",this.isMobile=!1,this.displayModal=!1,this.quantity=[],this.subs=new m.Y,this.responsiveOptions=[{breakpoint:"1412px",numVisible:2,numScroll:1},{breakpoint:"1200px",numVisible:1,numScroll:1},{breakpoint:"560px",numVisible:1,numScroll:1}],this.isProviderPath=window.location.pathname.indexOf("provider")>-1}ngOnChanges(){this.initializeQuantities(),this.isProviderPath||this.subscriptionCart()}subscriptionCart(){this.subs.add(this.store.select(e=>e.Reducer.cart).pipe((0,g.g)(0)).subscribe(e=>{e?e.profileProviderId!==this.profileProviderId?this.resetCart():this.cart=e:this.resetCart(),this.setQuantities()}))}resetCart(){this.cartService.setDataCart({profileProviderId:this.profileProviderId,userId:"",items:[]})}ngOnInit(){this.role=this.authService.getRole(),this.initializeItems()}setQuantities(){var e,i,n,r;null===(e=this.items)||void 0===e||e.map((c,l)=>{this.quantity[l]=0}),(null===(n=null===(i=this.cart)||void 0===i?void 0:i.items)||void 0===n?void 0:n.length)>0?this.cart.items.map((c,l)=>{var M;null===(M=this.items)||void 0===M||M.map((H,Y)=>{H._id===c.productId&&(this.quantity[Y]=c.quantity)})}):null===(r=this.items)||void 0===r||r.map((c,l)=>{this.quantity[l]=0})}initializeItems(){this.items&&(this.itemsTmp=[...this.items])}initializeQuantities(){this.items&&("Productos"===this.type||"Destacados"===this.type)&&this.items.map((e,i)=>{this.quantity[i]=0})}onResize(e){this.isMobile=e.target.innerWidth<768}onSortChange(e){this.general.c("SORT BY",e)}edit(e){this.productsEvent.emit({function:"edit",data:e})}search(e){const i=e.target.value;this.items=""===i?[...this.itemsTmp]:[...this.itemsTmp.filter(n=>n.name.indexOf(i)>-1||n.description.indexOf(i)>-1)]}getPrice(e){return"number"==typeof e?`S/${e}`:e}openModal(e,i){this.currentIndex=i,this.currentItem=e,this.displayModal=!0}changeProduct(e,i,n){let r;switch(i){case"increase":r=this.quantity[e]+1,this.cartService.addToCart({productId:n._id,quantity:r,productData:{name:n.name,price:n.price,promotionalPrice:n.promotionalPrice}},this.profileProviderId);break;case"subtract":r=this.quantity[e]-1,r>0?this.cartService.substractToCart(n._id,this.profileProviderId):this.cartService.removeToCart(n._id,this.profileProviderId)}this.setQuantities()}ngOnDestroy(){this.subs.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(x.m),t.Y36(h.e),t.Y36(p.N),t.Y36(f.yh))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-product-list"]],hostBindings:function(e,i){1&e&&t.NdJ("resize",function(r){return i.onResize(r)},!1,t.Jf7)},inputs:{items:"items",rows:"rows",type:"type",profileProviderId:"profileProviderId"},outputs:{productsEvent:"productsEvent"},features:[t.TTD],decls:4,vars:11,consts:[[1,"product-list"],["filterBy","name","layout","grid",3,"value","paginator","rows","emptyMessage",4,"ngIf"],["header","",3,"visible","modal","baseZIndex","autoZIndex","draggable","resizable","visibleChange"],["class","product-list2 p-0 p-md-5",4,"ngIf"],["filterBy","name","layout","grid",3,"value","paginator","rows","emptyMessage"],[4,"ngIf"],["pTemplate","listItem"],["pTemplate","gridItem"],["pTemplate","header"],[1,"row","justify-content-between","m-0"],[1,"input-search"],[1,"pi","pi-search"],["type","search","pInputText","","placeholder","Buscar",3,"input"],[1,"product","col-12","p-3","row","flex-column","flex-md-row","m-0"],[1,"row","m-0","align-items-center","flex-wrap","sub-product"],[3,"value","numVisible","numScroll","styleClass"],["pTemplate","item"],[1,"mt-2","pt-2","d-flex","flex-column","ml-3"],["class","controls d-flex align-items-center",4,"ngIf"],[1,"cursor","title",3,"click"],[1,"row","align-items-center","m-0"],["class","cursor primary-price text-color8",3,"click",4,"ngIf"],[1,"cursor","text-color8",3,"ngClass","click"],["class","border-0 text-white p-1 pl-2 pr-2 rounded bg-color2",3,"click",4,"ngIf"],[1,"d-none","d-md-flex","m-0","flex-1","align-items-center","mt-3"],[1,"description-content"],[1,"p-0","m-0","pl-0","pr-0","pl-md-5","description","font-p","font-400","f-10"],[1,"shadow","image-product","cursor",3,"ngStyle","click"],[1,"controls","d-flex","align-items-center"],[3,"click"],["disabled","true","type","text",3,"ngModel","ngModelChange"],[1,"cursor",3,"click"],[1,"cursor","primary-price","text-color8",3,"click"],[1,"border-0","text-white","p-1","pl-2","pr-2","rounded","bg-color2",3,"click"],[1,"pi","pi-pencil"],[1,"product","col-6","p-0","col-lg-4","col-xl-4","mt-3","m-0","row","justify-content-center","pt-2","pb-2"],[1,"mt-2","col-12","d-flex","flex-column","justify-content-between","align-items-center"],[1,"title","cursor","mt-2",3,"click"],[1,"row","align-items-center"],["class","primary-price text-color8 cursor",3,"click",4,"ngIf"],[1,"text-color8","cursor",3,"ngClass","click"],[1,"image-product","cursor",3,"ngStyle","click"],[1,"primary-price","text-color8","cursor",3,"click"],[1,"product-list2","p-0","p-md-5"],[1,"row","col-12","p-0","m-0","align-items-center","flex-wrap","sub-product"],[1,"col-md-12","col-lg-6","col-xl-8","p-0"],[3,"responsiveOptions","value","numVisible","numScroll","styleClass"],[1,"row","m-0","col-md-12","col-lg-6","col-xl-4","p-0","align-items-center","flex-column"],[1,"title"],["class","primary-price text-color8",4,"ngIf"],[1,"text-color8",3,"ngClass"],[1,"row","col-12","p-0","mt-3"],[1,"row","col-12","p-0","mt-3","justify-content-between","align-items-center"],[1,"text-color1"],[1,"p-2"],[1,"image-product","shadow",3,"ngStyle"],[1,"primary-price","text-color8"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,N,4,5,"p-dataView",1),t.qZA(),t.TgZ(2,"p-dialog",2),t.NdJ("visibleChange",function(r){return i.displayModal=r}),t.YNc(3,S,26,13,"div",3),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",(null==i.items?null:i.items.length)>0),t.xp6(1),t.Akn(t.DdM(10,K)),t.Q6J("visible",i.displayModal)("modal",!0)("baseZIndex",1e5)("autoZIndex",!0)("draggable",!1)("resizable",!1),t.xp6(1),t.Q6J("ngIf",i.currentItem))},directives:[a.O5,d.VO,P.jx,d.uE,I.l,a.PC,C.Fj,C.JJ,C.On,a.mk,b.V],styles:[".product[_ngcontent-%COMP%]{min-height:210px}.product[_ngcontent-%COMP%]   .image-product[_ngcontent-%COMP%]{border-radius:10px;background-repeat:no-repeat;background-size:cover;min-height:210px;min-width:210px;max-width:210px;margin:auto!important;border:2px solid rgba(221,221,221,.3)}.input-search[_ngcontent-%COMP%]{position:relative;max-width:180px}.input-search[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;top:12px;left:10px}.input-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:40px}.primary-price[_ngcontent-%COMP%]{font-size:14pt}.price-sub[_ngcontent-%COMP%]{color:gray!important;font-size:11pt;text-decoration:line-through}.description-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;max-height:200px}.description-content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{white-space:pre-wrap}.controls[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px;max-width:40px;max-height:30px;border-radius:4px}.controls[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background-color:#fff!important}.controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:4px;min-width:30px;min-height:30px;background-color:#13bf9e;border:none;color:#fff}@media (max-width: 480px){.title[_ngcontent-%COMP%]{font-size:11pt!important}.product[_ngcontent-%COMP%]{min-height:120px;align-items:center}.product[_ngcontent-%COMP%]   .sub-product[_ngcontent-%COMP%]{justify-content:space-between!important;width:100%}.product-list[_ngcontent-%COMP%]   .image-product[_ngcontent-%COMP%]{border-radius:10px;background-repeat:no-repeat;background-size:cover;min-height:120px;min-width:120px;max-width:120px;border:2px solid rgba(221,221,221,.3)}.product-list2[_ngcontent-%COMP%]   .image-product[_ngcontent-%COMP%]{border-radius:10px;background-repeat:no-repeat;background-size:cover;min-height:300px;min-width:300px;max-width:300px;border:2px solid rgba(221,221,221,.3)}.primary-price[_ngcontent-%COMP%]{font-size:12pt}}"]}),o})()},8478:(T,u,s)=>{s.d(u,{f:()=>f});var t=s(9808),m=s(6498),g=s(8759),x=s(5315),h=s(4182),p=s(5e3);let f=(()=>{class a{}return a.\u0275fac=function(P){return new(P||a)},a.\u0275mod=p.oAB({type:a}),a.\u0275inj=p.cJS({imports:[[t.ez,m.FI,g.b,x.S,h.u5]]}),a})()}}]);