"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[518],{6518:(I,m,a)=>{a.r(m),a.d(m,{CategorySubcategoryProfileModule:()=>W});var g=a(9808),p=a(9812);class y{constructor(){this._id=!1,this.name=!1,this.categorySubcategoryId=!1,this.type=!1,this.profileProviderId=!1}}var f=a(801),e=a(5e3),u=a(1926),v=a(1864),c=a(9783),s=a(1724),h=a(7828),T=a(5964),Z=a(7858),S=a(7840),C=a(5315),_=a(4182),x=a(3561),P=a(9114);function M(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",10)(1,"div")(2,"span",11),e._uU(3,"Negocio :"),e.qZA(),e.TgZ(4,"span",12),e._uU(5),e.qZA()(),e.TgZ(6,"div")(7,"button",13),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw(2).addEdit(l)}),e._uU(8,"Editar"),e.qZA()()()}if(2&r){const t=n.$implicit;e.xp6(5),e.Oqu(t.comercialName)}}const J=function(){return{"max-height":"30rem"}};function A(r,n){if(1&r&&(e.TgZ(0,"div",7)(1,"p-orderList",8),e.YNc(2,M,9,1,"ng-template",9),e.qZA()()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("value",t.profileProviders)("listStyle",e.DdM(3,J))("dragdrop",!0)}}function E(r,n){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",17)(2,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).nextStep("categories")}),e._uU(3,"Categor\xedas"),e.qZA(),e.TgZ(4,"button",19),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).nextStep("sections")}),e._uU(5,"Secciones"),e.qZA()(),e.BQk()}}function Q(r,n){if(1&r&&(e.TgZ(0,"option",27),e._uU(1),e.qZA()),2&r){const t=n.$implicit;e.Q6J("value",t._id),e.xp6(1),e.Oqu(t.name)}}function N(r,n){if(1&r&&(e.TgZ(0,"option",27),e._uU(1),e.qZA()),2&r){const t=n.$implicit;e.Q6J("value",t._id),e.xp6(1),e.Oqu(t.name)}}function U(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"select",28),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(4).currentSubcategory=o}),e.TgZ(1,"option",22),e._uU(2,"Seleccione la subcategor\xeda"),e.qZA(),e.YNc(3,N,2,2,"option",23),e.qZA()}if(2&r){const t=e.oxw(4);e.Q6J("ngModel",t.currentSubcategory),e.xp6(3),e.Q6J("ngForOf",t.currentSubcategories)}}const Y=function(r,n){return{"bg-color8":r,"bg-color1":n}};function B(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",31),e._uU(1),e.TgZ(2,"fa-icon",32),e.NdJ("click",function(o){const d=e.CHM(t).$implicit;return e.oxw(5).confirm(o,d)}),e.qZA()()}if(2&r){const t=n.$implicit,i=e.oxw(5);e.Q6J("ngClass",e.WLB(3,Y,"subcategory"===t.type,"category"===t.type)),e.xp6(1),e.hij("",t.name," "),e.xp6(1),e.Q6J("icon",i.faTrash)}}function F(r,n){if(1&r&&(e.TgZ(0,"div",29),e.YNc(1,B,3,6,"div",30),e.qZA()),2&r){const t=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",t.currentList)}}function $(r,n){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"select",21),e.NdJ("change",function(){return e.CHM(t),e.oxw(3).toogleSubcategories()})("ngModelChange",function(o){return e.CHM(t),e.oxw(3).currentCategory=o}),e.TgZ(2,"option",22),e._uU(3,"Seleccione la categor\xeda"),e.qZA(),e.YNc(4,Q,2,2,"option",23),e.qZA(),e.YNc(5,U,4,2,"select",24),e.TgZ(6,"button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).add()}),e._uU(7,"Agregar"),e.qZA(),e.YNc(8,F,2,1,"div",26),e.BQk()}if(2&r){const t=e.oxw(3);e.xp6(1),e.Q6J("ngModel",t.currentCategory),e.xp6(3),e.Q6J("ngForOf",t.categories),e.xp6(1),e.Q6J("ngIf",(null==t.currentSubcategories?null:t.currentSubcategories.length)>0),e.xp6(1),e.Q6J("disabled",!(t.currentCategory&&0===(null==t.currentSubcategories?null:t.currentSubcategories.length)||t.currentCategory&&t.currentSubcategory)),e.xp6(2),e.Q6J("ngIf",t.currentList)}}function O(r,n){if(1&r&&(e.TgZ(0,"option",27),e._uU(1),e.qZA()),2&r){const t=n.$implicit;e.Q6J("value",t.item._id),e.xp6(1),e.Oqu(t.item.name)}}function w(r,n){if(1&r&&(e.TgZ(0,"option",27),e._uU(1),e.qZA()),2&r){const t=n.$implicit;e.Q6J("value",null==t?null:t._id),e.xp6(1),e.Oqu(null==t?null:t.name)}}function L(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"select",28),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(4).currentSubitemId=o}),e.TgZ(1,"option",22),e._uU(2,"Seleccione el subitem"),e.qZA(),e.YNc(3,w,2,2,"option",23),e.qZA()}if(2&r){const t=e.oxw(4);e.Q6J("ngModel",t.currentSubitemId),e.xp6(3),e.Q6J("ngForOf",t.currentSubitems)}}const D=function(r,n,t,i){return{"bg-color8":r,"bg-color1":n,"bg-color6":t,"bg-color7":i}};function q(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",31),e._uU(1),e.TgZ(2,"fa-icon",32),e.NdJ("click",function(o){const d=e.CHM(t).$implicit;return e.oxw(5).confirm(o,d)}),e.qZA()()}if(2&r){const t=n.$implicit,i=e.oxw(5);e.Q6J("ngClass",e.l5B(3,D,"subcategory"===t.type,"category"===t.type,"item"==t.type,"subitem"==t.type)),e.xp6(1),e.hij("",t.name," "),e.xp6(1),e.Q6J("icon",i.faTrash)}}function H(r,n){if(1&r&&(e.TgZ(0,"div",29),e.YNc(1,q,3,8,"div",30),e.qZA()),2&r){const t=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",t.currentList)}}function k(r,n){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"select",21),e.NdJ("change",function(o){return e.CHM(t),e.oxw(3).toogleItems(o)})("ngModelChange",function(o){return e.CHM(t),e.oxw(3).currentItemSectionId=o}),e.TgZ(2,"option",22),e._uU(3,"Seleccione el item"),e.qZA(),e.YNc(4,O,2,2,"option",23),e.qZA(),e.YNc(5,L,4,2,"select",24),e.TgZ(6,"button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).add2()}),e._uU(7,"Agregar"),e.qZA(),e.YNc(8,H,2,1,"div",26),e.BQk()}if(2&r){const t=e.oxw(3);e.xp6(1),e.Q6J("ngModel",t.currentItemSectionId),e.xp6(3),e.Q6J("ngForOf",t.items),e.xp6(1),e.Q6J("ngIf",(null==t.currentSubitems?null:t.currentSubitems.length)>0),e.xp6(1),e.Q6J("disabled",!(t.currentItemSectionId&&0===(null==t.currentSubitems?null:t.currentSubitems.length)||t.currentItemSectionId&&t.currentSubitemId)),e.xp6(2),e.Q6J("ngIf",t.currentList)}}function j(r,n){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div")(2,"button",20),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).backStep()}),e._uU(3,"Atr\xe1s"),e.qZA()(),e.YNc(4,$,9,5,"ng-container",16),e.YNc(5,k,9,5,"ng-container",16),e.BQk()}if(2&r){const t=e.oxw(2);e.xp6(4),e.Q6J("ngIf","categories"===t.type),e.xp6(1),e.Q6J("ngIf","sections"===t.type)}}function z(r,n){if(1&r&&(e.TgZ(0,"div",14)(1,"h5",15),e._uU(2),e.qZA(),e.YNc(3,E,6,0,"ng-container",16),e.YNc(4,j,6,2,"ng-container",16),e.qZA()),2&r){const t=e.oxw();e.xp6(2),e.Oqu(t.currentProfileProvider.comercialName),e.xp6(1),e.Q6J("ngIf",1===t.step),e.xp6(1),e.Q6J("ngIf",2===t.step)}}const R=[{path:"",component:(()=>{class r{constructor(t,i,o,l,d,b,G,V){this.categorySubcategoryProfileService=t,this.general=i,this.messageService=o,this.confirmationService=l,this.profileProviderService=d,this.categoryService=b,this.subcategoryService=G,this.sectionService=V,this.currentList=[],this.currentItem={name:"",categorySubcategoryId:"",type:"",profileProviderId:""},this.displayModal=!1,this.invalid=new y,this.currentCategory="",this.currentSubcategory="",this.currentItemSectionId="",this.currentSubitemId="",this.faTrash=f.$aW,this.step=1}ngOnInit(){this.getProfiles(),this.getCategories(),this.getSubcategories(),this.getSections()}getProfiles(){this.profileProviderService.getAllCompanies().subscribe(t=>{this.profileProviders=t.data},t=>{this.messageService.add({severity:"error",summary:"Error",detail:t.message})})}getCategories(){this.categoryService.get().subscribe(t=>{this.categories=t.data},t=>{this.messageService.add({severity:"error",summary:"Error",detail:t.message})})}getSubcategories(){this.subcategoryService.get().subscribe(t=>{this.subcategories=t.data},t=>{this.messageService.add({severity:"error",summary:"Error",detail:t.message})})}getCategoriesAndSubcategoriesByProfileProfiderId(t){this.categorySubcategoryProfileService.getByProfileProviderId(t).subscribe(i=>{this.currentList=i.data},i=>{this.messageService.add({severity:"error",summary:"Error",detail:i.message})})}reset(){this.currentList=null}addEdit(t=null){t?(this.currentProfileProvider=t,this.getCategoriesAndSubcategoriesByProfileProfiderId(t._id)):this.reset(),this.displayModal=!0}toogleSubcategories(){this.currentSubcategories=null,this.currentCategory&&(this.currentSubcategories=this.subcategories.filter(t=>t.categoryId===this.currentCategory))}add(){if(this.currentCategory&&0===this.currentSubcategories.length||this.currentCategory&&this.currentSubcategory){const t={profileProviderId:this.currentProfileProvider._id,categorySubcategoryId:this.currentSubcategory?this.currentSubcategory:this.currentCategory,type:this.currentSubcategory?"subcategory":"category",name:this.currentSubcategory?this.subcategories.filter(i=>i._id===this.currentSubcategory)[0].name:this.categories.filter(i=>i._id===this.currentCategory)[0].name};this.categorySubcategoryProfileService.save(t).subscribe(i=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:i.message}),this.getCategoriesAndSubcategoriesByProfileProfiderId(this.currentProfileProvider._id)},i=>{this.messageService.add({severity:"error",summary:"Error",detail:i.message})})}else this.messageService.add({severity:"error",summary:"Error",detail:"Debe completar todos los campos"})}add2(){var t;if(this.currentItemSectionId&&0===(null===(t=this.currentSubitems)||void 0===t?void 0:t.length)||this.currentItemSectionId&&this.currentSubitemId){const i={profileProviderId:this.currentProfileProvider._id,categorySubcategoryId:this.currentSubitemId?this.currentSubitemId:this.currentItemSectionId,type:this.currentSubitemId?"subitem":"item",name:this.currentSubitemId?this.currentSubitems.find(o=>o._id===this.currentSubitemId).name:this.items.find(o=>o.item._id===this.currentItemSectionId).item.name};this.categorySubcategoryProfileService.save(i).subscribe(o=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:o.message}),this.getCategoriesAndSubcategoriesByProfileProfiderId(this.currentProfileProvider._id),this.reset2()},o=>{this.messageService.add({severity:"error",summary:"Error",detail:o.message})})}else this.messageService.add({severity:"error",summary:"Error",detail:"Debe completar todos los campos"})}reset2(){this.currentCategory="",this.currentItemSectionId="",this.currentSubitemId="",this.currentSubcategory=""}confirm(t,i){this.confirmationService.confirm({target:t.target,message:"\xbfSeg\xfaro que desea eliminar?",icon:"pi pi-exclamation-triangle",acceptLabel:"S\xed",rejectLabel:"No",accept:()=>{this.delete(i)},reject:()=>{}})}delete(t){this.categorySubcategoryProfileService.delete(t._id).subscribe(i=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:i.message}),this.getCategoriesAndSubcategoriesByProfileProfiderId(t.profileProviderId)},i=>{this.messageService.add({severity:"error",summary:"Error",detail:i.message})})}getSections(){this.sectionService.get().subscribe(t=>{this.sections=t.data,this.items=[].concat.apply([],this.sections.map(i=>i.items))})}nextStep(t){this.type=t,this.step=2}backStep(){this.step=1}toogleItems(t){this.currentSubitems=null;const i=t.target.value;this.currentSubitems=[].concat.apply([],this.items.map(o=>{if(o.item._id===i)return o.subitems})).filter(o=>o)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(u.L),e.Y36(v.m),e.Y36(c.ez),e.Y36(c.YP),e.Y36(s.n),e.Y36(h.H),e.Y36(T.K),e.Y36(Z.l))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-category-subcategory-profile"]],decls:9,vars:9,consts:[[1,"p-5"],[1,"row","m-0","justify-content-between","align-items-center"],["class","mt-5",4,"ngIf"],["header","",3,"visible","modal","styleClass","baseZIndex","autoZIndex","draggable","resizable","visibleChange"],[1,"w-100","d-flex","m-0","justify-content-center","pb-5"],["class","row m-0 p-0 flex-column col-12 col-md-6",4,"ngIf"],["header","Confirmaci\xf3n","icon","pi pi-exclamation-triangle"],[1,"mt-5"],["header","Lista de perfiles","filterPlaceholder","Buscar por nombre","filterBy","name",3,"value","listStyle","dragdrop"],["pTemplate","item","class","mt-3"],["draggable","true",1,"item-list","row","justify-content-between","align-items-center","m-0","pl-2","pr-2"],[1,"font-700"],[1,"ml-3"],[1,"btn2","p-0","pl-3","pr-3",3,"click"],[1,"row","m-0","p-0","flex-column","col-12","col-md-6"],[1,"text-center"],[4,"ngIf"],[1,"d-flex","justify-content-center","mt-2"],[1,"btn1","px-5","py-3",3,"click"],[1,"btn1","px-5","py-3","ml-2",3,"click"],[1,"btn2","px-3","py-2","mb-3",3,"click"],[1,"mt-4",3,"ngModel","change","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","mt-2",3,"ngModel","ngModelChange",4,"ngIf"],[1,"btn1","mt-2",3,"disabled","click"],["class","mt-3 d-flex justify-content-center align-items-center flex-wrap border rounded",4,"ngIf"],[3,"value"],[1,"mt-2",3,"ngModel","ngModelChange"],[1,"mt-3","d-flex","justify-content-center","align-items-center","flex-wrap","border","rounded"],["class","m-2 p-2 px-4 rounded",3,"ngClass",4,"ngFor","ngForOf"],[1,"m-2","p-2","px-4","rounded",3,"ngClass"],[1,"f-15","text-color4","cursor",3,"icon","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4"),e._uU(3,"Agregar categor\xedas y/o subcategor\xedas"),e.qZA()(),e.YNc(4,A,3,4,"div",2),e.qZA(),e.TgZ(5,"p-dialog",3),e.NdJ("visibleChange",function(l){return i.displayModal=l}),e.TgZ(6,"div",4),e.YNc(7,z,5,3,"div",5),e.qZA()(),e._UZ(8,"p-confirmDialog",6)),2&t&&(e.xp6(4),e.Q6J("ngIf",i.profileProviders),e.xp6(1),e.Q6J("visible",i.displayModal)("modal",!0)("styleClass","modalLogin")("baseZIndex",1e4)("autoZIndex",!1)("draggable",!1)("resizable",!1),e.xp6(2),e.Q6J("ngIf",i.currentProfileProvider))},directives:[g.O5,S.F,c.jx,C.V,_.EJ,_.JJ,_.On,_.YN,_.Kr,g.sg,g.mk,x.BN,P.Q],styles:[""]}),r})()}];let K=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[p.Bz.forChild(R)],p.Bz]}),r})(),W=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[c.YP],imports:[[g.ez,K,C.S,_.u5,P.D,S.C,x.uH]]}),r})()},1724:(I,m,a)=>{a.d(m,{n:()=>e});var g=a(5e3),p=a(5830),y=a(1864),f=a(2542);let e=(()=>{class u{constructor(c,s,h){this.api=c,this.general=s,this.authService=h,this.model="profile-provider"}save(c){return this.api.api({service:c._id?`update-${this.model}/${c._id}`:`save-${this.model}`,type:c._id?"patch":"post",data:c})}search(c){return this.api.api({service:`search-${this.model}`,type:"post",data:c})}get(){const c={service:`get-${this.model}-by-user-id/${this.authService.getUserID()}`,type:"get",data:null};return this.api.api(c)}getById(c){return this.api.api({service:`get-${this.model}-by-id/${c}`,type:"get",data:null})}getByUserId(c){return this.api.api({service:`get-${this.model}-by-user-id/${c}`,type:"get",data:null})}getAllCompanies(){return this.api.api({service:`get-${this.model}`,type:"get",data:null})}delete(c){return this.api.api({service:`delete-${this.model}/${c}`,type:"delete",data:null})}getUrlByProfileProviderId(c){return this.api.api({service:`get-url-by-profile-provider-id/${c}`,type:"get",data:null})}getByArray(c){return this.api.api({service:`get-${this.model}-by-array`,type:"post",data:{profileProviders:c}})}getUrlByUrl(c){return this.api.api({service:`get-url-by-url/${c}`,type:"get",data:null})}}return u.\u0275fac=function(c){return new(c||u)(g.LFG(p.s),g.LFG(y.m),g.LFG(f.e))},u.\u0275prov=g.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);