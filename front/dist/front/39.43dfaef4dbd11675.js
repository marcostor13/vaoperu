(self.webpackChunkfront=self.webpackChunkfront||[]).push([[39],{39:(_e,vt,H)=>{"use strict";H.r(vt),H.d(vt,{AddEditModule:()=>P});var Z=H(9808),xt=H(9812);class At{constructor(){this._id="",this.name="",this.profileProviderId="",this.description="",this.images=[],this.price=null}}class Bt{constructor(){this.name=!1,this.profileProviderId=!1,this.description=!1,this.images=!1,this.price=!1}}var n=H(5e3),it=H(1864),kt=H(9783),z=H(1460),F=H(1724),G=H(4182),ee=H(986),It=H(5315),tt=H(4763),Zt=H.n(tt);const Ft=["image"];function B(c,g){1&c&&(n.TgZ(0,"div",6),n._UZ(1,"div",7),n.qZA())}function Qt(c,g){if(1&c&&(n.TgZ(0,"div",8),n._uU(1),n.qZA()),2&c){const t=n.oxw();n.xp6(1),n.Oqu(t.loadImageErrorText)}}class rt{constructor(){}}rt.\u0275fac=function(g){return new(g||rt)},rt.\u0275prov=n.Yz7({token:rt,factory:rt.\u0275fac,providedIn:"root"}),rt.ngInjectableDef=(0,n.Ez6)({factory:function(){return new rt},token:rt,providedIn:"root"});let ie=(()=>{class c{constructor(){this.cropperOptions={},this.export=new n.vpe,this.ready=new n.vpe,this.isLoading=!0}ngOnInit(){}imageLoaded(t){this.loadError=!1;const i=t.target;this.imageElement=i,this.cropperOptions.checkCrossOrigin&&(i.crossOrigin="anonymous"),i.addEventListener("ready",()=>{this.ready.emit(!0),this.isLoading=!1,this.cropbox&&this.cropper.setCropBoxData(this.cropbox)});let s=NaN;if(this.settings){const{width:o,height:l}=this.settings;s=o/l}this.cropperOptions=Object.assign({aspectRatio:s,movable:!1,scalable:!1,zoomable:!1,viewMode:1,checkCrossOrigin:!0},this.cropperOptions),this.cropper&&(this.cropper.destroy(),this.cropper=void 0),this.cropper=new(Zt())(i,this.cropperOptions)}imageLoadError(t){this.loadError=!0,this.isLoading=!1}exportCanvas(t){const i=this.cropper.getImageData(),s=this.cropper.getCropBoxData(),o=this.cropper.getCroppedCanvas(),l={imageData:i,cropData:s};new Promise(C=>{if(t)return C({dataUrl:o.toDataURL("image/png")});o.toBlob(M=>C({blob:M}))}).then(C=>{this.export.emit(Object.assign(l,C))})}}return c.\u0275fac=function(t){return new(t||c)},c.\u0275cmp=n.Xpm({type:c,selectors:[["angular-cropper"]],viewQuery:function(t,i){if(1&t&&n.Gf(Ft,5),2&t){let s;n.iGM(s=n.CRH())&&(i.image=s.first)}},inputs:{cropperOptions:"cropperOptions",imageUrl:"imageUrl",settings:"settings",cropbox:"cropbox",loadImageErrorText:"loadImageErrorText"},outputs:{export:"export",ready:"ready"},decls:6,vars:3,consts:[[1,"cropper-wrapper"],["class","loading-block",4,"ngIf"],["class","alert alert-warning",4,"ngIf"],[1,"cropper"],["alt","image",3,"src","load","error"],["image",""],[1,"loading-block"],[1,"spinner"],[1,"alert","alert-warning"]],template:function(t,i){1&t&&(n.TgZ(0,"div",0),n.YNc(1,B,2,0,"div",1),n.YNc(2,Qt,2,1,"div",2),n.TgZ(3,"div",3)(4,"img",4,5),n.NdJ("load",function(o){return i.imageLoaded(o)})("error",function(o){return i.imageLoadError(o)}),n.qZA()()()),2&t&&(n.xp6(1),n.Q6J("ngIf",i.isLoading),n.xp6(1),n.Q6J("ngIf",i.loadError),n.xp6(2),n.Q6J("src",i.imageUrl,n.LSH))},directives:[Z.O5],styles:[":host{display:block}.cropper img{max-width:100%;max-height:100%;height:auto}.cropper-wrapper{position:relative;min-height:80px}.cropper-wrapper .loading-block{position:absolute;top:0;left:0;width:100%;height:100%}.cropper-wrapper .loading-block .spinner{width:31px;height:31px;margin:0 auto;border:2px solid rgba(97,100,193,.98);border-radius:50%;border-left-color:transparent;border-right-color:transparent;-webkit-animation:425ms linear infinite cssload-spin;position:absolute;top:calc(50% - 15px);left:calc(50% - 15px);animation:425ms linear infinite cssload-spin}@-webkit-keyframes cssload-spin{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes cssload-spin{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}/*!\n * Cropper.js v1.4.1\n * https://fengyuanchen.github.io/cropperjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2018-07-15T09:54:43.167Z\n */.cropper-container{direction:ltr;font-size:0;line-height:0;position:relative;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.cropper-container img{display:block;height:100%;image-orientation:0deg;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;width:100%}.cropper-canvas,.cropper-crop-box,.cropper-drag-box,.cropper-modal,.cropper-wrap-box{bottom:0;left:0;position:absolute;right:0;top:0}.cropper-canvas,.cropper-wrap-box{overflow:hidden}.cropper-drag-box{background-color:#fff;opacity:0}.cropper-modal{background-color:#000;opacity:.5}.cropper-view-box{display:block;height:100%;outline:#39f solid 1px;overflow:hidden;width:100%}.cropper-dashed{border:0 dashed #eee;display:block;opacity:.5;position:absolute}.cropper-dashed.dashed-h{border-bottom-width:1px;border-top-width:1px;height:calc(100% / 3);left:0;top:calc(100% / 3);width:100%}.cropper-dashed.dashed-v{border-left-width:1px;border-right-width:1px;height:100%;left:calc(100% / 3);top:0;width:calc(100% / 3)}.cropper-center{display:block;height:0;left:50%;opacity:.75;position:absolute;top:50%;width:0}.cropper-center:after,.cropper-center:before{background-color:#eee;content:' ';display:block;position:absolute}.cropper-center:before{height:1px;left:-3px;top:0;width:7px}.cropper-center:after{height:7px;left:0;top:-3px;width:1px}.cropper-face,.cropper-line,.cropper-point{display:block;height:100%;opacity:.1;position:absolute;width:100%}.cropper-face{background-color:#fff;left:0;top:0}.cropper-line{background-color:#39f}.cropper-line.line-e{cursor:ew-resize;right:-3px;top:0;width:5px}.cropper-line.line-n{cursor:ns-resize;height:5px;left:0;top:-3px}.cropper-line.line-w{cursor:ew-resize;left:-3px;top:0;width:5px}.cropper-line.line-s{bottom:-3px;cursor:ns-resize;height:5px;left:0}.cropper-point{background-color:#39f;height:5px;opacity:.75;width:5px}.cropper-point.point-e{cursor:ew-resize;margin-top:-3px;right:-3px;top:50%}.cropper-point.point-n{cursor:ns-resize;left:50%;margin-left:-3px;top:-3px}.cropper-point.point-w{cursor:ew-resize;left:-3px;margin-top:-3px;top:50%}.cropper-point.point-s{bottom:-3px;cursor:s-resize;left:50%;margin-left:-3px}.cropper-point.point-ne{cursor:nesw-resize;right:-3px;top:-3px}.cropper-point.point-nw{cursor:nwse-resize;left:-3px;top:-3px}.cropper-point.point-sw{bottom:-3px;cursor:nesw-resize;left:-3px}.cropper-point.point-se{bottom:-3px;cursor:nwse-resize;height:20px;opacity:1;right:-3px;width:20px}@media (min-width:768px){.cropper-point.point-se{height:15px;width:15px}}@media (min-width:992px){.cropper-point.point-se{height:10px;width:10px}}@media (min-width:1200px){.cropper-point.point-se{height:5px;opacity:.75;width:5px}}.cropper-point.point-se:before{background-color:#39f;bottom:-50%;content:' ';display:block;height:200%;opacity:0;position:absolute;right:-50%;width:200%}.cropper-invisible{opacity:0}.cropper-bg{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC)}.cropper-hide{display:block;height:0;position:absolute;width:0}.cropper-hidden{display:none!important}.cropper-move{cursor:move}.cropper-crop{cursor:crosshair}.cropper-disabled .cropper-drag-box,.cropper-disabled .cropper-face,.cropper-disabled .cropper-line,.cropper-disabled .cropper-point{cursor:not-allowed}"],encapsulation:2}),c})(),re=(()=>{class c{}return c.\u0275fac=function(t){return new(t||c)},c.\u0275mod=n.oAB({type:c}),c.\u0275inj=n.cJS({imports:[[Z.ez]]}),c})();var st=H(7307);const dt=["angularCropper"];function yt(c,g){if(1&c&&(n.TgZ(0,"option",27),n._uU(1),n.qZA()),2&c){const t=g.$implicit;n.Q6J("value",t._id),n.xp6(1),n.hij(" ",t.comercialName," ")}}const at=function(c){return{"background-image":c}};function St(c,g){if(1&c){const t=n.EpF();n.TgZ(0,"div",30)(1,"div",31),n.NdJ("click",function(){const o=n.CHM(t).$implicit;return n.oxw(2).removeImage(o)}),n._UZ(2,"i",32),n.qZA()()}if(2&c){const t=g.$implicit,i=n.oxw(2);n.Q6J("ngStyle",n.VKq(1,at,"url("+i.getBlobOrImage(t)+")"))}}function Et(c,g){if(1&c&&(n.TgZ(0,"div",28),n.YNc(1,St,3,3,"div",29),n.qZA()),2&c){const t=n.oxw();n.xp6(1),n.Q6J("ngForOf",t.currentImages)}}function Tt(c,g){if(1&c){const t=n.EpF();n.TgZ(0,"button",33),n.NdJ("click",function(s){n.CHM(t);const o=n.oxw();return o.confirm(s,o.currentItem)}),n._uU(1,"Eliminar"),n.qZA()}}const ht=function(c){return{invalid:c}},Xt=function(c){return{width:c}},J=[{path:"",component:(()=>{class c{constructor(t,i,s,o,l,m,C){this.route=t,this.generalService=i,this.messageService=s,this.promotionsService=o,this.router=l,this.profileProviderService=m,this.confirmationService=C,this.displayModal=!1,this.invalid=new Bt,this.currentItem=new At,this.currentImages=[],this.images=[],this.config={aspectRatio:1,dragMode:"none",autoCropArea:100},this.deleteImages=[],this.promotionId=this.route.snapshot.paramMap.get("id")}ngOnInit(){this.getCompanies(),this.getPromotion()}getPromotion(){this.promotionId&&this.promotionsService.getById(this.promotionId).subscribe(t=>{this.currentItem=t.data,this.currentItem?this.replaceCurrentImagesByUrls():this.router.navigate(["/admin/promotions"])},t=>{this.messageService.add({severity:"error",summary:"Error",detail:t.error.message})})}getCompanies(){this.profileProviderService.getAllCompanies().subscribe(t=>{this.profileProviders=t.data},t=>{this.messageService.add({severity:"error",summary:"Error",detail:t.error.message})})}onUpload(t,i){t.currentFiles.map(s=>{const o=new FileReader;o.readAsDataURL(s),o.onload=()=>{this.currentFile=s,this.openModalCrroper(o.result),this.fileUpload=i}})}moveCropper(){this.dataImage=this.angularCropper.cropper.crop().getCroppedCanvas({width:400,height:400}).toDataURL()}openModalCrroper(t){this.imageUrl=t,this.dataImage=t,this.displayModal=!0}cropper(){this.currentImages=[...this.currentImages,{file:this.currentFile,blob:this.dataImage,url:null}],this.displayModal=!1,this.fileUpload.clear()}uploadImages(){this.generalService.isLoad(!0),this.generalService.uploadImageMultipleByBlob(this.currentImages,"promotions/").subscribe(t=>{this.generalService.isLoad(!1),"number"==typeof t?this.uploadPercent=t:(this.currentItem.images=[...this.currentItem.images,t],this.add())})}presave(){var t;this.validate()||((null===(t=this.deleteImages)||void 0===t?void 0:t.length)>0?this.generalService.deleteImages(this.deleteImages.map(i=>i.url)).then(()=>{this.uploadImages()}).catch(i=>{this.messageService.add({severity:"error",summary:"Error",detail:"Error al eliminar la imagenes"})}):this.uploadImages())}resetForm(){this.currentItem=new At,this.currentImages=[]}add(){this.currentItem._id||delete this.currentItem._id,this.promotionsService.save(this.currentItem).subscribe(t=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:t.message}),this.replaceCurrentImagesByUrls(),this.promotionId||this.resetForm()},t=>{this.messageService.add({severity:"error",summary:"Error",detail:t.error.message})})}replaceCurrentImagesByUrls(){this.currentImages=[...this.currentItem.images.map(t=>({file:null,blob:null,url:t}))]}removeImage(t){t.url?(this.deleteImages.push(t),this.currentItem.images=this.currentItem.images.filter(i=>i!==t.url),this.replaceCurrentImagesByUrls()):this.currentImages=this.currentImages.filter(i=>i!==t)}validate(){this.invalid=new Bt;let t=!1;return this.currentItem.name||(t=!0,this.invalid.name=!0),this.currentItem.profileProviderId||(t=!0,this.invalid.profileProviderId=!0),this.currentItem.description||(t=!0,this.invalid.description=!0),(!this.currentImages||0===this.currentImages.length)&&(t=!0,this.invalid.images=!0),t&&this.messageService.add({severity:"error",summary:"Error",detail:"Revise los campos"}),t}resetUploadButton(){this.fileUpload.clear()}getBlobOrImage(t){return t.blob||t.url}confirm(t,i){this.confirmationService.confirm({target:t.target,message:"\xbfSeg\xfaro que desea eliminar?",icon:"pi pi-exclamation-triangle",acceptLabel:"S\xed",rejectLabel:"No",accept:()=>{this.delete(i)}})}preDelete(t){var i;(null===(i=t.images)||void 0===i?void 0:i.length)>0?this.generalService.deleteImages(t.images).then(()=>{this.currentImages=[],this.delete(t)}).catch(s=>{this.messageService.add({severity:"error",summary:"Error",detail:"Error al eliminar la imagen"}),this.delete(t)}):this.delete(t)}delete(t){this.promotionsService.delete(t._id).subscribe(i=>{this.generalService.c("Delete",i),this.messageService.add({severity:"success",summary:"Mensaje",detail:i.message}),this.router.navigate(["admin/promotions"])},i=>{this.messageService.add({severity:"error",summary:"Error",detail:i.error.message})})}back(){this.router.navigate(["/admin/promotions"])}}return c.\u0275fac=function(t){return new(t||c)(n.Y36(xt.gz),n.Y36(it.m),n.Y36(kt.ez),n.Y36(z.q),n.Y36(xt.F0),n.Y36(F.n),n.Y36(kt.YP))},c.\u0275cmp=n.Xpm({type:c,selectors:[["app-add-edit"]],viewQuery:function(t,i){if(1&t&&n.Gf(dt,5),2&t){let s;n.iGM(s=n.CRH())&&(i.angularCropper=s.first)}},decls:32,vars:44,consts:[[1,"p-5","col-12","col-md-6"],[1,"btn2",3,"click"],[1,"text-color1","mt-5"],["type","text","placeholder","Nombre",1,"mt-5",3,"ngClass","ngModel","keyup","ngModelChange"],["placeholder","Descripci\xf3n",1,"mt-2",3,"ngClass","ngModel","keyup","ngModelChange"],[1,"mt-1",3,"ngClass","ngModel","change","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","number","placeholder","S/ Precio (opcional)",1,"mt-2",3,"ngModel","ngModelChange"],[1,"mt-5",3,"ngClass"],["styleClass","col-12 btn2","mode","basic","accept","image/*","uploadLabel","Subir","cancelLabel","Cancelar","invalidFileSizeMessageDetail","El tama\xf1o m\xe1ximo es {0}.",3,"fileLimit","maxFileSize","chooseLabel","multiple","files","auto","onSelect"],["fileUpload",""],[1,"loading"],["class","row m-0 justify-content-center align-items-center mt-2",4,"ngIf"],[1,"row","justify-content-center","mt-4"],[1,"btn1","mr-2",3,"click"],["class","btn3 bg-color6",3,"click",4,"ngIf"],["header","",3,"visible","modal","styleClass","baseZIndex","autoZIndex","draggable","resizable","visibleChange","onHide"],[1,"d-flex","justify-content-center"],[1,"container-cropper","p-3"],[3,"cropperOptions","imageUrl","cropmove"],["angularCropper",""],[1,"p-3"],[1,"image","image2",3,"ngStyle"],[1,"col-12","d-flex","justify-content-center"],[1,"btn1",3,"click"],[3,"autoZIndex","baseZIndex"],[3,"value"],[1,"row","m-0","justify-content-center","align-items-center","mt-2"],["class","bg-color6 image image-miniature",3,"ngStyle",4,"ngFor","ngForOf"],[1,"bg-color6","image","image-miniature",3,"ngStyle"],[1,"delete",3,"click"],[1,"pi","pi-trash","text-white","f-20"],[1,"btn3","bg-color6",3,"click"]],template:function(t,i){if(1&t){const s=n.EpF();n.TgZ(0,"div",0)(1,"button",1),n.NdJ("click",function(){return i.back()}),n._uU(2,"Atr\xe1s"),n.qZA(),n.TgZ(3,"h4",2),n._uU(4),n.qZA(),n.TgZ(5,"input",3),n.NdJ("keyup",function(){return i.invalid.name=!1})("ngModelChange",function(l){return i.currentItem.name=l}),n.qZA(),n.TgZ(6,"textarea",4),n.NdJ("keyup",function(){return i.invalid.description=!1})("ngModelChange",function(l){return i.currentItem.description=l}),n.qZA(),n.TgZ(7,"select",5),n.NdJ("change",function(){return i.invalid.profileProviderId=!1})("ngModelChange",function(l){return i.currentItem.profileProviderId=l}),n.TgZ(8,"option",6),n._uU(9,"Seleccionar negocio"),n.qZA(),n.YNc(10,yt,2,2,"option",7),n.qZA(),n.TgZ(11,"input",8),n.NdJ("ngModelChange",function(l){return i.currentItem.price=l}),n.qZA(),n.TgZ(12,"div",9)(13,"p-fileUpload",10,11),n.NdJ("onSelect",function(l){n.CHM(s);const m=n.MAs(14);return i.onUpload(l,m),i.invalid.images=!1}),n.qZA(),n._UZ(15,"div",12),n.qZA(),n.YNc(16,Et,2,1,"div",13),n.TgZ(17,"div",14)(18,"button",15),n.NdJ("click",function(){return i.presave()}),n._uU(19,"Guardar"),n.qZA(),n.YNc(20,Tt,2,0,"button",16),n.qZA()(),n.TgZ(21,"p-dialog",17),n.NdJ("visibleChange",function(l){return i.displayModal=l})("onHide",function(){return i.resetUploadButton()}),n.TgZ(22,"div",18)(23,"div",19)(24,"angular-cropper",20,21),n.NdJ("cropmove",function(){return i.moveCropper()}),n.qZA()(),n.TgZ(26,"div",22),n._UZ(27,"div",23),n.qZA()(),n.TgZ(28,"div",24)(29,"button",25),n.NdJ("click",function(){return i.cropper()}),n._uU(30,"Subir"),n.qZA()()(),n._UZ(31,"p-confirmPopup",26)}2&t&&(n.xp6(4),n.hij("",i.promotionId?"Editar":"Agregar"," promoci\xf3n"),n.xp6(1),n.Q6J("ngClass",n.VKq(32,ht,i.invalid.name))("ngModel",i.currentItem.name),n.xp6(1),n.Q6J("ngClass",n.VKq(34,ht,i.invalid.description))("ngModel",i.currentItem.description),n.xp6(1),n.Q6J("ngClass",n.VKq(36,ht,i.invalid.profileProviderId))("ngModel",i.currentItem.profileProviderId),n.xp6(3),n.Q6J("ngForOf",i.profileProviders),n.xp6(1),n.Q6J("ngModel",i.currentItem.price),n.xp6(1),n.Q6J("ngClass",n.VKq(38,ht,i.invalid.images)),n.xp6(1),n.Q6J("fileLimit",1)("maxFileSize",2048e3)("chooseLabel","Subir imagen")("multiple",!1)("files",i.images)("auto",!1),n.xp6(2),n.Akn(n.VKq(40,Xt,i.uploadPercent+"%")),n.xp6(1),n.Q6J("ngIf",(null==i.currentImages?null:i.currentImages.length)>0),n.xp6(4),n.Q6J("ngIf",i.currentItem._id),n.xp6(1),n.Q6J("visible",i.displayModal)("modal",!0)("styleClass","modalLogin")("baseZIndex",1e4)("autoZIndex",!0)("draggable",!1)("resizable",!1),n.xp6(3),n.Q6J("cropperOptions",i.config)("imageUrl",i.imageUrl),n.xp6(3),n.Q6J("ngStyle",n.VKq(42,at,"url("+i.dataImage+")")),n.xp6(4),n.Q6J("autoZIndex",!1)("baseZIndex",1000001))},directives:[G.Fj,Z.mk,G.JJ,G.On,G.EJ,G.YN,G.Kr,Z.sg,G.wV,ee.p,Z.O5,Z.PC,It.V,ie,st.P],styles:[".container-cropper[_ngcontent-%COMP%]{max-width:300px}.image2[_ngcontent-%COMP%]{min-width:300px;min-height:300px}.image-miniature[_ngcontent-%COMP%]{min-height:100px;min-width:100px}"]}),c})()}];let ae=(()=>{class c{}return c.\u0275fac=function(t){return new(t||c)},c.\u0275mod=n.oAB({type:c}),c.\u0275inj=n.cJS({imports:[[xt.Bz.forChild(J)],xt.Bz]}),c})();H(2313);let pt=(()=>{class c{}return c.\u0275fac=function(t){return new(t||c)},c.\u0275mod=n.oAB({type:c}),c.\u0275inj=n.cJS({imports:[[Z.ez]]}),c})(),P=(()=>{class c{}return c.\u0275fac=function(t){return new(t||c)},c.\u0275mod=n.oAB({type:c}),c.\u0275inj=n.cJS({imports:[[Z.ez,ae,It.S,ee.O,pt,re,G.u5,st.n]]}),c})()},1724:(_e,vt,H)=>{"use strict";H.d(vt,{n:()=>n});var Z=H(5e3),xt=H(5830),At=H(1864),Bt=H(2542);let n=(()=>{class it{constructor(z,F,G){this.api=z,this.general=F,this.authService=G,this.model="profile-provider"}save(z){return this.api.api({service:z._id?`update-${this.model}/${z._id}`:`save-${this.model}`,type:z._id?"patch":"post",data:z})}get(){const z={service:`get-${this.model}-by-user-id/${this.authService.getUserID()}`,type:"get",data:null};return this.api.api(z)}getById(z){return this.api.api({service:`get-${this.model}-by-id/${z}`,type:"get",data:null})}getByUserId(z){return this.api.api({service:`get-${this.model}-by-user-id/${z}`,type:"get",data:null})}getAllCompanies(){return this.api.api({service:`get-${this.model}`,type:"get",data:null})}delete(z){return this.api.api({service:`delete-${this.model}/${z}`,type:"delete",data:null})}getUrlByProfileProviderId(z){return this.api.api({service:`get-url-by-profile-provider-id/${z}`,type:"get",data:null})}getByArray(z){return this.api.api({service:`get-${this.model}-by-array`,type:"post",data:{profileProviders:z}})}getUrlByUrl(z){return this.api.api({service:`get-url-by-url/${z}`,type:"get",data:null})}}return it.\u0275fac=function(z){return new(z||it)(Z.LFG(xt.s),Z.LFG(At.m),Z.LFG(Bt.e))},it.\u0275prov=Z.Yz7({token:it,factory:it.\u0275fac,providedIn:"root"}),it})()},4763:function(_e){_e.exports=function(){"use strict";function vt(h,e){var a=Object.keys(h);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(h);e&&(r=r.filter(function(u){return Object.getOwnPropertyDescriptor(h,u).enumerable})),a.push.apply(a,r)}return a}function H(h){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?vt(Object(a),!0).forEach(function(r){n(h,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(a)):vt(Object(a)).forEach(function(r){Object.defineProperty(h,r,Object.getOwnPropertyDescriptor(a,r))})}return h}function Z(h){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(h)}function xt(h,e){if(!(h instanceof e))throw new TypeError("Cannot call a class as a function")}function At(h,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(h,r.key,r)}}function n(h,e,a){return e in h?Object.defineProperty(h,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):h[e]=a,h}function it(h){return function kt(h){if(Array.isArray(h))return G(h)}(h)||function z(h){if("undefined"!=typeof Symbol&&null!=h[Symbol.iterator]||null!=h["@@iterator"])return Array.from(h)}(h)||function F(h,e){if(h){if("string"==typeof h)return G(h,e);var a=Object.prototype.toString.call(h).slice(8,-1);if("Object"===a&&h.constructor&&(a=h.constructor.name),"Map"===a||"Set"===a)return Array.from(h);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return G(h,e)}}(h)||function ee(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(h,e){(null==e||e>h.length)&&(e=h.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=h[a];return r}var It="undefined"!=typeof window&&void 0!==window.document,tt=It?window:{},Zt=!(!It||!tt.document.documentElement)&&"ontouchstart"in tt.document.documentElement,Ft=!!It&&"PointerEvent"in tt,B="cropper",at="n",St="ne",Et="nw",Tt="se",ht="sw",Xt="".concat(B,"-crop"),be="".concat(B,"-disabled"),J="".concat(B,"-hidden"),ae="".concat(B,"-hide"),jt="".concat(B,"-invisible"),Jt="".concat(B,"-modal"),Nt="".concat(B,"-move"),Wt="".concat(B,"Action"),Vt="".concat(B,"Preview"),ne="crop",oe="crop",se="cropend",he="cropmove",Lt="cropstart",ce="dblclick",Ce=Ft?"pointerdown":Zt?"touchstart":"mousedown",Ae=Ft?"pointermove":Zt?"touchmove":"mousemove",Ie=Ft?"pointerup pointercancel":Zt?"touchend touchcancel":"mouseup",pe="zoom",Re="image/jpeg",Oe=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,De=/^data:/,ze=/^data:image\/jpeg;base64,/,He=/^img|canvas$/i,Be={viewMode:0,dragMode:ne,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},ke=Number.isNaN||tt.isNaN;function I(h){return"number"==typeof h&&!ke(h)}var ue=function(e){return e>0&&e<1/0};function Gt(h){return void 0===h}function ut(h){return"object"===Z(h)&&null!==h}var Ne=Object.prototype.hasOwnProperty;function wt(h){if(!ut(h))return!1;try{var e=h.constructor,a=e.prototype;return e&&a&&Ne.call(a,"isPrototypeOf")}catch(r){return!1}}function V(h){return"function"==typeof h}var je=Array.prototype.slice;function ge(h){return Array.from?Array.from(h):je.call(h)}function W(h,e){return h&&V(e)&&(Array.isArray(h)||I(h.length)?ge(h).forEach(function(a,r){e.call(h,a,r,h)}):ut(h)&&Object.keys(h).forEach(function(a){e.call(h,h[a],a,h)})),h}var k=Object.assign||function(e){for(var a=arguments.length,r=new Array(a>1?a-1:0),u=1;u<a;u++)r[u-1]=arguments[u];return ut(e)&&r.length>0&&r.forEach(function(p){ut(p)&&Object.keys(p).forEach(function(d){e[d]=p[d]})}),e},We=/\.\d*(?:0|9){12}\d*$/;function _t(h){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return We.test(h)?Math.round(h*e)/e:h}var Je=/^width|height|left|top|marginLeft|marginTop$/;function pt(h,e){var a=h.style;W(e,function(r,u){Je.test(u)&&I(r)&&(r="".concat(r,"px")),a[u]=r})}function P(h,e){if(e){if(I(h.length))return void W(h,function(r){P(r,e)});if(h.classList)return void h.classList.add(e);var a=h.className.trim();a?a.indexOf(e)<0&&(h.className="".concat(a," ").concat(e)):h.className=e}}function c(h,e){if(e){if(I(h.length))return void W(h,function(a){c(a,e)});if(h.classList)return void h.classList.remove(e);h.className.indexOf(e)>=0&&(h.className=h.className.replace(e,""))}}function g(h,e,a){if(e){if(I(h.length))return void W(h,function(r){g(r,e,a)});a?P(h,e):c(h,e)}}var t=/([a-z\d])([A-Z])/g;function i(h){return h.replace(t,"$1-$2").toLowerCase()}function s(h,e){return ut(h[e])?h[e]:h.dataset?h.dataset[e]:h.getAttribute("data-".concat(i(e)))}function o(h,e,a){ut(a)?h[e]=a:h.dataset?h.dataset[e]=a:h.setAttribute("data-".concat(i(e)),a)}var m=/\s\s*/,C=function(){var h=!1;if(It){var e=!1,a=function(){},r=Object.defineProperty({},"once",{get:function(){return h=!0,e},set:function(p){e=p}});tt.addEventListener("test",a,r),tt.removeEventListener("test",a,r)}return h}();function M(h,e,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=a;e.trim().split(m).forEach(function(p){if(!C){var d=h.listeners;d&&d[p]&&d[p][a]&&(u=d[p][a],delete d[p][a],0===Object.keys(d[p]).length&&delete d[p],0===Object.keys(d).length&&delete h.listeners)}h.removeEventListener(p,u,r)})}function A(h,e,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=a;e.trim().split(m).forEach(function(p){if(r.once&&!C){var d=h.listeners,f=void 0===d?{}:d;u=function(){delete f[p][a],h.removeEventListener(p,u,r);for(var y=arguments.length,v=new Array(y),x=0;x<y;x++)v[x]=arguments[x];a.apply(h,v)},f[p]||(f[p]={}),f[p][a]&&h.removeEventListener(p,f[p][a],r),f[p][a]=u,h.listeners=f}h.addEventListener(p,u,r)})}function S(h,e,a){var r;return V(Event)&&V(CustomEvent)?r=new CustomEvent(e,{detail:a,bubbles:!0,cancelable:!0}):(r=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,a),h.dispatchEvent(r)}function D(h){var e=h.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var L=tt.location,U=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function q(h){var e=h.match(U);return null!==e&&(e[1]!==L.protocol||e[2]!==L.hostname||e[3]!==L.port)}function Rt(h){var e="timestamp=".concat((new Date).getTime());return h+(-1===h.indexOf("?")?"?":"&")+e}function Ot(h){var e=h.rotate,a=h.scaleX,r=h.scaleY,u=h.translateX,p=h.translateY,d=[];I(u)&&0!==u&&d.push("translateX(".concat(u,"px)")),I(p)&&0!==p&&d.push("translateY(".concat(p,"px)")),I(e)&&0!==e&&d.push("rotate(".concat(e,"deg)")),I(a)&&1!==a&&d.push("scaleX(".concat(a,")")),I(r)&&1!==r&&d.push("scaleY(".concat(r,")"));var f=d.length?d.join(" "):"none";return{WebkitTransform:f,msTransform:f,transform:f}}function gt(h,e){var a=h.pageX,r=h.pageY,u={endX:a,endY:r};return e?u:H({startX:a,startY:r},u)}function ot(h){var e=h.aspectRatio,a=h.height,r=h.width,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",p=ue(r),d=ue(a);if(p&&d){var f=a*e;"contain"===u&&f>r||"cover"===u&&f<r?a=r/e:r=a*e}else p?a=r/e:d&&(r=a*e);return{width:r,height:a}}function ve(h,e,a,r){var u=e.aspectRatio,p=e.naturalWidth,d=e.naturalHeight,f=e.rotate,_=void 0===f?0:f,y=e.scaleX,v=void 0===y?1:y,x=e.scaleY,w=void 0===x?1:x,T=a.aspectRatio,E=a.naturalWidth,N=a.naturalHeight,R=r.fillColor,Q=void 0===R?"transparent":R,j=r.imageSmoothingEnabled,Y=void 0===j||j,ft=r.imageSmoothingQuality,K=void 0===ft?"low":ft,b=r.maxWidth,O=void 0===b?1/0:b,X=r.maxHeight,et=void 0===X?1/0:X,mt=r.minWidth,Dt=void 0===mt?0:mt,zt=r.minHeight,Ct=void 0===zt?0:zt,lt=document.createElement("canvas"),$=lt.getContext("2d"),Ht=ot({aspectRatio:T,width:O,height:et}),we=ot({aspectRatio:T,width:Dt,height:Ct},"cover"),Ze=Math.min(Ht.width,Math.max(we.width,E)),Fe=Math.min(Ht.height,Math.max(we.height,N)),Ge=ot({aspectRatio:u,width:O,height:et}),$e=ot({aspectRatio:u,width:Dt,height:Ct},"cover"),Ke=Math.min(Ge.width,Math.max($e.width,p)),ti=Math.min(Ge.height,Math.max($e.height,d)),ii=[-Ke/2,-ti/2,Ke,ti];return lt.width=_t(Ze),lt.height=_t(Fe),$.fillStyle=Q,$.fillRect(0,0,Ze,Fe),$.save(),$.translate(Ze/2,Fe/2),$.rotate(_*Math.PI/180),$.scale(v,w),$.imageSmoothingEnabled=Y,$.imageSmoothingQuality=K,$.drawImage.apply($,[h].concat(it(ii.map(function(ri){return Math.floor(_t(ri))})))),$.restore(),lt}var $t=String.fromCharCode;var Ue=/^data:.*,/;function Pt(h){var a,e=new DataView(h);try{var r,u,p;if(255===e.getUint8(0)&&216===e.getUint8(1))for(var d=e.byteLength,f=2;f+1<d;){if(255===e.getUint8(f)&&225===e.getUint8(f+1)){u=f;break}f+=1}if(u){var y=u+10;if("Exif"===function Le(h,e,a){var r="";a+=e;for(var u=e;u<a;u+=1)r+=$t(h.getUint8(u));return r}(e,u+4,4)){var v=e.getUint16(y);if(((r=18761===v)||19789===v)&&42===e.getUint16(y+2,r)){var x=e.getUint32(y+4,r);x>=8&&(p=y+x)}}}if(p){var T,E,w=e.getUint16(p,r);for(E=0;E<w;E+=1)if(274===e.getUint16(T=p+12*E+2,r)){a=e.getUint16(T+=8,r),e.setUint16(T,1,r);break}}}catch(N){a=1}return a}var Pe={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,a=this.options,r=this.container,u=this.cropper,p=Number(a.minContainerWidth),d=Number(a.minContainerHeight);P(u,J),c(e,J);var f={width:Math.max(r.offsetWidth,p>=0?p:200),height:Math.max(r.offsetHeight,d>=0?d:100)};this.containerData=f,pt(u,{width:f.width,height:f.height}),P(e,J),c(u,J)},initCanvas:function(){var e=this.containerData,a=this.imageData,r=this.options.viewMode,u=Math.abs(a.rotate)%180==90,p=u?a.naturalHeight:a.naturalWidth,d=u?a.naturalWidth:a.naturalHeight,f=p/d,_=e.width,y=e.height;e.height*f>e.width?3===r?_=e.height*f:y=e.width/f:3===r?y=e.width/f:_=e.height*f;var v={aspectRatio:f,naturalWidth:p,naturalHeight:d,width:_,height:y};this.canvasData=v,this.limited=1===r||2===r,this.limitCanvas(!0,!0),v.width=Math.min(Math.max(v.width,v.minWidth),v.maxWidth),v.height=Math.min(Math.max(v.height,v.minHeight),v.maxHeight),v.left=(e.width-v.width)/2,v.top=(e.height-v.height)/2,v.oldLeft=v.left,v.oldTop=v.top,this.initialCanvasData=k({},v)},limitCanvas:function(e,a){var r=this.options,u=this.containerData,p=this.canvasData,d=this.cropBoxData,f=r.viewMode,_=p.aspectRatio,y=this.cropped&&d;if(e){var v=Number(r.minCanvasWidth)||0,x=Number(r.minCanvasHeight)||0;f>1?(v=Math.max(v,u.width),x=Math.max(x,u.height),3===f&&(x*_>v?v=x*_:x=v/_)):f>0&&(v?v=Math.max(v,y?d.width:0):x?x=Math.max(x,y?d.height:0):y&&((x=d.height)*_>(v=d.width)?v=x*_:x=v/_));var w=ot({aspectRatio:_,width:v,height:x});x=w.height,p.minWidth=v=w.width,p.minHeight=x,p.maxWidth=1/0,p.maxHeight=1/0}if(a)if(f>(y?0:1)){var T=u.width-p.width,E=u.height-p.height;p.minLeft=Math.min(0,T),p.minTop=Math.min(0,E),p.maxLeft=Math.max(0,T),p.maxTop=Math.max(0,E),y&&this.limited&&(p.minLeft=Math.min(d.left,d.left+(d.width-p.width)),p.minTop=Math.min(d.top,d.top+(d.height-p.height)),p.maxLeft=d.left,p.maxTop=d.top,2===f&&(p.width>=u.width&&(p.minLeft=Math.min(0,T),p.maxLeft=Math.max(0,T)),p.height>=u.height&&(p.minTop=Math.min(0,E),p.maxTop=Math.max(0,E))))}else p.minLeft=-p.width,p.minTop=-p.height,p.maxLeft=u.width,p.maxTop=u.height},renderCanvas:function(e,a){var r=this.canvasData,u=this.imageData;if(a){var p=function me(h){var e=h.width,a=h.height,r=h.degree;if(90==(r=Math.abs(r)%180))return{width:a,height:e};var u=r%90*Math.PI/180,p=Math.sin(u),d=Math.cos(u),f=e*d+a*p,_=e*p+a*d;return r>90?{width:_,height:f}:{width:f,height:_}}({width:u.naturalWidth*Math.abs(u.scaleX||1),height:u.naturalHeight*Math.abs(u.scaleY||1),degree:u.rotate||0}),d=p.width,f=p.height,_=r.width*(d/r.naturalWidth),y=r.height*(f/r.naturalHeight);r.left-=(_-r.width)/2,r.top-=(y-r.height)/2,r.width=_,r.height=y,r.aspectRatio=d/f,r.naturalWidth=d,r.naturalHeight=f,this.limitCanvas(!0,!1)}(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),this.limitCanvas(!1,!0),r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),r.oldLeft=r.left,r.oldTop=r.top,pt(this.canvas,k({width:r.width,height:r.height},Ot({translateX:r.left,translateY:r.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var a=this.canvasData,r=this.imageData,u=r.naturalWidth*(a.width/a.naturalWidth),p=r.naturalHeight*(a.height/a.naturalHeight);k(r,{width:u,height:p,left:(a.width-u)/2,top:(a.height-p)/2}),pt(this.image,k({width:r.width,height:r.height},Ot(k({translateX:r.left,translateY:r.top},r)))),e&&this.output()},initCropBox:function(){var e=this.options,a=this.canvasData,r=e.aspectRatio||e.initialAspectRatio,u=Number(e.autoCropArea)||.8,p={width:a.width,height:a.height};r&&(a.height*r>a.width?p.height=p.width/r:p.width=p.height*r),this.cropBoxData=p,this.limitCropBox(!0,!0),p.width=Math.min(Math.max(p.width,p.minWidth),p.maxWidth),p.height=Math.min(Math.max(p.height,p.minHeight),p.maxHeight),p.width=Math.max(p.minWidth,p.width*u),p.height=Math.max(p.minHeight,p.height*u),p.left=a.left+(a.width-p.width)/2,p.top=a.top+(a.height-p.height)/2,p.oldLeft=p.left,p.oldTop=p.top,this.initialCropBoxData=k({},p)},limitCropBox:function(e,a){var r=this.options,u=this.containerData,p=this.canvasData,d=this.cropBoxData,f=this.limited,_=r.aspectRatio;if(e){var y=Number(r.minCropBoxWidth)||0,v=Number(r.minCropBoxHeight)||0,x=f?Math.min(u.width,p.width,p.width+p.left,u.width-p.left):u.width,w=f?Math.min(u.height,p.height,p.height+p.top,u.height-p.top):u.height;y=Math.min(y,u.width),v=Math.min(v,u.height),_&&(y&&v?v*_>y?v=y/_:y=v*_:y?v=y/_:v&&(y=v*_),w*_>x?w=x/_:x=w*_),d.minWidth=Math.min(y,x),d.minHeight=Math.min(v,w),d.maxWidth=x,d.maxHeight=w}a&&(f?(d.minLeft=Math.max(0,p.left),d.minTop=Math.max(0,p.top),d.maxLeft=Math.min(u.width,p.left+p.width)-d.width,d.maxTop=Math.min(u.height,p.top+p.height)-d.height):(d.minLeft=0,d.minTop=0,d.maxLeft=u.width-d.width,d.maxTop=u.height-d.height))},renderCropBox:function(){var e=this.options,a=this.containerData,r=this.cropBoxData;(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),this.limitCropBox(!1,!0),r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),r.oldLeft=r.left,r.oldTop=r.top,e.movable&&e.cropBoxMovable&&o(this.face,Wt,r.width>=a.width&&r.height>=a.height?"move":"all"),pt(this.cropBox,k({width:r.width,height:r.height},Ot({translateX:r.left,translateY:r.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),S(this.element,oe,this.getData())}},Ye={initPreview:function(){var e=this.element,a=this.crossOrigin,r=this.options.preview,u=a?this.crossOriginUrl:this.url,p=e.alt||"The image to preview",d=document.createElement("img");if(a&&(d.crossOrigin=a),d.src=u,d.alt=p,this.viewBox.appendChild(d),this.viewBoxImage=d,r){var f=r;"string"==typeof r?f=e.ownerDocument.querySelectorAll(r):r.querySelector&&(f=[r]),this.previews=f,W(f,function(_){var y=document.createElement("img");o(_,Vt,{width:_.offsetWidth,height:_.offsetHeight,html:_.innerHTML}),a&&(y.crossOrigin=a),y.src=u,y.alt=p,y.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',_.innerHTML="",_.appendChild(y)})}},resetPreview:function(){W(this.previews,function(e){var a=s(e,Vt);pt(e,{width:a.width,height:a.height}),e.innerHTML=a.html,function l(h,e){if(ut(h[e]))try{delete h[e]}catch(a){h[e]=void 0}else if(h.dataset)try{delete h.dataset[e]}catch(a){h.dataset[e]=void 0}else h.removeAttribute("data-".concat(i(e)))}(e,Vt)})},preview:function(){var e=this.imageData,a=this.canvasData,r=this.cropBoxData,u=r.width,p=r.height,d=e.width,f=e.height,_=r.left-a.left-e.left,y=r.top-a.top-e.top;!this.cropped||this.disabled||(pt(this.viewBoxImage,k({width:d,height:f},Ot(k({translateX:-_,translateY:-y},e)))),W(this.previews,function(v){var x=s(v,Vt),w=x.width,T=x.height,E=w,N=T,R=1;u&&(N=p*(R=w/u)),p&&N>T&&(E=u*(R=T/p),N=T),pt(v,{width:E,height:N}),pt(v.getElementsByTagName("img")[0],k({width:d*R,height:f*R},Ot(k({translateX:-_*R,translateY:-y*R},e))))}))}},Yt={bind:function(){var e=this.element,a=this.options,r=this.cropper;V(a.cropstart)&&A(e,Lt,a.cropstart),V(a.cropmove)&&A(e,he,a.cropmove),V(a.cropend)&&A(e,se,a.cropend),V(a.crop)&&A(e,oe,a.crop),V(a.zoom)&&A(e,pe,a.zoom),A(r,Ce,this.onCropStart=this.cropStart.bind(this)),a.zoomable&&a.zoomOnWheel&&A(r,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),a.toggleDragModeOnDblclick&&A(r,ce,this.onDblclick=this.dblclick.bind(this)),A(e.ownerDocument,Ae,this.onCropMove=this.cropMove.bind(this)),A(e.ownerDocument,Ie,this.onCropEnd=this.cropEnd.bind(this)),a.responsive&&A(window,"resize",this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,a=this.options,r=this.cropper;V(a.cropstart)&&M(e,Lt,a.cropstart),V(a.cropmove)&&M(e,he,a.cropmove),V(a.cropend)&&M(e,se,a.cropend),V(a.crop)&&M(e,oe,a.crop),V(a.zoom)&&M(e,pe,a.zoom),M(r,Ce,this.onCropStart),a.zoomable&&a.zoomOnWheel&&M(r,"wheel",this.onWheel,{passive:!1,capture:!0}),a.toggleDragModeOnDblclick&&M(r,ce,this.onDblclick),M(e.ownerDocument,Ae,this.onCropMove),M(e.ownerDocument,Ie,this.onCropEnd),a.responsive&&M(window,"resize",this.onResize)}},ye={resize:function(){if(!this.disabled){var f,_,e=this.options,a=this.container,r=this.containerData,u=a.offsetWidth/r.width,p=a.offsetHeight/r.height,d=Math.abs(u-1)>Math.abs(p-1)?u:p;1!==d&&(e.restore&&(f=this.getCanvasData(),_=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(W(f,function(y,v){f[v]=y*d})),this.setCropBoxData(W(_,function(y,v){_[v]=y*d}))))}},dblclick:function(){this.disabled||"none"===this.options.dragMode||this.setDragMode(function Ve(h,e){return h.classList?h.classList.contains(e):h.className.indexOf(e)>-1}(this.dragBox,Xt)?"move":ne)},wheel:function(e){var a=this,r=Number(this.options.wheelZoomRatio)||.1,u=1;this.disabled||(e.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){a.wheeling=!1},50),e.deltaY?u=e.deltaY>0?1:-1:e.wheelDelta?u=-e.wheelDelta/120:e.detail&&(u=e.detail>0?1:-1),this.zoom(-u*r,e)))},cropStart:function(e){var a=e.buttons,r=e.button;if(!(this.disabled||("mousedown"===e.type||"pointerdown"===e.type&&"mouse"===e.pointerType)&&(I(a)&&1!==a||I(r)&&0!==r||e.ctrlKey))){var d,u=this.options,p=this.pointers;e.changedTouches?W(e.changedTouches,function(f){p[f.identifier]=gt(f)}):p[e.pointerId||0]=gt(e),d=Object.keys(p).length>1&&u.zoomable&&u.zoomOnTouch?"zoom":s(e.target,Wt),Oe.test(d)&&!1!==S(this.element,Lt,{originalEvent:e,action:d})&&(e.preventDefault(),this.action=d,this.cropping=!1,"crop"===d&&(this.cropping=!0,P(this.dragBox,Jt)))}},cropMove:function(e){var a=this.action;if(!this.disabled&&a){var r=this.pointers;e.preventDefault(),!1!==S(this.element,he,{originalEvent:e,action:a})&&(e.changedTouches?W(e.changedTouches,function(u){k(r[u.identifier]||{},gt(u,!0))}):k(r[e.pointerId||0]||{},gt(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var a=this.action,r=this.pointers;e.changedTouches?W(e.changedTouches,function(u){delete r[u.identifier]}):delete r[e.pointerId||0],a&&(e.preventDefault(),Object.keys(r).length||(this.action=""),this.cropping&&(this.cropping=!1,g(this.dragBox,Jt,this.cropped&&this.options.modal)),S(this.element,se,{originalEvent:e,action:a}))}}},bt={change:function(e){var ft,r=this.canvasData,u=this.containerData,p=this.cropBoxData,d=this.pointers,f=this.action,_=this.options.aspectRatio,y=p.left,v=p.top,x=p.width,w=p.height,T=y+x,E=v+w,N=0,R=0,Q=u.width,j=u.height,Y=!0;!_&&e.shiftKey&&(_=x&&w?x/w:1),this.limited&&(R=p.minTop,Q=(N=p.minLeft)+Math.min(u.width,r.width,r.left+r.width),j=R+Math.min(u.height,r.height,r.top+r.height));var K=d[Object.keys(d)[0]],b={x:K.endX-K.startX,y:K.endY-K.startY},O=function(et){switch(et){case"e":T+b.x>Q&&(b.x=Q-T);break;case"w":y+b.x<N&&(b.x=N-y);break;case at:v+b.y<R&&(b.y=R-v);break;case"s":E+b.y>j&&(b.y=j-E)}};switch(f){case"all":y+=b.x,v+=b.y;break;case"e":if(b.x>=0&&(T>=Q||_&&(v<=R||E>=j))){Y=!1;break}O("e"),(x+=b.x)<0&&(f="w",y-=x=-x),_&&(v+=(p.height-(w=x/_))/2);break;case at:if(b.y<=0&&(v<=R||_&&(y<=N||T>=Q))){Y=!1;break}O(at),v+=b.y,(w-=b.y)<0&&(f="s",v-=w=-w),_&&(y+=(p.width-(x=w*_))/2);break;case"w":if(b.x<=0&&(y<=N||_&&(v<=R||E>=j))){Y=!1;break}O("w"),y+=b.x,(x-=b.x)<0&&(f="e",y-=x=-x),_&&(v+=(p.height-(w=x/_))/2);break;case"s":if(b.y>=0&&(E>=j||_&&(y<=N||T>=Q))){Y=!1;break}O("s"),(w+=b.y)<0&&(f=at,v-=w=-w),_&&(y+=(p.width-(x=w*_))/2);break;case St:if(_){if(b.y<=0&&(v<=R||T>=Q)){Y=!1;break}O(at),v+=b.y,x=(w-=b.y)*_}else O(at),O("e"),b.x>=0?T<Q?x+=b.x:b.y<=0&&v<=R&&(Y=!1):x+=b.x,b.y<=0?v>R&&(w-=b.y,v+=b.y):(w-=b.y,v+=b.y);x<0&&w<0?(f=ht,v-=w=-w,y-=x=-x):x<0?(f=Et,y-=x=-x):w<0&&(f=Tt,v-=w=-w);break;case Et:if(_){if(b.y<=0&&(v<=R||y<=N)){Y=!1;break}O(at),v+=b.y,y+=p.width-(x=(w-=b.y)*_)}else O(at),O("w"),b.x<=0?y>N?(x-=b.x,y+=b.x):b.y<=0&&v<=R&&(Y=!1):(x-=b.x,y+=b.x),b.y<=0?v>R&&(w-=b.y,v+=b.y):(w-=b.y,v+=b.y);x<0&&w<0?(f=Tt,v-=w=-w,y-=x=-x):x<0?(f=St,y-=x=-x):w<0&&(f=ht,v-=w=-w);break;case ht:if(_){if(b.x<=0&&(y<=N||E>=j)){Y=!1;break}O("w"),y+=b.x,w=(x-=b.x)/_}else O("s"),O("w"),b.x<=0?y>N?(x-=b.x,y+=b.x):b.y>=0&&E>=j&&(Y=!1):(x-=b.x,y+=b.x),b.y>=0?E<j&&(w+=b.y):w+=b.y;x<0&&w<0?(f=St,v-=w=-w,y-=x=-x):x<0?(f=Tt,y-=x=-x):w<0&&(f=Et,v-=w=-w);break;case Tt:if(_){if(b.x>=0&&(T>=Q||E>=j)){Y=!1;break}O("e"),w=(x+=b.x)/_}else O("s"),O("e"),b.x>=0?T<Q?x+=b.x:b.y>=0&&E>=j&&(Y=!1):x+=b.x,b.y>=0?E<j&&(w+=b.y):w+=b.y;x<0&&w<0?(f=Et,v-=w=-w,y-=x=-x):x<0?(f=ht,y-=x=-x):w<0&&(f=St,v-=w=-w);break;case"move":this.move(b.x,b.y),Y=!1;break;case"zoom":this.zoom(function nt(h){var e=H({},h),a=0;return W(h,function(r,u){delete e[u],W(e,function(p){var d=Math.abs(r.startX-p.startX),f=Math.abs(r.startY-p.startY),_=Math.abs(r.endX-p.endX),y=Math.abs(r.endY-p.endY),v=Math.sqrt(d*d+f*f),w=(Math.sqrt(_*_+y*y)-v)/v;Math.abs(w)>Math.abs(a)&&(a=w)})}),a}(d),e),Y=!1;break;case"crop":if(!b.x||!b.y){Y=!1;break}ft=D(this.cropper),y=K.startX-ft.left,v=K.startY-ft.top,x=p.minWidth,w=p.minHeight,b.x>0?f=b.y>0?Tt:St:b.x<0&&(y-=x,f=b.y>0?ht:Et),b.y<0&&(v-=w),this.cropped||(c(this.cropBox,J),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}Y&&(p.width=x,p.height=w,p.left=y,p.top=v,this.action=f,this.renderCropBox()),W(d,function(X){X.startX=X.endX,X.startY=X.endY})}},Mt={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&P(this.dragBox,Jt),c(this.cropBox,J),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=k({},this.initialImageData),this.canvasData=k({},this.initialCanvasData),this.cropBoxData=k({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(k(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),c(this.dragBox,Jt),P(this.cropBox,J)),this},replace:function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&e&&(this.isImg&&(this.element.src=e),a?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,W(this.previews,function(r){r.getElementsByTagName("img")[0].src=e}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,c(this.cropper,be)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,P(this.cropper,be)),this},destroy:function(){var e=this.element;return e[B]?(e[B]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=this.canvasData,u=r.left,p=r.top;return this.moveTo(Gt(e)?e:u+Number(e),Gt(a)?a:p+Number(a))},moveTo:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=this.canvasData,u=!1;return e=Number(e),a=Number(a),this.ready&&!this.disabled&&this.options.movable&&(I(e)&&(r.left=e,u=!0),I(a)&&(r.top=a,u=!0),u&&this.renderCanvas(!0)),this},zoom:function(e,a){var r=this.canvasData;return e=Number(e),this.zoomTo(r.width*(e=e<0?1/(1-e):1+e)/r.naturalWidth,null,a)},zoomTo:function(e,a,r){var u=this.options,p=this.canvasData,d=p.width,f=p.height,_=p.naturalWidth,y=p.naturalHeight;if((e=Number(e))>=0&&this.ready&&!this.disabled&&u.zoomable){var v=_*e,x=y*e;if(!1===S(this.element,pe,{ratio:e,oldRatio:d/_,originalEvent:r}))return this;if(r){var w=this.pointers,T=D(this.cropper),E=w&&Object.keys(w).length?function fe(h){var e=0,a=0,r=0;return W(h,function(u){e+=u.startX,a+=u.startY,r+=1}),{pageX:e/=r,pageY:a/=r}}(w):{pageX:r.pageX,pageY:r.pageY};p.left-=(E.pageX-T.left-p.left)/d*(v-d),p.top-=(E.pageY-T.top-p.top)/f*(x-f)}else wt(a)&&I(a.x)&&I(a.y)?(p.left-=(a.x-p.left)/d*(v-d),p.top-=(a.y-p.top)/f*(x-f)):(p.left-=(v-d)/2,p.top-=(x-f)/2);p.width=v,p.height=x,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return I(e=Number(e))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var a=this.imageData.scaleY;return this.scale(e,I(a)?a:1)},scaleY:function(e){var a=this.imageData.scaleX;return this.scale(I(a)?a:1,e)},scale:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=this.imageData,u=!1;return e=Number(e),a=Number(a),this.ready&&!this.disabled&&this.options.scalable&&(I(e)&&(r.scaleX=e,u=!0),I(a)&&(r.scaleY=a,u=!0),u&&this.renderCanvas(!0,!0)),this},getData:function(){var d,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=this.options,r=this.imageData,u=this.canvasData,p=this.cropBoxData;if(this.ready&&this.cropped){var f=r.width/r.naturalWidth;if(W(d={x:p.left-u.left,y:p.top-u.top,width:p.width,height:p.height},function(v,x){d[x]=v/f}),e){var _=Math.round(d.y+d.height),y=Math.round(d.x+d.width);d.x=Math.round(d.x),d.y=Math.round(d.y),d.width=y-d.x,d.height=_-d.y}}else d={x:0,y:0,width:0,height:0};return a.rotatable&&(d.rotate=r.rotate||0),a.scalable&&(d.scaleX=r.scaleX||1,d.scaleY=r.scaleY||1),d},setData:function(e){var a=this.options,r=this.imageData,u=this.canvasData,p={};if(this.ready&&!this.disabled&&wt(e)){var d=!1;a.rotatable&&I(e.rotate)&&e.rotate!==r.rotate&&(r.rotate=e.rotate,d=!0),a.scalable&&(I(e.scaleX)&&e.scaleX!==r.scaleX&&(r.scaleX=e.scaleX,d=!0),I(e.scaleY)&&e.scaleY!==r.scaleY&&(r.scaleY=e.scaleY,d=!0)),d&&this.renderCanvas(!0,!0);var f=r.width/r.naturalWidth;I(e.x)&&(p.left=e.x*f+u.left),I(e.y)&&(p.top=e.y*f+u.top),I(e.width)&&(p.width=e.width*f),I(e.height)&&(p.height=e.height*f),this.setCropBoxData(p)}return this},getContainerData:function(){return this.ready?k({},this.containerData):{}},getImageData:function(){return this.sized?k({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,a={};return this.ready&&W(["left","top","width","height","naturalWidth","naturalHeight"],function(r){a[r]=e[r]}),a},setCanvasData:function(e){var a=this.canvasData,r=a.aspectRatio;return this.ready&&!this.disabled&&wt(e)&&(I(e.left)&&(a.left=e.left),I(e.top)&&(a.top=e.top),I(e.width)?(a.width=e.width,a.height=e.width/r):I(e.height)&&(a.height=e.height,a.width=e.height*r),this.renderCanvas(!0)),this},getCropBoxData:function(){var a,e=this.cropBoxData;return this.ready&&this.cropped&&(a={left:e.left,top:e.top,width:e.width,height:e.height}),a||{}},setCropBoxData:function(e){var u,p,a=this.cropBoxData,r=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&wt(e)&&(I(e.left)&&(a.left=e.left),I(e.top)&&(a.top=e.top),I(e.width)&&e.width!==a.width&&(u=!0,a.width=e.width),I(e.height)&&e.height!==a.height&&(p=!0,a.height=e.height),r&&(u?a.height=a.width/r:p&&(a.width=a.height*r)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var a=this.canvasData,r=ve(this.image,this.imageData,a,e);if(!this.cropped)return r;var u=this.getData(),p=u.x,d=u.y,f=u.width,_=u.height,y=r.width/Math.floor(a.naturalWidth);1!==y&&(p*=y,d*=y,f*=y,_*=y);var v=f/_,x=ot({aspectRatio:v,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),w=ot({aspectRatio:v,width:e.minWidth||0,height:e.minHeight||0},"cover"),T=ot({aspectRatio:v,width:e.width||(1!==y?r.width:f),height:e.height||(1!==y?r.height:_)}),E=T.width,N=T.height;E=Math.min(x.width,Math.max(w.width,E)),N=Math.min(x.height,Math.max(w.height,N));var R=document.createElement("canvas"),Q=R.getContext("2d");R.width=_t(E),R.height=_t(N),Q.fillStyle=e.fillColor||"transparent",Q.fillRect(0,0,E,N);var j=e.imageSmoothingEnabled,ft=e.imageSmoothingQuality;Q.imageSmoothingEnabled=void 0===j||j,ft&&(Q.imageSmoothingQuality=ft);var et,mt,Dt,zt,Ct,lt,K=r.width,b=r.height,O=p,X=d;O<=-f||O>K?(O=0,et=0,Dt=0,Ct=0):O<=0?(Dt=-O,O=0,Ct=et=Math.min(K,f+O)):O<=K&&(Dt=0,Ct=et=Math.min(f,K-O)),et<=0||X<=-_||X>b?(X=0,mt=0,zt=0,lt=0):X<=0?(zt=-X,X=0,lt=mt=Math.min(b,_+X)):X<=b&&(zt=0,lt=mt=Math.min(_,b-X));var $=[O,X,et,mt];if(Ct>0&&lt>0){var Ht=E/f;$.push(Dt*Ht,zt*Ht,Ct*Ht,lt*Ht)}return Q.drawImage.apply(Q,[r].concat(it($.map(function(we){return Math.floor(_t(we))})))),R},setAspectRatio:function(e){var a=this.options;return!this.disabled&&!Gt(e)&&(a.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var a=this.options,r=this.dragBox,u=this.face;if(this.ready&&!this.disabled){var p=e===ne,d=a.movable&&"move"===e;a.dragMode=e=p||d?e:"none",o(r,Wt,e),g(r,Xt,p),g(r,Nt,d),a.cropBoxMovable||(o(u,Wt,e),g(u,Xt,p),g(u,Nt,d))}return this}},ei=tt.Cropper,qe=function(){function h(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(xt(this,h),!e||!He.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=k({},Be,wt(a)&&a),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return function Bt(h,e,a){return e&&At(h.prototype,e),a&&At(h,a),h}(h,[{key:"init",value:function(){var u,a=this.element,r=a.tagName.toLowerCase();if(!a[B]){if(a[B]=this,"img"===r){if(this.isImg=!0,u=a.getAttribute("src")||"",this.originalUrl=u,!u)return;u=a.src}else"canvas"===r&&window.HTMLCanvasElement&&(u=a.toDataURL());this.load(u)}}},{key:"load",value:function(a){var r=this;if(a){this.url=a,this.imageData={};var u=this.element,p=this.options;if(!p.rotatable&&!p.scalable&&(p.checkOrientation=!1),!p.checkOrientation||!window.ArrayBuffer)return void this.clone();if(De.test(a))return void(ze.test(a)?this.read(function Kt(h){var e=h.replace(Ue,""),a=atob(e),r=new ArrayBuffer(a.length),u=new Uint8Array(r);return W(u,function(p,d){u[d]=a.charCodeAt(d)}),r}(a)):this.clone());var d=new XMLHttpRequest,f=this.clone.bind(this);this.reloading=!0,this.xhr=d,d.onabort=f,d.onerror=f,d.ontimeout=f,d.onprogress=function(){d.getResponseHeader("content-type")!==Re&&d.abort()},d.onload=function(){r.read(d.response)},d.onloadend=function(){r.reloading=!1,r.xhr=null},p.checkCrossOrigin&&q(a)&&u.crossOrigin&&(a=Rt(a)),d.open("GET",a,!0),d.responseType="arraybuffer",d.withCredentials="use-credentials"===u.crossOrigin,d.send()}}},{key:"read",value:function(a){var r=this.options,u=this.imageData,p=Pt(a),d=0,f=1,_=1;if(p>1){this.url=function te(h,e){for(var a=[],u=new Uint8Array(h);u.length>0;)a.push($t.apply(null,ge(u.subarray(0,8192)))),u=u.subarray(8192);return"data:".concat(e,";base64,").concat(btoa(a.join("")))}(a,Re);var y=function xe(h){var e=0,a=1,r=1;switch(h){case 2:a=-1;break;case 3:e=-180;break;case 4:r=-1;break;case 5:e=90,r=-1;break;case 6:e=90;break;case 7:e=90,a=-1;break;case 8:e=-90}return{rotate:e,scaleX:a,scaleY:r}}(p);d=y.rotate,f=y.scaleX,_=y.scaleY}r.rotatable&&(u.rotate=d),r.scalable&&(u.scaleX=f,u.scaleY=_),this.clone()}},{key:"clone",value:function(){var a=this.element,r=this.url,u=a.crossOrigin,p=r;this.options.checkCrossOrigin&&q(r)&&(u||(u="anonymous"),p=Rt(r)),this.crossOrigin=u,this.crossOriginUrl=p;var d=document.createElement("img");u&&(d.crossOrigin=u),d.src=p||r,d.alt=a.alt||"The image to crop",this.image=d,d.onload=this.start.bind(this),d.onerror=this.stop.bind(this),P(d,ae),a.parentNode.insertBefore(d,a.nextSibling)}},{key:"start",value:function(){var a=this,r=this.image;r.onload=null,r.onerror=null,this.sizing=!0;var u=tt.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(tt.navigator.userAgent),p=function(y,v){k(a.imageData,{naturalWidth:y,naturalHeight:v,aspectRatio:y/v}),a.initialImageData=k({},a.imageData),a.sizing=!1,a.sized=!0,a.build()};if(!r.naturalWidth||u){var d=document.createElement("img"),f=document.body||document.documentElement;this.sizingImage=d,d.onload=function(){p(d.width,d.height),u||f.removeChild(d)},d.src=r.src,u||(d.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",f.appendChild(d))}else p(r.naturalWidth,r.naturalHeight)}},{key:"stop",value:function(){var a=this.image;a.onload=null,a.onerror=null,a.parentNode.removeChild(a),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var a=this.element,r=this.options,u=this.image,p=a.parentNode,d=document.createElement("div");d.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var f=d.querySelector(".".concat(B,"-container")),_=f.querySelector(".".concat(B,"-canvas")),y=f.querySelector(".".concat(B,"-drag-box")),v=f.querySelector(".".concat(B,"-crop-box")),x=v.querySelector(".".concat(B,"-face"));this.container=p,this.cropper=f,this.canvas=_,this.dragBox=y,this.cropBox=v,this.viewBox=f.querySelector(".".concat(B,"-view-box")),this.face=x,_.appendChild(u),P(a,J),p.insertBefore(f,a.nextSibling),this.isImg||c(u,ae),this.initPreview(),this.bind(),r.initialAspectRatio=Math.max(0,r.initialAspectRatio)||NaN,r.aspectRatio=Math.max(0,r.aspectRatio)||NaN,r.viewMode=Math.max(0,Math.min(3,Math.round(r.viewMode)))||0,P(v,J),r.guides||P(v.getElementsByClassName("".concat(B,"-dashed")),J),r.center||P(v.getElementsByClassName("".concat(B,"-center")),J),r.background&&P(f,"".concat(B,"-bg")),r.highlight||P(x,jt),r.cropBoxMovable&&(P(x,Nt),o(x,Wt,"all")),r.cropBoxResizable||(P(v.getElementsByClassName("".concat(B,"-line")),J),P(v.getElementsByClassName("".concat(B,"-point")),J)),this.render(),this.ready=!0,this.setDragMode(r.dragMode),r.autoCrop&&this.crop(),this.setData(r.data),V(r.ready)&&A(a,"ready",r.ready,{once:!0}),S(a,"ready")}}},{key:"unbuild",value:function(){!this.ready||(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),c(this.element,J))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=ei,h}},{key:"setDefaults",value:function(a){k(Be,wt(a)&&a)}}]),h}();return k(qe.prototype,Pe,Ye,Yt,ye,bt,Mt),qe}()}}]);