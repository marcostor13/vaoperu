"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[579],{2579:(S,p,o)=>{o.r(p),o.d(p,{UserModule:()=>k});var d=o(9808),g=o(9812);class l{constructor(){this._id=null,this.name="",this.email="",this.password="",this.role=[]}}class h{constructor(){this._id=!1,this.name=!1,this.email=!1,this.password=!1,this.role=!1}}var e=o(5e3),C=o(8368),u=o(9783),_=o(7840),v=o(5315),m=o(4182),f=o(5055),y=o(7307);function b(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",19)(1,"div",20)(2,"span",21),e._uU(3),e.qZA()(),e.TgZ(4,"div",20)(5,"span",21),e._uU(6),e.qZA()(),e.TgZ(7,"div",20)(8,"span",21),e._uU(9),e.qZA()(),e.TgZ(10,"div")(11,"button",22),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw().addEdit(i)}),e._uU(12,"Editar"),e.qZA()()()}if(2&n){const t=a.$implicit;e.xp6(3),e.Oqu(t.name),e.xp6(3),e.Oqu(t.role),e.xp6(3),e.Oqu(t.email)}}function U(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){return e.CHM(t),e.oxw().changePassword()}),e._uU(1,"Resetar contrase\xf1a"),e.qZA()}}function I(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(s){e.CHM(t);const i=e.oxw();return i.confirm(s,i.currentItem)}),e._uU(1,"Eliminar"),e.qZA()}}const Z=function(){return{"max-height":"30rem"}},c=function(n){return{invalid:n}},M=[{path:"",component:(()=>{class n{constructor(t,r,s){this.userService=t,this.messageService=r,this.confirmationService=s,this.displayModal=!1,this.invalid=new h,this.currentItem=new l,this.roles=[{name:"Administrador",key:"admin"},{name:"Proveedor",key:"provider"},{name:"Usuario",key:"user"}]}ngOnInit(){this.get()}get(){this.userService.get().subscribe(t=>{this.items=t.data},t=>{this.messageService.add({severity:"error",summary:"Error",detail:t.error.message})})}validate(t){var r;this.invalid=new h;let s=!1;return this.currentItem.name||(s=!0,this.invalid.name=!0,this.messageService.add({severity:"error",summary:"Error",detail:"Debe completar todos los campos requeridos"})),this.currentItem.email||(s=!0,this.invalid.email=!0,this.messageService.add({severity:"error",summary:"Error",detail:"Debe completar todos los campos requeridos"})),t._id||this.currentItem.password||(s=!0,this.invalid.password=!0,this.messageService.add({severity:"error",summary:"Error",detail:"Debe completar todos los campos requeridos"})),(!this.currentItem.role||0===(null===(r=this.currentItem.role)||void 0===r?void 0:r.length))&&(s=!0,this.invalid.role=!0,this.messageService.add({severity:"error",summary:"Error",detail:"Debe completar el rol"})),s}reset(){this.currentItem=new l}addEdit(t=null){t?(t.password="",this.currentItem=t):this.reset(),this.displayModal=!0}confirm(t,r){this.confirmationService.confirm({target:t.target,message:"\xbfSeg\xfaro que desea eliminar?",icon:"pi pi-exclamation-triangle",acceptLabel:"S\xed",rejectLabel:"No",accept:()=>{this.delete(r)},reject:()=>{}})}changePassword(){this.userService.changePassword(this.currentItem.email,this.currentItem.password).subscribe(t=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:t.message})})}add(){this.validate(this.currentItem)||(this.currentItem._id&&delete this.currentItem.password,this.userService.save(this.currentItem).subscribe(t=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:t.message?t.message:"Usuario registrado"}),this.currentItem=new l,this.get()},t=>{this.messageService.add({severity:"error",summary:"Error",detail:t.error.message})}))}delete(t){this.userService.delete(t._id).subscribe(r=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:r.message}),this.currentItem=new l,this.get()},r=>{this.messageService.add({severity:"error",summary:"Error",detail:r.error.message})})}getElementByID(t){return this.items.filter(r=>r._id===t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(C.K),e.Y36(u.ez),e.Y36(u.YP))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-user"]],decls:24,vars:36,consts:[[1,"p-5"],[1,"row","m-0","justify-content-between","align-items-center"],[1,"btn2",3,"click"],[1,"pi","pi-plus","mr-2"],[1,"mt-5"],["header","Lista de usuarios","filterPlaceholder","Buscar","filterBy","name,role,email",3,"value","listStyle","dragdrop"],["pTemplate","item","class","mt-3"],["header","",3,"visible","modal","styleClass","baseZIndex","autoZIndex","draggable","resizable","visibleChange"],[1,"col-12","row","m-0","justify-content-center"],[1,"row","m-0","p-0","flex-column","col-12","col-md-6"],["type","text",1,"invalid","mt-3","input-login",3,"ngModel","ngClass","placeholder","keyup.enter","keyup","ngModelChange"],["type","email",1,"invalid","mt-3","input-login",3,"ngModel","ngClass","placeholder","keyup.enter","keyup","ngModelChange"],["type","password",1,"invalid","mt-3","input-login",3,"ngModel","ngClass","placeholder","keyup.enter","keyup","ngModelChange"],["class","btn1 mt-3",3,"click",4,"ngIf"],[1,"mt-3"],["optionLabel","name","optionValue","key",3,"options","ngModel","multiple","metaKeySelection","checkbox","filter","ngModelChange"],[1,"btn1","mt-4",3,"click"],["class","btn3 bg-color6 pt-2 pb-2 mt-2 mb-3",3,"click",4,"ngIf"],[3,"autoZIndex","baseZIndex"],[1,"item-list","row","justify-content-between","align-items-center","m-0","pl-2","pr-2"],[1,"col"],[1,"ml-3"],[1,"btn2","p-0","pl-3","pr-3",3,"click"],[1,"btn1","mt-3",3,"click"],[1,"btn3","bg-color6","pt-2","pb-2","mt-2","mb-3",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4"),e._uU(3,"Usuarios"),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return r.addEdit()}),e._UZ(5,"i",3),e._uU(6," Agregar "),e.qZA()(),e.TgZ(7,"div",4)(8,"p-orderList",5),e.YNc(9,b,13,3,"ng-template",6),e.qZA()()(),e.TgZ(10,"p-dialog",7),e.NdJ("visibleChange",function(i){return r.displayModal=i}),e.TgZ(11,"div",8)(12,"div",9)(13,"input",10),e.NdJ("keyup.enter",function(){return r.add()})("keyup",function(){return r.invalid.name=!1})("ngModelChange",function(i){return r.currentItem.name=i}),e.qZA(),e.TgZ(14,"input",11),e.NdJ("keyup.enter",function(){return r.add()})("keyup",function(){return r.invalid.email=!1})("ngModelChange",function(i){return r.currentItem.email=i}),e.qZA(),e.TgZ(15,"input",12),e.NdJ("keyup.enter",function(){return r.add()})("keyup",function(){return r.invalid.password=!1})("ngModelChange",function(i){return r.currentItem.password=i}),e.qZA(),e.YNc(16,U,2,0,"button",13),e.TgZ(17,"label",14),e._uU(18,"Seleccione los roles"),e.qZA(),e.TgZ(19,"p-listbox",15),e.NdJ("ngModelChange",function(i){return r.currentItem.role=i}),e.qZA(),e.TgZ(20,"button",16),e.NdJ("click",function(){return r.add()}),e._uU(21,"Guardar"),e.qZA(),e.YNc(22,I,2,0,"button",17),e.qZA()()(),e._UZ(23,"p-confirmPopup",18)),2&t&&(e.xp6(8),e.Q6J("value",r.items)("listStyle",e.DdM(29,Z))("dragdrop",!0),e.xp6(2),e.Q6J("visible",r.displayModal)("modal",!0)("styleClass","modalLogin")("baseZIndex",1e4)("autoZIndex",!1)("draggable",!1)("resizable",!1),e.xp6(3),e.Q6J("ngModel",r.currentItem.name)("ngClass",e.VKq(30,c,r.invalid.name))("placeholder","Nombre"),e.xp6(1),e.Q6J("ngModel",r.currentItem.email)("ngClass",e.VKq(32,c,r.invalid.email))("placeholder","Correo"),e.xp6(1),e.Q6J("ngModel",r.currentItem.password)("ngClass",e.VKq(34,c,r.invalid.password))("placeholder","Contrase\xf1a"),e.xp6(1),e.Q6J("ngIf",r.currentItem._id),e.xp6(3),e.Q6J("options",r.roles)("ngModel",r.currentItem.role)("multiple",!0)("metaKeySelection",!1)("checkbox",!0)("filter",!0),e.xp6(3),e.Q6J("ngIf",r.currentItem._id),e.xp6(1),e.Q6J("autoZIndex",!1)("baseZIndex",1000001))},directives:[_.F,u.jx,v.V,m.Fj,m.JJ,m.On,d.mk,d.O5,f.Ri,y.P],styles:[".btn3[_ngcontent-%COMP%]{max-height:50px}"]}),n})()}];let T=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[g.Bz.forChild(M)],g.Bz]}),n})(),k=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[u.YP],imports:[[d.ez,T,y.n,_.C,v.S,m.u5,f.ON]]}),n})()}}]);