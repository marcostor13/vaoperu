"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[183],{3183:(x,g,r)=>{r.d(g,{v:()=>j});var f=r(655),t=r(5e3),p=r(5767),c=r(801),l=r(5439),d=r(1864),M=r(2542),E=r(9812),b=r(1724),v=r(9783),w=r(8157),Z=r(6498),C=r(9808),P=r(3561),L=r(9114),O=r(3349);function I(n,s){1&n&&t._UZ(0,"img",30)}function A(n,s){1&n&&t._UZ(0,"img",31)}function D(n,s){if(1&n&&t._UZ(0,"fa-icon",32),2&n){const e=t.oxw(2);t.Q6J("icon",e.faStore)("title","Recojo en tienda")}}function U(n,s){if(1&n&&t._UZ(0,"fa-icon",33),2&n){const e=t.oxw(2);t.Q6J("icon",e.faMotorcycle)("title","Delivery")}}function S(n,s){if(1&n&&(t.TgZ(0,"label",34),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij("",e.distance," km")}}function J(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw().addfavorites(o._id)}),t._uU(1,"Agregar a favoritos"),t.qZA()}}function N(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw().confirmDeleteFavorites(o._id)}),t._UZ(1,"fa-icon",24),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("icon",e.faStar)}}const y=function(n){return{"background-image":n}};function B(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",7)(1,"div",8),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().gotToViewCompany(a)}),t.qZA(),t.TgZ(2,"div",9)(3,"h5",10),t._uU(4),t.qZA(),t.TgZ(5,"div",11)(6,"div"),t.YNc(7,I,1,0,"img",12),t.YNc(8,A,1,0,"img",13),t.TgZ(9,"span",14),t._uU(10),t.qZA()(),t.TgZ(11,"div")(12,"fa-icon",15),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().shared(a.url,a.comercialName)}),t.qZA(),t.YNc(13,D,1,2,"fa-icon",16),t.YNc(14,U,1,2,"fa-icon",17),t.qZA()(),t.TgZ(15,"div",18)(16,"p",19),t._uU(17),t.qZA(),t.YNc(18,S,2,1,"label",20),t.qZA(),t.TgZ(19,"div",21)(20,"div",22)(21,"a",23),t._UZ(22,"fa-icon",24),t.qZA(),t.TgZ(23,"a",25),t.ALo(24,"whatsapp"),t._UZ(25,"fa-icon",26),t.qZA()(),t.YNc(26,J,2,0,"button",27),t.YNc(27,N,2,1,"button",27),t.qZA(),t.TgZ(28,"div",28)(29,"button",29),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().gotToViewCompany(a)}),t._uU(30,"M\xe1s informaci\xf3n"),t.qZA()()()()}if(2&n){const e=s.$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngStyle",t.VKq(20,y,"url("+e.image+")")),t.xp6(3),t.Oqu(e.comercialName),t.xp6(3),t.Q6J("ngIf",i.aperture(e.openTime,e.closeTime)),t.xp6(1),t.Q6J("ngIf",!i.aperture(e.openTime,e.closeTime)),t.xp6(2),t.AsE("",e.openTime," - ",e.closeTime,""),t.xp6(2),t.Q6J("icon",i.faShare),t.xp6(1),t.Q6J("ngIf",e.delivery),t.xp6(1),t.Q6J("ngIf",e.onMarket),t.xp6(3),t.Oqu(e.addressText),t.xp6(1),t.Q6J("ngIf",e.distance),t.xp6(3),t.MGl("href","tel:",e.phone,"",t.LSH),t.xp6(1),t.Q6J("icon",i.faPhone),t.xp6(1),t.hYB("href","https://wa.me/",t.lcZ(24,18,e.whatsapp),"?text=Hola! ",e.comercialName,"",t.LSH),t.xp6(2),t.Q6J("icon",i.faWhatsapp),t.xp6(1),t.Q6J("ngIf",!i.isFavorite(e._id)),t.xp6(1),t.Q6J("ngIf",i.isFavorite(e._id))}}function F(n,s){1&n&&t._UZ(0,"img",30)}function Y(n,s){1&n&&t._UZ(0,"img",31)}function k(n,s){if(1&n&&t._UZ(0,"fa-icon",32),2&n){const e=t.oxw(2);t.Q6J("icon",e.faStore)("title","Recojo en tienda")}}function Q(n,s){if(1&n&&t._UZ(0,"fa-icon",33),2&n){const e=t.oxw(2);t.Q6J("icon",e.faMotorcycle)("title","Delivery")}}function R(n,s){if(1&n&&(t.TgZ(0,"label",34),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij("",e.distance," km")}}function W(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw().addfavorites(o._id)}),t._UZ(1,"fa-icon",44),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("icon",e.faStar)}}function K(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw().confirmDeleteFavorites(o._id)}),t.qZA()}}function $(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",36)(1,"div",37),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().gotToViewCompany(a)}),t.qZA(),t.TgZ(2,"div",38)(3,"h5",10),t._uU(4),t.qZA(),t.TgZ(5,"div",39)(6,"div"),t.YNc(7,F,1,0,"img",12),t.YNc(8,Y,1,0,"img",13),t.TgZ(9,"span",14),t._uU(10),t.qZA()(),t.TgZ(11,"div"),t.YNc(12,k,1,2,"fa-icon",16),t.YNc(13,Q,1,2,"fa-icon",17),t.qZA()(),t.TgZ(14,"div",40)(15,"p",19),t._uU(16),t.qZA(),t.YNc(17,R,2,1,"label",20),t.qZA(),t.TgZ(18,"div",41)(19,"div",22)(20,"a",23),t._UZ(21,"fa-icon",24),t.qZA(),t.TgZ(22,"a",25),t.ALo(23,"whatsapp"),t._UZ(24,"fa-icon",26),t.qZA()(),t.YNc(25,W,2,1,"button",42),t.YNc(26,K,1,0,"button",42),t.qZA(),t.TgZ(27,"div",28)(28,"button",29),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().gotToViewCompany(a)}),t._uU(29,"M\xe1s informaci\xf3n"),t.qZA()()()()}if(2&n){const e=s.$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngStyle",t.VKq(19,y,"url("+e.image+")")),t.xp6(3),t.Oqu(e.comercialName),t.xp6(3),t.Q6J("ngIf",i.aperture(e.openTime,e.closeTime)),t.xp6(1),t.Q6J("ngIf",!i.aperture(e.openTime,e.closeTime)),t.xp6(2),t.AsE("",e.openTime," - ",e.closeTime,""),t.xp6(2),t.Q6J("ngIf",e.delivery),t.xp6(1),t.Q6J("ngIf",e.onMarket),t.xp6(3),t.Oqu(e.addressText),t.xp6(1),t.Q6J("ngIf",e.distance),t.xp6(3),t.MGl("href","tel:",e.phone,"",t.LSH),t.xp6(1),t.Q6J("icon",i.faPhone),t.xp6(1),t.hYB("href","https://wa.me/",t.lcZ(23,17,e.whatsapp),"?text=Hola! ",e.comercialName,"",t.LSH),t.xp6(2),t.Q6J("icon",i.faWhatsapp),t.xp6(1),t.Q6J("ngIf",!i.isFavorite(e._id)),t.xp6(1),t.Q6J("ngIf",i.isFavorite(e._id))}}let j=(()=>{class n{constructor(e,i,o,a,m,u,h){this.general=e,this.authService=i,this.router=o,this.profileProviderService=a,this.messageService=m,this.favoriteService=u,this.confirmationService=h,this.emitEvent=new t.vpe,this.effect="scrollx",this.isMobile=!1,this.displayModal=!1,this.faWhatsapp=p.VHX,this.faPhone=c.j1w,this.faStar=c.Tab,this.faStore=c.vJI,this.faMotorcycle=c.wc0,this.faShare=c.zBy,this.responsiveOptions=[{breakpoint:"1412px",numVisible:2,numScroll:1},{breakpoint:"1200px",numVisible:1,numScroll:1},{breakpoint:"560px",numVisible:1,numScroll:1}],this.getCurrentPosition()}ngOnInit(){this.initializeItems(),this.role=this.authService.getRole(),this.getFavorites()}initializeItems(){this.items&&(this.itemsTmp=[...this.items])}getFavorites(){this.role=this.authService.getRole(),this.role&&this.favoriteService.getByClientId(this.authService.getUserID()).subscribe(e=>{this.favorites=e.data})}isFavorite(e){if(this.favorites){let i=!1;return this.favorites.map(o=>{o.profileProviderId===e&&(i=!0)}),i}}onResize(e){this.isMobile=e.target.innerWidth<768}onSortChange(e){this.general.c("SORT BY",e)}edit(e){this.emitEvent.emit({function:"edit",data:e})}search(e){this.items=""===e?[...this.itemsTmp]:[...this.itemsTmp.filter(i=>i.name.indexOf(e)>-1||i.description.indexOf(e)>-1)]}getPrice(e){return"number"==typeof e?`S/${e}`:e}openModal(e){this.currentItem=e,this.displayModal=!0}aperture(e,i){let o=l().format("YYYY-MM-DD"),a=o+" "+e,m=o+" "+i;return l().isBetween(a,m)}addfavorites(e){this.role=this.authService.getRole(),this.role?this.favoriteService.save({clientId:this.authService.getUserID(),profileProviderId:e}).subscribe(i=>{this.messageService.add({detail:i.message,summary:"\xc9xito",severity:"success"}),this.getFavorites()},i=>{this.messageService.add({detail:i.error,summary:"Error",severity:"error"})}):this.emitEvent.emit({event:"open-login"})}deleteFavorites(e){let i;this.favorites.map(o=>{o.profileProviderId===e&&(i=o._id)}),i&&this.favoriteService.delete(i).subscribe(o=>{this.messageService.add({detail:o.message,summary:"\xc9xito",severity:"success"}),this.getFavorites()},o=>{this.messageService.add({detail:o.error,summary:"Error",severity:"error"})})}confirmDeleteFavorites(e){this.confirmationService.confirm({message:"\xbfSeguro que desea eliminar de favoritos?",acceptLabel:"Si",rejectLabel:"No",header:"Confirmaci\xf3n",accept:()=>{this.deleteFavorites(e)}})}gotToViewCompany(e){this.profileProviderService.getUrlByProfileProviderId(e._id).subscribe(i=>{(null==i?void 0:i.data[0])?this.router.navigate([`/${i.data[0].url.trim()}`]):this.messageService.add({detail:"Url no configurada, contactate con el administrador",summary:"Error",severity:"error"})})}shared(e,i){window.navigator.share({url:`https://vaoperu.com/${e}`,title:`Vao Per\xfa - ${i}`})}rad(e){return e*Math.PI/180}getKilometros(e,i,o,a){var u=this.rad(o-e),h=this.rad(a-i),T=Math.sin(u/2)*Math.sin(u/2)+Math.cos(this.rad(e))*Math.cos(this.rad(o))*Math.sin(h/2)*Math.sin(h/2);return(2*Math.atan2(Math.sqrt(T),Math.sqrt(1-T))*6378.137).toFixed(1)}getCurrentPosition(){return(0,f.mG)(this,void 0,void 0,function*(){const e=yield this.general.getPosition();e&&(this.items=[...this.items.map(i=>(i.distance=i.lat&&i.lng?parseFloat(this.getKilometros(i.lat,i.lng,e.lat,e.lng)):1e6,i))]),this.items=[...this.items.sort(function(i,o){return i.distance>o.distance?1:i.distance<o.distance?-1:0})]})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.m),t.Y36(M.e),t.Y36(E.F0),t.Y36(b.n),t.Y36(v.ez),t.Y36(w.e),t.Y36(v.YP))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-company-list"]],hostBindings:function(e,i){1&e&&t.NdJ("resize",function(a){return i.onResize(a)},!1,t.Jf7)},inputs:{items:"items"},outputs:{emitEvent:"emitEvent"},decls:7,vars:6,consts:[[1,"d-none","d-md-block","mt-5","company-list","bg-color7"],["filterBy","name","layout","grid",3,"value","paginator","rows","emptyMessage"],["pTemplate","gridItem"],[1,"d-block","d-md-none","mt-5"],["filterBy","name",3,"value","emptyMessage"],["pTemplate","listItem"],["header","Confirmation","icon","pi pi-exclamation-triangle"],[1,"company","shadow","mb-3","ml-3","mr-3"],[1,"image-company","cursor",3,"ngStyle","click"],[1,"p-3","d-flex","flex-column","justify-content-between","align-items-start"],[1,"title","font-400","cursor"],[1,"row","align-items-center","m-0","justify-content-between","w-100"],["width","32","src","assets/img/icons/open.svg","alt","Abierto",4,"ngIf"],["width","32","src","assets/img/icons/close.svg","alt","Cerrado",4,"ngIf"],[1,"ml-2","f-10","text-color5","font-500"],[1,"cursor","f-13","text-color2","mr-2",3,"icon","click"],["class","f-13 text-color1",3,"icon","title",4,"ngIf"],["class","f-13 text-color1 ml-2",3,"icon","title",4,"ngIf"],[1,"mt-2","mb-2","d-flex","align-items-center","justify-content-between","w-100"],[1,"font-300","m-0","f-10","address"],["class","text-color1",4,"ngIf"],[1,"m-0","col-12","p-0","row","justify-content-between","align-items-center"],[1,"row","m-0"],["target","_blank","title","Llamar",1,"link-unstyled","p-0","bg-color2","rounded-circle","icon","d-flex","justify-content-center","align-items-center",3,"href"],[1,"f-13",3,"icon"],["target","_blank","title","Whatsapp",1,"ml-2","p-0","bg-color1","rounded-circle","icon","d-flex","justify-content-center","align-items-center",3,"href"],[1,"f-15","text-white",3,"icon"],["class","cursor pl-2 pr-2 bg-color2 border-0 p-1 rounded-pill f-9 font-500",3,"click",4,"ngIf"],[1,"m-0","col-12","p-0","row","justify-content-start","align-items-center","mt-3"],[1,"cursor","pl-2","pr-2","bg-color7","border-0","p-1","rounded-pill","f-9","font-500",3,"click"],["width","32","src","assets/img/icons/open.svg","alt","Abierto"],["width","32","src","assets/img/icons/close.svg","alt","Cerrado"],[1,"f-13","text-color1",3,"icon","title"],[1,"f-13","text-color1","ml-2",3,"icon","title"],[1,"text-color1"],[1,"cursor","pl-2","pr-2","bg-color2","border-0","p-1","rounded-pill","f-9","font-500",3,"click"],[1,"company","mb-3","d-flex","col"],[1,"image-company-responsive","cursor",3,"ngStyle","click"],[1,"p-3","d-flex","flex-column","col","justify-content-between","align-items-start"],[1,"row","align-items-center","col","m-0","p-0","justify-content-between","w-100"],[1,"mt-2","d-flex","align-items-center","justify-content-between","w-100"],[1,"d-flex","col","m-0","p-0","justify-content-between","align-items-center"],["class","cursor px-2 bg-color2 border-0 p-1 rounded-pill f-9 font-500",3,"click",4,"ngIf"],[1,"cursor","px-2","bg-color2","border-0","p-1","rounded-pill","f-9","font-500",3,"click"],[1,"f-13","text-white",3,"icon"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"p-dataView",1),t.YNc(2,B,31,22,"ng-template",2),t.qZA()(),t.TgZ(3,"div",3)(4,"p-dataView",4),t.YNc(5,$,30,21,"ng-template",5),t.qZA()(),t._UZ(6,"p-confirmDialog",6)),2&e&&(t.xp6(1),t.Q6J("value",i.items)("paginator",!0)("rows",9)("emptyMessage","No se encontraron resultados"),t.xp6(3),t.Q6J("value",i.items)("emptyMessage","No se encontraron resultados"))},directives:[Z.VO,v.jx,C.PC,C.O5,P.BN,L.Q],pipes:[O.T],styles:[".company[_ngcontent-%COMP%]{position:relative;overflow:hidden}.company[_ngcontent-%COMP%]   .image-company[_ngcontent-%COMP%]{background-repeat:no-repeat;background-size:cover;min-height:180px;min-width:180px;max-width:180px;margin:auto!important;border-radius:10px}.company[_ngcontent-%COMP%]   .image-company-responsive[_ngcontent-%COMP%]{background-repeat:no-repeat;background-size:cover;min-height:180px;min-width:180px;max-width:180px;border-radius:10px}.company[_ngcontent-%COMP%]   .address[_ngcontent-%COMP%]{min-height:30px}.company[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{cursor:pointer;min-width:32px;min-height:32px;max-width:32px;max-height:32px}"]}),n})()},3349:(x,g,r)=>{r.d(g,{T:()=>t});var f=r(5e3);let t=(()=>{class p{transform(l,..._){return 9===l.length?`51${l}`:12===l.length?l.substring(1):l}}return p.\u0275fac=function(l){return new(l||p)},p.\u0275pipe=f.Yjl({name:"whatsapp",type:p,pure:!0}),p})()},8157:(x,g,r)=>{r.d(g,{e:()=>p});var f=r(5e3),t=r(5830);let p=(()=>{class c{constructor(_){this.api=_,this.model="favorite"}save(_){return this.api.api({service:`save-${this.model}`,type:"post",data:_})}getByClientId(_){return this.api.api({service:`get-${this.model}-by-client-id/${_}`,type:"get",data:null})}delete(_){return this.api.api({service:`delete-${this.model}/${_}`,type:"delete",data:null})}}return c.\u0275fac=function(_){return new(_||c)(f.LFG(t.s))},c.\u0275prov=f.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()}}]);