"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[579],{2579:(J,c,o)=>{o.r(c),o.d(c,{UserModule:()=>S});var d=o(9808),g=o(9812);class l{constructor(){this._id=null,this.name="",this.email="",this.password="",this.role=[]}}class h{constructor(){this._id=!1,this.name=!1,this.email=!1,this.password=!1,this.role=!1}}var e=o(5e3),C=o(1864),b=o(8368),u=o(9783),f=o(7840),v=o(5315),m=o(4182),_=o(5055),y=o(7307);function U(n,a){if(1&n){const r=e.EpF();e.TgZ(0,"div",19)(1,"div")(2,"span",20),e._uU(3,"Nombre :"),e.qZA(),e.TgZ(4,"span",21),e._uU(5),e.qZA()(),e.TgZ(6,"div")(7,"button",22),e.NdJ("click",function(){const i=e.CHM(r).$implicit;return e.oxw().addEdit(i)}),e._uU(8,"Editar"),e.qZA()()()}if(2&n){const r=a.$implicit;e.xp6(5),e.Oqu(r.name)}}function I(n,a){1&n&&(e.TgZ(0,"button",23),e._uU(1,"Resetar contrase\xf1a"),e.qZA())}function Z(n,a){if(1&n){const r=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(s){e.CHM(r);const i=e.oxw();return i.confirm(s,i.currentItem)}),e._uU(1,"Eliminar"),e.qZA()}}const M=function(){return{"max-height":"30rem"}},p=function(n){return{invalid:n}},T=[{path:"",component:(()=>{class n{constructor(r,t,s,i){this.general=r,this.userService=t,this.messageService=s,this.confirmationService=i,this.displayModal=!1,this.invalid=new h,this.currentItem=new l,this.roles=[{name:"Administrador",key:"admin"},{name:"Proveedor",key:"provider"},{name:"Usuario",key:"user"}]}ngOnInit(){this.get()}get(){this.userService.get().subscribe(r=>{this.items=r.data},r=>{this.messageService.add({severity:"error",summary:"Error",detail:r.error.message})})}validate(r){var t;this.invalid=new h;let s=!1;return this.currentItem.name||(s=!0,this.invalid.name=!0,this.messageService.add({severity:"error",summary:"Error",detail:"Debe completar todos los campos requeridos"})),this.currentItem.email||(s=!0,this.invalid.email=!0,this.messageService.add({severity:"error",summary:"Error",detail:"Debe completar todos los campos requeridos"})),r._id||this.currentItem.password||(s=!0,this.invalid.password=!0,this.messageService.add({severity:"error",summary:"Error",detail:"Debe completar todos los campos requeridos"})),(!this.currentItem.role||0===(null===(t=this.currentItem.role)||void 0===t?void 0:t.length))&&(s=!0,this.invalid.role=!0,this.messageService.add({severity:"error",summary:"Error",detail:"Debe completar el rol"})),s}reset(){this.currentItem=new l}addEdit(r=null){r?(r.password="",this.currentItem=r):this.reset(),this.displayModal=!0}confirm(r,t){this.confirmationService.confirm({target:r.target,message:"\xbfSeg\xfaro que desea eliminar?",icon:"pi pi-exclamation-triangle",acceptLabel:"S\xed",rejectLabel:"No",accept:()=>{this.delete(t)},reject:()=>{}})}add(){this.validate(this.currentItem)||(this.currentItem._id&&delete this.currentItem.password,this.userService.save(this.currentItem).subscribe(r=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:r.message?r.message:"Usuario registrado"}),this.currentItem=new l,this.get()},r=>{this.messageService.add({severity:"error",summary:"Error",detail:r.error.message})}))}delete(r){this.userService.delete(r._id).subscribe(t=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:t.message}),this.currentItem=new l,this.get()},t=>{this.messageService.add({severity:"error",summary:"Error",detail:t.error.message})})}getElementByID(r){return this.items.filter(t=>t._id===r)}}return n.\u0275fac=function(r){return new(r||n)(e.Y36(C.m),e.Y36(b.K),e.Y36(u.ez),e.Y36(u.YP))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-user"]],decls:24,vars:36,consts:[[1,"p-5"],[1,"row","m-0","justify-content-between","align-items-center"],[1,"btn2",3,"click"],[1,"pi","pi-plus","mr-2"],[1,"mt-5"],["header","Lista de usuarios","filterPlaceholder","Buscar por nombre","filterBy","name",3,"value","listStyle","dragdrop"],["pTemplate","item","class","mt-3"],["header","",3,"visible","modal","styleClass","baseZIndex","autoZIndex","draggable","resizable","visibleChange"],[1,"col-12","row","m-0","justify-content-center"],[1,"row","m-0","p-0","flex-column","col-12","col-md-6"],["type","text",1,"invalid","mt-3","input-login",3,"ngModel","ngClass","placeholder","keyup.enter","keyup","ngModelChange"],["type","email",1,"invalid","mt-3","input-login",3,"ngModel","ngClass","placeholder","keyup.enter","keyup","ngModelChange"],["type","password",1,"invalid","mt-3","input-login",3,"ngModel","ngClass","placeholder","keyup.enter","keyup","ngModelChange"],["class","btn1 mt-3",4,"ngIf"],[1,"mt-3"],["optionLabel","name","optionValue","key",3,"options","ngModel","multiple","metaKeySelection","checkbox","filter","ngModelChange"],[1,"btn1","mt-4",3,"click"],["class","btn3 bg-color6 pt-2 pb-2 mt-2",3,"click",4,"ngIf"],[3,"autoZIndex","baseZIndex"],["draggable","true",1,"item-list","row","justify-content-between","align-items-center","m-0","pl-2","pr-2"],[1,"font-700"],[1,"ml-3"],[1,"btn2","p-0","pl-3","pr-3",3,"click"],[1,"btn1","mt-3"],[1,"btn3","bg-color6","pt-2","pb-2","mt-2",3,"click"]],template:function(r,t){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4"),e._uU(3,"Usuarios"),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return t.addEdit()}),e._UZ(5,"i",3),e._uU(6," Agregar "),e.qZA()(),e.TgZ(7,"div",4)(8,"p-orderList",5),e.YNc(9,U,9,1,"ng-template",6),e.qZA()()(),e.TgZ(10,"p-dialog",7),e.NdJ("visibleChange",function(i){return t.displayModal=i}),e.TgZ(11,"div",8)(12,"div",9)(13,"input",10),e.NdJ("keyup.enter",function(){return t.add()})("keyup",function(){return t.invalid.name=!1})("ngModelChange",function(i){return t.currentItem.name=i}),e.qZA(),e.TgZ(14,"input",11),e.NdJ("keyup.enter",function(){return t.add()})("keyup",function(){return t.invalid.email=!1})("ngModelChange",function(i){return t.currentItem.email=i}),e.qZA(),e.TgZ(15,"input",12),e.NdJ("keyup.enter",function(){return t.add()})("keyup",function(){return t.invalid.password=!1})("ngModelChange",function(i){return t.currentItem.password=i}),e.qZA(),e.YNc(16,I,2,0,"button",13),e.TgZ(17,"label",14),e._uU(18,"Seleccione los roles"),e.qZA(),e.TgZ(19,"p-listbox",15),e.NdJ("ngModelChange",function(i){return t.currentItem.role=i}),e.qZA(),e.TgZ(20,"button",16),e.NdJ("click",function(){return t.add()}),e._uU(21,"Guardar"),e.qZA(),e.YNc(22,Z,2,0,"button",17),e.qZA()()(),e._UZ(23,"p-confirmPopup",18)),2&r&&(e.xp6(8),e.Q6J("value",t.items)("listStyle",e.DdM(29,M))("dragdrop",!0),e.xp6(2),e.Q6J("visible",t.displayModal)("modal",!0)("styleClass","modalLogin")("baseZIndex",1e4)("autoZIndex",!1)("draggable",!1)("resizable",!1),e.xp6(3),e.Q6J("ngModel",t.currentItem.name)("ngClass",e.VKq(30,p,t.invalid.name))("placeholder","Nombre"),e.xp6(1),e.Q6J("ngModel",t.currentItem.email)("ngClass",e.VKq(32,p,t.invalid.email))("placeholder","Correo"),e.xp6(1),e.Q6J("ngModel",t.currentItem.password)("ngClass",e.VKq(34,p,t.invalid.password))("placeholder","Contrase\xf1a"),e.xp6(1),e.Q6J("ngIf",t.currentItem._id),e.xp6(3),e.Q6J("options",t.roles)("ngModel",t.currentItem.role)("multiple",!0)("metaKeySelection",!1)("checkbox",!0)("filter",!0),e.xp6(3),e.Q6J("ngIf",t.currentItem._id),e.xp6(1),e.Q6J("autoZIndex",!1)("baseZIndex",1000001))},directives:[f.F,u.jx,v.V,m.Fj,m.JJ,m.On,d.mk,d.O5,_.Ri,y.P],styles:[""]}),n})()}];let k=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[g.Bz.forChild(T)],g.Bz]}),n})(),S=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[u.YP],imports:[[d.ez,k,y.n,f.C,v.S,m.u5,_.ON]]}),n})()}}]);