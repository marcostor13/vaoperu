<div class="row m-0">
    <app-menu-admin class="d-none d-md-flex"></app-menu-admin>
    <div class="flex-1">
        <app-header-admin></app-header-admin>
        <div class="p-5">
            <div class="row m-0 justify-content-between align-items-center">
                <h4>Agregar categorías y/o subcategorías</h4>
            </div>
            
            <div *ngIf="profileProviders" class="mt-5">
                <p-orderList 
                header="Lista de perfiles"
                filterPlaceholder="Buscar por nombre"
                filterBy="name"
                [value]="profileProviders" 
                [listStyle]="{'max-height':'30rem'}"
                [dragdrop]="true" 
                >
                    <ng-template let-item pTemplate="item" class="mt-3">
                        <div draggable="true" class="item-list row justify-content-between align-items-center m-0 pl-2 pr-2">
                            <div>
                                <span class="font-700">Negocio :</span><span class="ml-3">{{item.comercialName}}</span>
                            </div>
                            <div>
                                <button (click)="addEdit(item)" class="btn2 p-0 pl-3 pr-3">Editar</button>
                            </div>
                        </div>
                    </ng-template>
                </p-orderList>
            </div>
        </div>
    </div>
</div>

<p-dialog 
    header="" 
    [(visible)]="displayModal" 
    [modal]="true" 
    [styleClass]="'modalLogin'" 
    [baseZIndex]="10000"
    [autoZIndex]="false"
    [draggable]="false"
    [resizable]="false">
    

    <div class="col-12 row m-0 justify-content-center">
        <div *ngIf="currentProfileProvider" class="row m-0 p-0 flex-column col-12 col-md-6">      
            <h5 class="text-center">{{currentProfileProvider.comercialName}}</h5>
            <select (change)="toogleSubcategories()" class="mt-4" [(ngModel)]="currentCategory">
                <option value="">Seleccione la categoría</option>
                <option *ngFor="let category of categories" [value]="category._id">{{category.name}}</option>
            </select>
            <select *ngIf="currentSubcategories?.length>0" class="mt-2" [(ngModel)]="currentSubcategory">
                <option value="">Seleccione la subcategoría</option>
                <option *ngFor="let subcategory of currentSubcategories" [value]="subcategory._id">{{subcategory.name}}</option>
            </select>
            <button (click)="add()" [disabled]="!((currentCategory && currentSubcategories?.length === 0) || (currentCategory && currentSubcategory))" class="btn1 mt-2">Agregar</button>
            <div *ngIf="currentList" class="mt-3 d-flex justify-content-center align-items-center flex-wrap border rounded">
                <div class="m-2 p-2 px-4 rounded" [ngClass]="{'bg-color8': item.type==='subcategory', 'bg-color1': item.type==='category'}" *ngFor="let item of currentList">{{item.name}}
                    <fa-icon (click)="confirm($event, item)" class="f-15 text-color4 cursor" [icon]="faTrash"></fa-icon>
                </div>
            </div>
            
        </div>
    </div>

</p-dialog>

<p-confirmDialog header="Confirmación" icon="pi pi-exclamation-triangle"></p-confirmDialog>